{
  "title": "Systemd-timesyncd (Português)",
  "url": "https://wiki.archlinux.org/title/Systemd-timesyncd_(Portugu%C3%AAs)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Artigos relacionados\n\n- systemd-networkd\n- systemd\n- System time\n\nDa lista de discussão do systemd (traduzido):\n\n"
    },
    {
      "title": "Configuração",
      "level": 2,
      "content": "Inicie/habilite systemd-timesyncd.service, o qual está disponível com systemd.\n\nAo iniciar, systemd-timesyncd lerá o arquivo de configuração de /etc/systemd/timesyncd.conf, que se parece com isso:\n\n```\n/etc/systemd/timesyncd.conf\n```\n\n```\n[Time]\n#NTP=\n#FallbackNTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\n#...\n```\n\nPara adicionar servidores de tempo ou alterar os fornecidos, descomente a linha relevante e liste seu nome de host ou IP separado por um espaço. Por exemplo, você pode usar qualquer servidor fornecido por the NTP pool project ou usar os servidores padrão do Arch (também fornecido pelo projeto NTP pool):\n\n```\n/etc/systemd/timesyncd.conf\n```\n\n```\n[Time]\nNTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\nFallbackNTP=0.pool.ntp.org 1.pool.ntp.org 0.fr.pool.ntp.org\n```\n\nPara verificar sua configuração:\n\n```\n$ timedatectl show-timesync --all\n```\n\n```\nLinkNTPServers=\nSystemNTPServers=\nFallbackNTPServers=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\nServerName=0.arch.pool.ntp.org\nServerAddress=103.47.76.177\nRootDistanceMaxUSec=5s\nPollIntervalMinUSec=32s\nPollIntervalMaxUSec=34min 8s\nPollIntervalUSec=1min 4s\nNTPMessage={ Leap=0, Version=4, Mode=4, Stratum=2, Precision=-21, RootDelay=177.398ms, RootDispersion=142.196ms, Reference=C342F10A, OriginateTimestamp=Mon 2018-07-16 13:53:43 +08, ReceiveTimestamp=Mon 2018-07-16 13:53:43 +08, TransmitTimestamp=Mon 2018-07-16 13:53:43 +08, DestinationTimestamp=Mon 2018-07-16 13:53:43 +08, Ignored=no PacketCount=1, Jitter=0 }\nFrequency=22520548\n```\n\nAlém da configuração do daemon, os servidores NTP também podem ser fornecidos através de uma configuração do systemd-networkd com uma opção NTP= ou, dinamicamente, via um servidor DHCP.\n\nO servidor NTP a ser usado será determinado usando as seguintes regras:\n\n- Quaisquer servidores NTP por interface obtidos da configuração do systemd-networkd.service(8) ou via DHCP têm precedência.\n- Os servidores NTP definidos em /etc/systemd/timesyncd.conf serão anexados à lista por interface em tempo de execução e o daemon entrará em contato com os servidores até que seja encontrado um que responda.\n- Se nenhuma informação do servidor NTP for adquirida após a conclusão dessas etapas, os nomes de host do servidor NTP ou endereços IP definidos em FallbackNTP= serão usados.\n\n"
    },
    {
      "title": "Uso",
      "level": 2,
      "content": "Para habilitá-lo e iniciá-lo, basta executar:\n\n```\n# timedatectl set-ntp true\n```\n\nO processo de sincronização pode ser notavelmente lento. Isso é esperado, deve-se esperar um pouco antes de determinar que há um problema. Para verificar o status do serviço, use:\n\n```\n$ timedatectl status\n```\n\n```\nLocal time: ter 2022-11-15 10:43:14 -03\n           Universal time: ter 2022-11-15 13:43:14 UTC\n                 RTC time: ter 2022-11-15 13:43:14\n                Time zone: America/Sao_Paulo (-03, -0300)\nSystem clock synchronized: yes\n              NTP service: active\n          RTC in local TZ: no\n```\n\nPara ver informações detalhadas do serviço, use:\n\n```\n$ timedatectl timesync-status\n```\n\n```\nServer: 200.192.232.8 (0.arch.pool.ntp.org)\nPoll interval: 1min 4s (min: 32s; max 34min 8s)\n         Leap: normal\n      Version: 4\n      Stratum: 2\n    Reference: C8A007BA\n    Precision: 1us (-23)\nRoot distance: 11.115ms (max: 5s)\n       Offset: +3.182ms\n        Delay: 59.700ms\n       Jitter: 1.202ms\n Packet count: 2\n    Frequency: +0,000ppm\n```\n\n"
    },
    {
      "title": "Veja também",
      "level": 2,
      "content": "- Forum: systemd-timesyncd is not syncing time (em português, systemd-timesyncd não está sincronizando o tempo)\n- Forum: Using systemd-timesync instead of NTP (em português, Usando systemd-timesync em vez do NTP)\n- Código-fonte do timesyncd\n- systemd-timesyncd(8)\n- timesyncd.conf(5)\n\n"
    }
  ]
}