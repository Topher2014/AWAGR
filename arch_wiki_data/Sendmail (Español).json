{
  "title": "Sendmail (Español)",
  "url": "https://wiki.archlinux.org/title/Sendmail_(Espa%C3%B1ol)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **2019-11-21** \n\nSendmail es el clásico agente de transferencia de correo del mundo Unix. Este artículo se basa en Mail server.\n\nEl objetivo de este artículo es configurar Sendmail para cuentas de usuarios locales, sin usar MySQL u otra base de datos, y también permitir la creación de cuentas solo de correo .\n\n"
    },
    {
      "title": "Instalación",
      "level": 2,
      "content": "Instale los paquetes sendmailAUR, procmailAUR y m4.\n\n"
    },
    {
      "title": "Añadir usuarios",
      "level": 2,
      "content": "Cree un usuario de Linux para cada usuario que desee recibir correo electrónico en username@your-domain.com. Para añadir cuentas solo de correo, es decir, usuarios que pueden recibir correos electrónicos, pero no pueden tener acceso de shell o iniciar sesión en X, puede agregarlos así:\n\n```\n# useradd -m -s /usr/bin/nologin nombre-de-usuario\n```\n\n"
    },
    {
      "title": "Obtener certificado TLS",
      "level": 3,
      "content": "Para obtener un certificado, consulte OpenSSL#Usage.\n\n"
    },
    {
      "title": "sendmail.cf",
      "level": 3,
      "content": "Cree el archivo /etc/mail/sendmail.mc. Puede leer todas las opciones para configurar sendmail en el archivo /usr/share/sendmail-cf/README.\n\nNote: **non-TLS** \n\nHe aquí hay un ejemplo usando «auth» mediante TLS. El ejemplo tiene comentarios que explican cómo funciona. Los comentarios comienzan con dnl .\n\n```\n/etc/mail/sendmail.mc\n```\n\n```\ninclude(`/usr/share/sendmail-cf/m4/cf.m4')\ndefine(`confDOMAIN_NAME', `your-domain.com')dnl\nFEATURE(use_cw_file)\ndnl  Lo siguiente permite enviar si el usuario se autentica,\ndnl  y no permite la autenticación de texto plano (PLAIN/LOGIN) mediante\ndnl  enlaces non-TLS:\ndefine(`confAUTH_OPTIONS', `A p y')dnl\ndnl\ndnl  Aceptar autenticaciones PLAIN y LOGIN:\nTRUST_AUTH_MECH(`LOGIN PLAIN')dnl\ndefine(`confAUTH_MECHANISMS', `LOGIN PLAIN')dnl\ndnl\ndnl Asegúrese de que estas rutas apuntan correctamente a sus archivos cert SSL:\ndefine(`confCACERT_PATH',`/etc/ssl/certs')\ndefine(`confCACERT',`/etc/ssl/cacert.pem')\ndefine(`confSERVER_CERT',`/etc/ssl/certs/server.crt')\ndefine(`confSERVER_KEY',`/etc/ssl/private/server.key')\ndnl\nFEATURE(`virtusertable', `hash /etc/mail/virtusertable.db')dnl\nOSTYPE(linux)dnl\nMAILER(local)dnl\nMAILER(smtp)dnl\n```\n\nLuego procéselo con:\n\n```\n# m4 /etc/mail/sendmail.mc > /etc/mail/sendmail.cf\n```\n\n"
    },
    {
      "title": "local-host-names",
      "level": 3,
      "content": "Coloque sus dominios en el archivo local-host-names:\n\n```\n/etc/mail/local-host-names\n```\n\n```\nlocalhost\nyour-domain.com\nmail.your-domain.com\nlocalhost.localdomain\n```\n\nAsegúrese de que los dominios también sean resueltos por su archivo /etc/hosts.\n\n"
    },
    {
      "title": "access.db",
      "level": 3,
      "content": "Cree el archivo /etc/mail/accessy coloque allí las direcciones base donde desea poder enviar el correo. Supongamos que tiene una vpn en 10.5.0.0/24, y desea enviar correos desde cualquier ip en ese rango:\n\n```\n/etc/mail/access\n```\n\n```\n10.5.0 RELAY\n127.0.0 RELAY\n```\n\nLuego procéselo con:\n\n```\n# makemap hash /etc/mail/access.db < /etc/mail/access\n```\n\n"
    },
    {
      "title": "aliases.db",
      "level": 3,
      "content": "Cree el archivo /etc/mail/aliases, descomente la línea #root: human being here y cámbielo para que sea así:\n\n```\nroot:         your-username\n```\n\nPuede añadir alias para sus nombres de usuario allí, de esta forma:\n\n```\ncoolguy:      your-username\nsomedude:     your-username\n```\n\nLuego procéselo con:\n\n```\n# newaliases\n```\n\n"
    },
    {
      "title": "virtusertable.db",
      "level": 3,
      "content": "Cree el archivo virtusertable y coloque alias que incluyan dominios (útil si su servidor aloja varios dominios):\n\n```\n/etc/mail/virtusertable\n```\n\n```\nyour-username@your-domain.com         your-username\njoe@my-other.tk                       joenobody\n```\n\nLuego procéselo con:\n\n```\n# makemap hash /etc/mail/virtusertable.db < /etc/mail/virtusertable\n```\n\n"
    },
    {
      "title": "Comenzar en el arranque",
      "level": 3,
      "content": "Active e inicie los siguientes servicios. Véase Daemons para obtener más detalles.\n\n- saslauthd.service\n- sendmail.service\n- sm-client.service\n\n"
    },
    {
      "title": "Autenticación SASL",
      "level": 3,
      "content": "Añada un usuario a la base de datos SASL para la autenticación SMTP:\n\n```\n# saslpasswd2 -c your-username\n```\n\n"
    },
    {
      "title": "Reenviar todo el correo de un dominio a cierto usuario",
      "level": 3,
      "content": "Para reenviar todo el correo dirigido a cualquier usuario en el dominio my-other.tk a your-username@your-domain.com, añádalo al archivo /etc/mail/virtusertable:\n\n```\n@my-other.tk        your-username@your-domain.com\n```\n\nNo olvide procesarlo nuevamente con:\n\n```\n# makemap hash /etc/mail/virtusertable.db < /etc/mail/virtusertable\n```\n\n"
    }
  ]
}