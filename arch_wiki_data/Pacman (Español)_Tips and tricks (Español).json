{
  "title": "Pacman (Español)/Tips and tricks (Español)",
  "url": "https://wiki.archlinux.org/title/Pacman_(Espa%C3%B1ol)/Tips_and_tricks_(Espa%C3%B1ol)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **2020-01-02** \n\nArtículos relacionados\n\n- Mirrors (Español)\n- Creating packages (Español)\n\nPara conocer métodos generales que permitan mejorar la flexibilidad de las presentes sugerencias o del propio pacman, consulte Core utilities (Español) y Bash (Español).\n\n"
    },
    {
      "title": "Mantenimiento",
      "level": 2,
      "content": "Véase también System maintenance (Español).\n\n"
    },
    {
      "title": "Listar paquetes",
      "level": 3,
      "content": "Es posible que desee obtener la lista de paquetes instalados con su versión, lo cual es útil cuando se reportan errores o se discuten los paquetes instalados.\n\n- Lista de todos los paquetes explícitamente instalados: pacman -Qe.\n- Lista de todos los package group llamado group: pacman -Sg group\n- Lista de los paquetes originales instalados explícitamente (es decir, presentes en la base de datos de sincronización) que no sean dependencias directas o opcionales: pacman -Qent .\n- Lista de todos los paquetes externos (normalmente descargados e instalados manualmente o paquete quitados de los repositorios): pacman -Qm.\n- Lista de todos los paquetes originales (instalados desde la(s) base de datos de sincronización): pacman -Qn .\n- Lista de paquetes por su expresión regular también conocida como «regex»: pacman -Qs regex .\n- Lista de paquetes por regex con formato de salida personalizado: expac -s \"%-30n %v\" regex (necesita expac).\n\n"
    },
    {
      "title": "Por tamaño",
      "level": 4,
      "content": "Descubrir qué paquetes son más grandes puede ser útil cuando se trata de liberar espacio en el disco duro. Aquí se presentan dos opciones: o bien obtener el tamaño de los paquetes individuales, o bien obtener el tamaño de los paquetes y sus dependencias.\n\nLa siguiente orden listará todos los paquetes instalados y sus tamaños particulares:\n\n```\n$ LC_ALL=C pacman -Qi | awk '/^Name/{name=$3} /^Installed Size/{print $4$5, name}' | sort -h\n```\n\nPara listar los tamaños de los paquetes con sus dependencias,\n\n- Instale expac y ejecute expac -H M '%m\\t%n' | sort -h.\n- Ejecute pacgraphAUR con la opción -c.\n\nPara listar el tamaño de descarga de varios paquetes (deje packages en blanco para listar todos los paquetes):\n\n```\n$ expac -S -H M '%k\\t%n' packages\n```\n\nPara listar paquetes instalados explícitamente que no estén en base ni en base-devel con su tamaño y descripción:\n\n```\n$ expac -H M \"%011m\\t%-20n\\t%10d\" $(comm -23 <(pacman -Qqen | sort) <(pacman -Qqg base base-devel | sort)) | sort -n\n```\n\nPara listar los paquetes marcados para actualizar con su tamaño de descarga:\n\n```\n$ pacman -Quq|xargs expac -S -H M '%k\\t%n' | sort -sh\n```\n\n"
    },
    {
      "title": "Por fecha",
      "level": 4,
      "content": "Para enumerar los 20 últimos paquetes instalados con expac, ejecute:\n\n```\n$ expac --timefmt='%Y-%m-%d %T' '%l\\t%n' | sort | tail -n 20\n```\n\nO, con segundos desde la fecha (1970-01-01 UTC):\n\n```\n$ expac --timefmt=%s '%l\\t%n' | sort -n | tail -n 20\n```\n\n"
    },
    {
      "title": "No especificados en un grupo o repositorio",
      "level": 4,
      "content": "Listado de los paquetes explícitamente instalados que no están en los grupos base o base-devel:\n\n```\n$ comm -23 <(pacman -Qeq | sort) <(pacman -Qgq base base-devel | sort)\n```\n\nListado de todos los paquetes instalados no requeridos por otros paquetes y que no estén en los grupos base o base-devel :\n\n```\n$ comm -23 <(pacman -Qqt | sort) <(pacman -Sqg base base-devel | sort)\n```\n\nComo arriba, pero con descripciones:\n\n```\n$ expac -HM '%-20n\\t%10d' $(comm -23 <(pacman -Qqt | sort) <(pacman -Qqg base base-devel | sort))\n```\n\nListado de todos los paquetes instalados que no están en el repositorio especificado como repo_name\n\n```\n$ comm -23 <(pacman -Qq | sort) <(pacman -Slq repo_name | sort)\n```\n\nListado de todos los paquetes instalados que están en el repositorio repo_name :\n\n```\n$ comm -12 <(pacman -Qq | sort) <(pacman -Slq repo_name | sort)\n```\n\nListado de todos los paquetes presentes en la ISO de Arch Linux que no están en el grupo base:\n\n```\n$ comm -23 <(curl https://git.archlinux.org/archiso.git/tree/configs/releng/packages.x86_64) <(pacman -Qqg base | sort)\n```\n\n"
    },
    {
      "title": "Paquetes en desarrollo",
      "level": 4,
      "content": "Para listar todos lo paquetes development/unstable, ejecute:\n\n```\n$ pacman -Qq | grep -Ee '-(bzr|cvs|darcs|git|hg|svn)$'\n```\n\n"
    },
    {
      "title": "Explorar paquetes",
      "level": 3,
      "content": "Para explorar todos los paquetes instalados con una visualización instantánea de cada paquete:\n\n```\n$ pacman -Qq | fzf --preview 'pacman -Qil {}' --layout=reverse --bind 'enter:execute(pacman -Qil {} | less)'\n```\n\nEsto utiliza fzf para presentar una vista de dos paneles donde se muestran todos los paquetes con la información de cada cual a la derecha.\n\nIntroduzca letras para filtrar la lista de paquetes; use las teclas de flecha (o Ctrl-j/Ctrl-k) para desplazarse; presione Intro para ver la información del paquete señalado.\n\n"
    },
    {
      "title": "Listar archivos que pertenecen a un paquete con su correspondiente tamaño",
      "level": 3,
      "content": "Esto podría ser útil si descubrió que un paquete específico utiliza una gran cantidad de espacio y desea saber qué archivos lo componen.\n\n```\n$ pacman -Qlq package | grep -v '/$' | xargs du -h | sort -h\n```\n\n"
    },
    {
      "title": "Identificar archivos que no pertenecen a ningún paquete",
      "level": 3,
      "content": "Si su sistema tiene archivos huérfanos que no pertenecen a ningún paquete (un caso común si no usa el gestor de paquetes para instalar software), es posible que desee encontrar dichos archivos para limpiarlos.\n\nUn método consiste en utilizar # pacreport --unowned-files del paquete pacutils que incluirá una lista de los archivos sin dueño entre otros detalles.\n\nOtro método es enumerar todos los archivos de interés y compararlos con pacman:\n\n```\n# find /etc /usr /opt /var | LC_ALL=C pacman -Qqo - 2>&1 > /dev/null | cut -d ' ' -f 5-\n```\n\n"
    },
    {
      "title": "Rastrear archivos sin dueño creados por paquetes",
      "level": 3,
      "content": "La mayoría de los sistemas recolectarán lentamente diversos archivos fantasmas tales como archivos de estado, registros, índices, etc. durante el curso de la operación habitual.\n\npacreport de pacutils se puede usar para rastrear estos archivos y sus asociaciones a través de /etc/pacreport.conf (vea pacreport(1) § FILES).\n\nUn ejemplo podría ser algo parecido a esto (abreviado):\n\n```\n/etc/pacreport.conf\n```\n\n```\n[Options]\nIgnoreUnowned = usr/share/applications/mimeinfo.cache\n\n[PkgIgnoreUnowned]\nalsa-utils = var/lib/alsa/asound.state\nbluez = var/lib/bluetooth\nca-certificates = etc/ca-certificates/trust-source/*\ndbus = var/lib/dbus/machine-id\nglibc = etc/ld.so.cache\ngrub = boot/grub/*\nlinux = boot/initramfs-linux.img\npacman = var/lib/pacman/local\nupdate-mime-database = usr/share/mime/magic\n```\n\nLuego, cuando utilice # pacreport --unowned-files, todos los archivos sin propietario se mostrarán si el paquete asociado ya no está instalado (o si se han creado nuevos archivos).\n\nAdemás, aconfmgr (aconfmgr-gitAUR) permite rastrear archivos modificados y huérfanos usando un script de configuración.\n\n"
    },
    {
      "title": "Eliminar paquetes no utilizados (huérfanos)",
      "level": 3,
      "content": "Para eliminar de forma recursiva los paquetes huérfanos y sus archivos de configuración:\n\n```\n# pacman -Rns $(pacman -Qtdq)\n```\n\nSi no se encontraron paquetes huérfanos, aparecerán errores de pacman con error: no targets specified. Esto se espera ya que no se pasaron argumentos a pacman -Rns.\n\n"
    },
    {
      "title": "Eliminar todo menos los paquetes esenciales",
      "level": 3,
      "content": "Si alguna vez es necesario eliminar todos los paquetes, excepto los paquetes esenciales, un método es establecer el motivo de instalación de los no esenciales como dependencia y luego eliminar todas las dependencias innecesarias.\n\nPrimero, para todos los paquetes instalados «como explícitamente», cambie su razón de instalación a «como dependencia»:\n\n```\n# pacman -D --asdeps $(pacman -Qqe)\n```\n\nLuego, cambie el motivo de instalación a instalados «como explícitamente» para los paquetes esenciales solamente, esto es, aquellos que no desea eliminar, para apuntarlos:\n\n```\n# pacman -D --asexplicit base linux linux-firmware\n```\n\n- Se pueden añadir paquetes adicionales a la orden anterior para evitar que se eliminen. Consulte Installation guide (Español)#Instalar paquetes esenciales para obtener más información sobre otros paquetes que pueden ser necesarios para un sistema base completamente funcional.\n- Esta orden también seleccionará el paquete del gestor de arranque para su eliminación. El sistema aún debería ser arrancable, pero los parámetros de arranque podrían no ser modificables sin él.\n\nFinalmente, siga las instrucciones de #Eliminar paquetes no utilizados (huérfanos) para eliminar todos los paquetes que tengan una razón de instalación «como dependencia».\n\n"
    },
    {
      "title": "Obtener la lista de dependencias de varios paquetes",
      "level": 3,
      "content": "Las dependencias se ordenan alfabéticamente y las repetidas se eliminan.\n\n```\n$ LC_ALL=C pacman -Si packages | awk -F'[:<=>]' '/^Depends/ {print $2}' | xargs -n1 | sort -u\n```\n\nComo alternativa puede utilizar expac:\n\n```\n$ expac -l '\\n' %E -S packages | sort -u\n```\n\n"
    },
    {
      "title": "Listar los archivos de copia de seguridad modificados",
      "level": 3,
      "content": "Si desea realizar una copia de seguridad de los archivos de configuración del sistema, puede copiar todos los archivos en /etc/, pero normalmente solo le interesan los ficheros que ha modificado. Los archivos de copias de seguridad se puede ver con la siguiente orden:\n\n```\n# pacman -Qii | awk '/^MODIFIED/ {print $2}'\n```\n\nEjecutar esta orden con permisos de root asegurará que los archivos solo pueden ser leídos por root (por ejemplo /etc/sudoers) están incluidos en la salida.\n\n"
    },
    {
      "title": "Realizar copia de seguridad de la base de datos de pacman",
      "level": 3,
      "content": "La siguiente orden se puede usar para realizar una copia de seguridad de la base de datos local de pacman :\n\n```\n$ tar -cjf pacman_database.tar.bz2 /var/lib/pacman/local\n```\n\nAlmacene la copia de seguridad de la base de datos de pacman en uno o más medios sin conexión, como una memoria USB, disco duro externo o CD-R.\n\nLa base de datos se puede restaurar moviendo el archivo pacman_database.tar.bz2 en el / directorio y ejecutando la siguiente orden :\n\n```\n# tar -xjvf pacman_database.tar.bz2\n```\n\n"
    },
    {
      "title": "Verificar registros de cambios fácilmente",
      "level": 3,
      "content": "Cuando los mantenedores actualizan los paquetes, las confirmaciones a menudo se comentan de manera útil. Los usuarios pueden comprobarlo rápidamente desde la línea de órdenes instalando pacologAUR. Esta utilidad enumera mensajes de confirmación recientes para paquetes de los repositorios oficiales o en AUR, mediante el uso de pacolog <package>.\n\n"
    },
    {
      "title": "Instalación y recuperación",
      "level": 2,
      "content": "Formas alternativas de obtener y restaurar paquetes.\n\n"
    },
    {
      "title": "Instalar paquetes desde un CD/DVD o dispositivo USB",
      "level": 3,
      "content": "Para descargar paquetes o grupos de paquetes:\n\n```\n# cd ~/Packages\n# pacman -Syw base base-devel grub-bios xorg gimp --cachedir .\n# repo-add ./custom.db.tar.gz ./*\n```\n\nA continuación puede grabar la carpeta «Packages» en un CD/DVD o transferir a un dispositivo USB, disco duro externo, etc.\n\nPara instalar:\n\n1. Monte los medios:\n\n```\n# mkdir /mnt/repo\n# mount /dev/sr0 /mnt/repo    #Para un disco CD/DVD.\n# mount /dev/sdxY /mnt/repo   #Para una memoria USB.\n```\n\n2. Edite pacman.conf y agrege este repositorio por encima de los demás (es decir, extra, core, etc.). Esto es importante. No se limite a descomentar el que está en la parte inferior. De esta manera se asegura que los archivos del CD/DVD/USB tengan prioridad sobre los de los repositorios estándar.:\n\n```\n/etc/pacman.conf\n```\n\n```\n[custom]\nSigLevel = PackageRequired\nServer = file:///mnt/repo/Packages\n```\n\n3. Finalmente, sincronice la base de datos de pacman para poder usar el nuevo repositorio:\n\n```\n# pacman -Syu\n```\n\n"
    },
    {
      "title": "Repositorio local personalizado",
      "level": 3,
      "content": "Utilice el script repo-add incluido con pacman para generar una base de datos para un repositorio personal. Utilize repo-add --help para conocer más detalles sobre su uso.\n\nUna base de datos de paquetes es un archivo tar, opcionalmente comprimido. Las extensiones válidas son .db o .files seguidas de una extensión de archivo como .tar , .tar.gz , .tar.bz2 , . tar.xz , .tar.zst o .tar.Z . No es necesario que el archivo exista, pero sí todos los directorios principales.\n\nPara agregar un nuevo paquete a la base de datos o para reemplazar la versión anterior de un paquete existente en la base de datos, ejecute:\n\n```\n$ repo-add /path/to/repo.db.tar.gz /path/to/package-1.0-1-x86_64.pkg.tar.xz\n```\n\nLa base de datos y los paquetes no necesitan estar en el mismo directorio cuando se utiliza repo-add, pero tenga en cuenta que cuando se usa pacman con esa base de datos, deben estar juntos. Almacenar todos los paquetes construidos para ser incluidos en el repositorio en un directorio también permite usar la expansión shell glob para añadir o actualizar múltiples paquetes a la vez:\n\n```\n$ repo-add /path/to/repo.db.tar.gz /path/to/*.pkg.tar.xz\n```\n\nSi está buscando soportar múltiples arquitecturas, entonces se deben tomar precauciones para evitar que ocurran errores. Cada arquitectura debe tener su propio árbol de directorios:\n\n```\n$ tree ~/customrepo/ | sed \"s/$(uname -m)/<arch>/g\"\n```\n\n```\n/home/archie/customrepo/\n└── <arch>\n    ├── customrepo.db -> customrepo.db.tar.xz\n    ├── customrepo.db.tar.xz\n    ├── customrepo.files -> customrepo.files.tar.xz\n    ├── customrepo.files.tar.xz\n    └── personal-website-git-b99cce0-1-<arch>.pkg.tar.xz\n\n1 directory, 5 files\n```\n\nEl ejecutable repo-add verifica si el paquete es apropiado. Si este no es el caso, se encontrará con mensajes de error similares a este:\n\n```\n==> ERROR: '/home/archie/customrepo/<arch>/foo-<arch>.pkg.tar.xz' does not have a valid database archive extension.\n```\n\nrepo-remove se usa para eliminar paquetes de la base de datos, excepto si el nombre del paquete se especifica con la siguiente orden.\n\n```\n$ repo-remove /path/to/repo.db.tar.gz pkgname\n```\n\nUna vez que se haya creado la base de datos del repositorio local, agregue el repositorio a pacman.conf para cada sistema que usará el repositorio. Un ejemplo de repositorio personalizado está en pacman.conf. El nombre del repositorio es el nombre de archivo de la base de datos con la extensión de archivo omitida. En el caso del ejemplo anterior, el nombre del repositorio sería simplemente repo. Haga referencia a la ubicación del repositorio utilizando un file:// url, o por FTP usando ftp://localhost/path/to/directory.\n\nSi lo desea, añada el repositorio personalizado al directorio de la lista de repositorios no oficiales de usuario, para que la comunidad pueda beneficiarse de ello.\n\n"
    },
    {
      "title": "Caché de pacman compartida en red",
      "level": 3,
      "content": "Si ejecuta varios sistemas de Arch en su LAN, puede compartir paquetes para que pueda disminuir considerablemente los tiempos de descarga. Tenga en cuenta que no debe compartir entre diferentes arquitecturas (es decir, i686 y x86_64) o se encontrará con problemas.\n\n"
    },
    {
      "title": "Caché de solo lectura",
      "level": 4,
      "content": "Si está buscando una solución rápida, puede simplemente ejecutar un servidor web independiente que otros ordenadores pueden utilizar como primer servidor de réplica:\n\n```\n# ln -s /var/lib/pacman/sync/*.db /var/cache/pacman/pkg\n$ sudo -u http darkhttpd /var/cache/pacman/pkg --no-server-id\n```\n\nTambién podría ejecutar darkhttpd como un servicio systemd para su comodidad. Basta agregar este servidor en la parte superior del archivo /etc/pacman.d/mirrorlist en equipos clientes con Server = http://mymirror:8080. Asegúrese de mantener su servidor de réplica actualizado.\n\nSi ya está ejecutando un servidor web para algún otro propósito, es posible que desee reutilizarlo como su servidor de repositorio local en lugar de darkhttpd. Por ejemplo, digamos que ya tiene un servidor en un sitio con nginx, puede agregar una sección para que otro servidor de nginx escuche en el puerto 8080:\n\n```\n/etc/nginx/nginx.conf\n```\n\n```\nserver {\n    listen 8080;\n    root /var/cache/pacman/pkg;\n    server_name myarchrepo.localdomain;\n    try_files $uri $uri/;\n}\n```\n\nRecuerde reiniciar nginx después de hacer este cambio.\n\nSea cual sea el servidor web que utilice, recuerde abrir el puerto 8080 para el tráfico local (y probablemente desee negar todo lo que no sea local), así que agregue una regla como la siguiente a iptables (Español):\n\n```\n/etc/iptables/iptables.rules\n```\n\n```\n-A TCP -s 192.168.0.0/16 -p tcp -m tcp --dport 8080 -j ACCEPT\n```\n\nRecuerde reiniciar iptables después de hacer este cambio.\n\n"
    },
    {
      "title": "Caché de solo lectura distribuido",
      "level": 4,
      "content": "Existen herramientas específicas de Arch para descubrir automáticamente otros equipos de la red que ofrecen una caché de paquetes. Intente pacserve, pkgdistcacheAUR, o paclanAUR. pkgdistcache utilize Avahi en lugar de UDP el cual puede funcionar mejor en ciertas redes domésticas que enrutan en lugar de tender un puente entre WiFi y Ethernet .\n\nHistóricamente, teníamos PkgD y multipkg, pero ya no se mantienen.\n\n"
    },
    {
      "title": "Caché de lectura y escritura",
      "level": 4,
      "content": "Para compartir paquetes entre varios equipos, simplemente comparta /var/cache/pacman/ utilizando cualquier protocolo de montaje basado en red. Esta sección muestra cómo usar SSHFS (Español) para compartir una caché de paquetes más los directorios de biblioteca relacionados entre múltiples ordenadores de la misma red local. Tenga en cuenta que una caché compartida en red puede ser lenta dependiendo de la elección del sistema de archivos, entre otros factores.\n\nPrimero, instale cualquier paquete de sistema de ficheros que soporte la red: sshfs, curlftpfs, samba o nfs-utils.\n\n- Para usar sshfs, considere leer Using SSH Keys (Español).\n- Por defecto, smbfs no sirve nombres de archivo que contengan dos puntos, lo que hace que el cliente descargue de nuevo el paquete otra vez. Para evitarlo, utilice la opción de montaje mapchars en el cliente.\n\nLuego, para compartir los paquetes actuales, monte /var/cache/pacman/pkg del servidor a /var/cache/pacman/pkg en cada máquina cliente.\n\n"
    },
    {
      "title": "De doble sentido con rsync",
      "level": 4,
      "content": "Otro enfoque en un entorno local es rsync (Español). Elija un servidor para el almacenamiento caché y active el demonio Rsync (Español)#Demonio rsync. En los clientes, sincronice bidireccionalmente con este recurso compartido mediante el protocolo rsync. Los nombres de archivo que contienen dos puntos no son un problema para el protocolo rsync.\n\nEjemplo para un cliente, utilizando uname -m dentro del nombre compartido asegura una arquitectura dependiente sync:\n\n```\n# rsync rsync://server/share_$(uname -m)/ /var/cache/pacman/pkg/ ...\n # pacman ...\n # paccache ...\n # rsync /var/cache/pacman/pkg/ rsync://server/share_$(uname -m)/  ...\n```\n\n"
    },
    {
      "title": "Caché dinámico de proxy inverso usando nginx",
      "level": 4,
      "content": "nginx se puede usar para enviar solicitudes de paquetes proxy a servidores de réplicas ascendentes oficiales y almacenar los resultados en el disco local. Todas las solicitudes posteriores para ese paquete serán atendidas directamente desde la memoria caché local, minimizando la cantidad de tráfico de Internet necesaria para actualizar una gran cantidad de ordenadores.\n\nEn este ejemplo, el servidor de caché se ejecutará en http://cache.domain.example:8080/ y almacenará los paquetes enn /srv/http/pacman-cache/.\n\nInstale nginx en el ordenador que vaya a alojar la caché. Cree el directorio para el caché y ajuste los permisos para que nginx pueda escribir archivos en él:\n\n```\n# mkdir /srv/http/pacman-cache\n# chown http:http /srv/http/pacman-cache\n```\n\nUtilice la nginx pacman cache config como punto de partida para /etc/nginx/nginx.conf. Compruebe que la directiva resolver funciona para sus necesidades. En los bloques del servidor ascendente, configure las directivas proxy_pass con las direcciones de los espejos oficiales, vea ejemplos en el archivo de configuración sobre el formato esperado. Una vez que esté satisfecho con el archivo de configuración inicie y active nginx.\n\nPara usar la caché, cada ordenador Arch Linux (incluida la que aloja el caché) debe tener la siguiente línea en la parte superior del archivo mirrorlist file:\n\n```\n/etc/pacman.d/mirrorlist\n```\n\n```\nServer = http://cache.domain.local:8080/$repo/os/$arch\n...\n```\n\n"
    },
    {
      "title": "Actualizar la memoria caché de pacman utilizando programas de sincronización",
      "level": 4,
      "content": "Utilice Syncthing o Resilio Sync para sincronizar las carpetas de la caché de «pacman» (esto es, /var/cache/pacman/pkg).\n\n"
    },
    {
      "title": "Prevenir la limpieza no deseada de la memoria caché",
      "level": 4,
      "content": "Por defecto, pacman -Sc elimina los paquetes tarballs de la memoria caché que corresponden a paquetes que no están instalados en el equipo en el que se emitió la orden. Dado que pacman no puede predecir qué paquetes están instalados en todos los equipos que comparten la memoria caché, acabará eliminando archivos que no debería.\n\nPara limpiar la memoria de caché de forma que solo se eliminen los tarballs obsoletos, añada esta entrada en el archivo [options] en la sección de /etc/pacman.conf:\n\n```\nCleanMethod = KeepCurrent\n```\n\n"
    },
    {
      "title": "Reconstituir un paquete del sistema de archivos",
      "level": 3,
      "content": "Para reconstituir un paquete desde el sistema de archivos, utilice fakepkgAUR. Los archivos del sistema se toman tal como están, por lo tanto, cualquier modificación estará presente en el paquete ensamblado. Por lo tanto, se desaconseja la distribución del paquete reconstituido; vea ABS (Español) y Arch Linux Archive (Español) para las alternativas.\n\n"
    },
    {
      "title": "Listar paquetes instalados",
      "level": 3,
      "content": "Mantener una lista de paquetes instalados explícitamente puede ser útil para acelerar la instalación en un nuevo sistema:\n\n```\n$ pacman -Qqe > pkglist.txt\n```\n\n- Con la opción -t, no se mencionan los paquetes ya requeridos por otros paquetes instalados explícitamente. Si se vuelve a instalar desde esta lista, se instalarán pero solo como dependencias.\n- Con la opción -n, los paquetes foráneos (por ejemplo, los de AUR (Español)) se omitirán de la lista.\n- Utilice comm -13 <(pacman -Qqdt | sort) < (pacman -Qqdtt | sort) > optdeplist.txt también para crear una lista de las dependencias opcionales instaladas que se pueden reinstalar con --asdeps.\n- Utilice pacman -Qqem > foreignpkglist.txt para crear la lista de paquetes de AUR y otros paquetes foráneos que se hayan instalado explícitamente.\n\nPara mantener una lista actualizada de paquetes instalados explícitamente (por ejemplo, en combinación con una versión de /etc/), puede configurar un hook. Ejemplo:\n\n```\n[Trigger]\nOperation = Install\nOperation = Remove\nType = Package\nTarget = *\n\n[Action]\nWhen = PostTransaction\nExec = /bin/sh -c '/usr/bin/pacman -Qqe > /etc/pkglist.txt'\n```\n\n"
    },
    {
      "title": "Instalar paquetes de una lista",
      "level": 3,
      "content": "Para instalar paquetes desde una lista de paquetes previamente guardada, al tiempo que no se reinstalan los paquetes que ya estén actualizados, ejecute:\n\n```\n# pacman -S --needed - < pkglist.txt\n```\n\nSin embargo, es probable que en la lista se encuentren paquetes foráneos como los procedentes de AUR o los instalados localmente. Para filtrar de la lista los paquetes externos, la línea de órdenes anterior se puede enriquecer de la siguiente manera:\n\n```\n# pacman -S --needed $(comm -12 <(pacman -Slq | sort) <(sort pkglist.txt))\n```\n\nFinalmente, para asegurarse de que los paquetes instalados del sistema coincidan con la lista y se eliminen todos los paquetes que no se mencionan en ella:\n\n```\n# pacman -Rsu $(comm -23 <(pacman -Qq | sort) <(sort pkglist.txt))\n```\n\n"
    },
    {
      "title": "Listar todos los archivos modificados de los paquetes",
      "level": 3,
      "content": "Si sospecha que hay corrupción de archivos (por ejemplo, por fallos de software o hardware), pero no está seguro de si los archivos se corrompieron, es posible que desee compararlos con las sumas de hash de los paquetes. Esto se puede hacer con pacutils:\n\n```\n# paccheck --md5sum --quiet\n```\n\nPara la recuperación de la base de datos, véase #Restaurar la base de datos local de pacman. Los archivos mtree también pueden ser extraído como .MTREE de los respectivos archivos del paquete.\n\nNote: **no** \n\n"
    },
    {
      "title": "Reinstalar todos los paquetes",
      "level": 3,
      "content": "Para reinstalar todos los paquetes originales, utilice:\n\n```\n# pacman -Qqn | pacman -S -\n```\n\nLos paquetes externos (AUR) deben reinstalarse por separado; puede listarlos con pacman -Qmq.\n\nPacman conserva el motivo de la instalación por defecto.\n\n"
    },
    {
      "title": "Restaurar la base de datos local de pacman",
      "level": 3,
      "content": "Véase Pacman (Español)/Restore local database (Español).\n\n"
    },
    {
      "title": "Recuperar una memoria USB desde la instalación existente",
      "level": 3,
      "content": "Si tiene Arch instalado en una memoria USB y se las arregla para estropearla ( por ejemplo, quitándola mientras todavía está siendo escrita), entonces es posible reinstalar todos los paquetes y esperar que vuelva a funcionar (suponiendo que la memoria USB está montada en /newarch)\n\n```\n# pacman -S $(pacman -Qq --dbpath /newarch/var/lib/pacman) --root /newarch --dbpath /newarch/var/lib/pacman\n```\n\n"
    },
    {
      "title": "Visualizar un único archivo dentro de un archivo .pkg",
      "level": 3,
      "content": "Por ejemplo, si desea ver el contenido de /etc/systemd/logind.conf suministrado dentro del paquete systemd:\n\n```\n$ tar -xOf /var/cache/pacman/pkg/systemd-204-3-x86_64.pkg.tar.xz etc/systemd/logind.conf\n```\n\nO puede usar vim para explorar el archivo:\n\n```\n$ vim /var/cache/pacman/pkg/systemd-204-3-x86_64.pkg.tar.xz\n```\n\n"
    },
    {
      "title": "Localizar aplicaciones que usan bibliotecas de paquetes más antiguos",
      "level": 3,
      "content": "Incluso después de haber instalado un paquete, los programas existentes que se ejecutan desde hace mucho tiempo (como los demonios y los servidores) siguen utilizando código de antiguas bibliotecas.Y es una mala idea dejar que estos programas se ejecuten si la biblioteca anterior contiene un error de seguridad.\n\nEsta es una manera de encontrar todos los programas que usan código de paquetes antiguos:\n\n```\n# lsof +c 0 | grep -w DEL | awk '1 { print $1 \": \" $NF }' | sort -u\n```\n\nImprimirá el nombre del programa en ejecución y la biblioteca antigua que se eliminó o reemplazó con contenido más reciente.\n\n"
    },
    {
      "title": "Instalar solo contenido en los idiomas requeridos",
      "level": 3,
      "content": "Muchos paquetes intentan instalar documentación y traducciones en varios idiomas. Algunos programas están diseñados para eliminar dichos archivos innecesarios, como localepurgeAUR, que se ejecuta después de instalar un paquete para eliminar los archivos locales innecesarios. Un enfoque más directo se proporcina a través de la directiva NoExtract en pacman.conf, que evita que estos archivos se instalen. El siguiente ejemplo instala archivos en inglés (US) o ninguno:\n\nEl siguiente ejemplo instala archivos en inglés (US) o ninguno:\n\n```\n/etc/pacman.conf\n```\n\n```\nNoExtract = usr/share/help/* !usr/share/help/en*\nNoExtract = usr/share/gtk-doc/html/*\nNoExtract = usr/share/locale/* usr/share/X11/locale/* usr/share/i18n/* opt/google/chrome/locales/* !usr/share/X11/locale/C/*\nNoExtract = !*locale*/en*/* !usr/share/i18n/charmaps/UTF-8.gz !usr/share/*locale*/locale.*\nNoExtract = !usr/share/*locales/en_?? !usr/share/*locales/i18n !usr/share/*locales/iso*\nNoExtract = !usr/share/*locales/trans*\nNoExtract = usr/share/qt4/translations/*\nNoExtract = usr/share/man/* !usr/share/man/man*\nNoExtract = usr/share/vim/vim*/lang/*\nNoExtract = usr/lib/libreoffice/help/en-US/*\n```\n\n"
    },
    {
      "title": "Acelerar las descargas",
      "level": 3,
      "content": "Al descargar paquetes pacman usa los servidores de réplicas en el orden en que están en /etc/pacman.d/mirrorlist. Sin embargo, los servidores de réplicas que está en la parte superior de la lista, pueden no ser los más rápido para usted. Para seleccionar los servidores de réplicas más rápidos, consulte Mirrors (Español).\n\nLa velocidad de pacman en la descarga de paquetes también puede ser mejorada mediante el uso de una aplicación diferente para descargar paquetes, en lugar del descargador de archivos integrado de pacman.\n\nEn todos los casos, asegúrese de tener la última pacman antes de hacer cualquier modificación.\n\n```\n# pacman -Syu\n```\n\n"
    },
    {
      "title": "Powerpill",
      "level": 4,
      "content": "Powerpill (Español) es un wrapper de pacman que utiliza la descarga paralela y segmentada para tratar de acelerar las descargas de pacman.\n\n"
    },
    {
      "title": "wget",
      "level": 4,
      "content": "Esto también es muy útil si necesita configuraciones proxy más potentes que las capacidades incorporadas de pacman.\n\nPara usar wget, primero instale el paquete wget y luego modifique /etc/pacman.conf descomentando la siguiente línea en la sección [options] :\n\n```\nXferCommand = /usr/bin/wget --passive-ftp -c -O %o %u\n```\n\nEn lugar de descomentar los parámetros de wget en /etc/pacman.conf, también puede modificar el archivo de configuración de wget directamente, el archivo de todo el sistema es /etc/wgetrc, o $HOME/.wgetrc para el usuario.\n\n"
    },
    {
      "title": "aria2",
      "level": 4,
      "content": "aria2 es una utilidad de descarga ligera con soporte para HTTP/HTTPS y transferencias directas continuas y segmentadas. aria2 permite múltiples y simultáneas conexiones HTTP/HTTPS y FTP a un servidor de réplica de Arch, lo que debería dar como resultado un aumento en las velocidades de descarga para la obtención de archivos y paquetes.\n\nNote: **no** \n\nInstale aria2 y luego edite /etc/pacman.conf agregando la siguiente línea a la sección [options]:\n\n```\nXferCommand = /usr/bin/aria2c --allow-overwrite=true --continue=true --file-allocation=none --log-level=error --max-tries=2 --max-connection-per-server=2 --max-file-not-found=5 --min-split-size=5M --no-conf --remote-time=true --summary-interval=60 --timeout=5 --dir=/ --out %o %u\n```\n\nVea OPTIONS en aria2c(1) para usar las configuraciones de aria2.\n\n- -d, --dir: el directorio para almacenar los archivo(s) descargado según lo especificado por pacman .\n- -o, --out: el nombre(s) del archivo(s) de salida descargado(s).\n- %o: la variable que representa el nombre(s) del archivo(s) local especificado por pacman.\n- %u: la variable que representa la URL de descarga especificada por pacman.\n\n"
    },
    {
      "title": "Otras aplicaciones",
      "level": 4,
      "content": "Hay otras aplicaciones de descarga que puede usar con pacman . Aquí están, y su configuración asociada de XferCommand:\n\n- snarf: XferCommand = /usr/bin/snarf -N %u\n- lftp: XferCommand = /usr/bin/lftp -c pget %u\n- axel: XferCommand = /usr/bin/axel -n 2 -v -a -o %o %u\n- hget: XferCommand = /usr/bin/hget %u -n 2 -skip-tls false\n\n(lea la documentación en la página del proyecto de Github para mas información)\n\n"
    },
    {
      "title": "Utilidades",
      "level": 2,
      "content": "- Lostfiles — Script que identifica archivos que no son propiedad de ningún paquete.\n\n- Pacmatic — Wrapper de pacman para comprobar noticias de Arch antes de la actualización, evitar actualizaciones parciales y advertir sobre cambios en el archivo de configuración.\n\n- pacutils — Biblioteca de ayuda para programas basados en libalpm.\n\n- pkgfile — Herramienta para buscar archivos en paquetes.\n\n- pkgtools — Colección de scripts para los paquetes de Arch Linux.\n\n- pkgtop — Gestor de paquetes interactivo y monitor de recursos diseñado para GNU/Linux.\n\n- Powerpill — Utiliza descargas paralelas y segmentadas a través de aria2 y Reflector para intentar acelerar las descargas de pacman.\n\n- repoctl — Herramienta para ayudar a gestionar repositorios locales.\n\n- repose — Una herramienta de construcción de repositorios Arch Linux.\n\n- snap-pac — Hace que pacman utilice automáticamente snapper para crear instantáneas previas y posteriores como YaST de openSUSE.\n\n- vrms-arch — Un Richard M. Stallman virtual para decirle qué paquetes no libres tiene instalados.\n\n"
    },
    {
      "title": "Front-ends gráficos",
      "level": 3,
      "content": "- Apper — Gestor de paquetes y aplicación Qt 5 que utiliza PackageKit escrito en C++. Admite AppStream metadata.\n\n- Discover — Gestor de aplicaciones Qt 5 que utiliza PackageKit escrito en C++/QML. Admite AppStream metadata, Flatpak y firmware updates.\n\n- GNOME PackageKit — Gestor de paquetes GTK+ 3 que utiliza PackageKit escrito en C.\n\n- GNOME Software — Gestor de aplicaciones GTK+ 3 que utiliza PackageKit escrito en C. Admite AppStream metadata, Flatpak y firmware updates.\n\n- pcurses — Empaquetador TUI de curses para pacman escrito en C++.\n\n- tkPacman — Wrapper Tk para pacman escrito en Tcl.\n\n"
    }
  ]
}