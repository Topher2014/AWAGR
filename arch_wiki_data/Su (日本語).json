{
  "title": "Su (日本語)",
  "url": "https://wiki.archlinux.org/title/Su_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- ユーザーとグループ\n- sudo\n\nsu コマンド (substitute user) はシステム上の他のユーザーになりかわるために使われます、一般的にそのユーザーとは root です。su を使うことでユーザーを変えるためにログイン/ログアウトする手間を省くことができます。つまり、あなたのセッション内で一種の\"サブセッション\"を使って他のユーザーとしてログインし、その後あなたのセッションに戻ることになります。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 使用方法\n- 3 ヒントとテクニック 3.1 ログインシェル 3.2 su と wheel\n\n- 3.1 ログインシェル\n- 3.2 su と wheel\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "su は util-linux パッケージに入っています。あるいは、sudo-rsにsu-rsというメモリ安全なsuの実装あります。\n\n"
    },
    {
      "title": "使用方法",
      "level": 2,
      "content": "他のユーザーのログインとして、su になりたいユーザー名を入力します:\n\n```\n$ su username\n```\n\nデフォルトでは、通常のユーザーとして実行すると、なりたいユーザーのパスワードを求めるプロンプトが表示されます。root として su を実行する場合、パスワードは必要ありません。\n\nユーザー名が渡されない場合、su は root ユーザーを想定し、要求されるパスワードは root のパスワードになります。\n\n詳細については、su(1) を参照してください。\n\n"
    },
    {
      "title": "ログインシェル",
      "level": 3,
      "content": "su のデフォルトの動作は、(新しいユーザーの環境変数に切り替えるのではなく) 現在のディレクトリ内にとどまり、元のユーザーの環境変数を維持することです。\n\n次の重要な対照的な考慮事項に注意してください。\n\n- 管理者のシェルアカウントを使うよりも、標準的なユーザーのシェルアカウントを使う方が都合の良い場合があります。特に、ユーザーの問題を解決するとき、そのユーザーアカウントにログインして問題を再現・デバッグするのが一番効果的かもしれません。\n\n- しかし、多くの場合、一般ユーザーのシェルから root ユーザーが作業を行う（そのアカウントの環境変数を使う）ことは望ましくなく、また危険でもあります。不注意に一般ユーザーのシェルアカウントを使っていると、プログラムのインストールなどのシステム作業が root アカウントとは違う結果を生むことがあります。例えば、インストールされたプログラムが、偶然にも一般ユーザーにシステムにダメージを与える権限や、データへの許されざるアクセス権を与えてしまう可能性があるのです。\n\nよって、管理者ユーザーは（さらに他のユーザーも）、su を使う時（su を使うこともできるだけ避けましょう）はいつも su コマンドに -l/--login オプションを加えるべきです。オプションには2つの意味があります:\n\n1. そのユーザーにログインする際に現在のディレクトリから、新しいユーザーのホームディレクトリ（root ユーザーの場合、/root）に移動します\n1. 環境変数を ~/.bashrc によって指定された、新しいユーザーのものに変更します。つまり、su に -l/--login オプションをつけると、現在のディレクトリと環境変数が新しいユーザーが（現在のセッションではなく）新しいセッションにログインしたときと同じようになるということです。\n\nしたがって、管理者は通常、次のように su を使用する必要があります:\n\n```\n$ su -l\n```\n\nユーザーネームとして root を付け加えても同じ結果になります:\n\n```\n$ su -l root\n```\n\nまた、他のユーザーでも同じことができます (例: archie という名前のユーザー):\n\n```\n# su -l archie\n```\n\n~/.bashrc に次のようにエイリアスを追加してもいいでしょう:\n\n```\nalias su=\"su -l\"\n```\n\n"
    },
    {
      "title": "su と wheel",
      "level": 3,
      "content": "BSD の su はデフォルトで root を使うことができるのが \"wheel\" グループのユーザーだけになっています。これは GNU su のデフォルトとは違いますが、PAM を使うことで BSD と同じようにできます。/etc/pam.d/su と /etc/pam.d/su-l にある次の行をアンコメントしてください:\n\n```\nauth required pam_wheel.so use_uid\n```\n\n"
    }
  ]
}