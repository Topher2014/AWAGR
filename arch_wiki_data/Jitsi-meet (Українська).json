{
  "title": "Jitsi-meet (Українська)",
  "url": "https://wiki.archlinux.org/title/Jitsi-meet_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **Цю стаття чи розділ ще не перекладено. Дивіться також Команда перекладу ArchWiki українською.** Цю стаття чи розділ ще не перекладено. Дивіться також Команда перекладу ArchWiki українською.\n\nЦю стаття чи розділ ще не перекладено. Дивіться також Команда перекладу ArchWiki українською.\n\nJitsi - це набір проектів з відкритим вихідним кодом, який дозволяє легко створювати і розгортати безпечні рішення для відеоконференцій. В основі Jitsi знаходяться Jitsi Videobridge і Jitsi Meet, які дозволяють проводити конференції в Інтернеті, в той час як інші проекти спільноти надають інші функції, такі як аудіо, набір номера, запис і одночасна трансляція.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установіть jitsi-meet-binAUR, jitsi-videobridge-binAUR і jicofo-binAUR.\n\nТакож можна встановити jitsi-meet-gitAUR, jitsi-videobridgeAUR і jicofo-gitAUR.\n\n```\ntrust anchor /var/lib/prosody/auth.meet.example.com.crt\n```\n\n"
    },
    {
      "title": "Конфигурация для пакетов из git",
      "level": 3,
      "content": "Если имя вашего сервера example.com, то типичным выбором для вашего jitsi будет meet.example.com. Вам нужно будет обновить запись DNS вашего сервера с записью meet. Остальная часть предполагает, что вы это сделали.\n\nТакже у вас должны быть сертификаты SSL/TLS для вашего домена meet.example.com, например, см. certbot.\n\nОстальные инструкции в bash поясняют, что нужно заменить. Выполнение команд в оболочке bash с правами суперпользователя должны выполнить установку.\n\nЗамените доменное имя на свое собственное:\n\n```\nexport JITSIFQDN=meet.example.com\n```\n\nУкажите правильный путь к сгенерированным сертификатам:\n\n```\nexport JITSIFQDN_CRT=/etc/letsencrypt/live/meet.example.com/fullchain.pem\nexport JITSIFQDN_KEY=/etc/letsencrypt/live/meet.example.com/privkey.pem\n```\n\nПароли нужны. Мы настроили некоторые переменные оболочки, чтобы хранить их для дальнейшего использования. Если хотите Вы можете заменить $(mktemp XXXXXXX) собственными паролями, но сгенерированные значения mktemp, вполне должны подойти.\n\n```\nexport SECRET1=$(mktemp -u XXXXXXXX)\nexport SECRET2=$(mktemp -u XXXXXXXX)\nexport SECRET3=$(mktemp -u XXXXXXXX)\n```\n\n"
    },
    {
      "title": "Настроить prosody",
      "level": 4,
      "content": "prosody является обязательным условием, и вам нужно будет добавить в него конфигурацию для ваших служб Jitsi. Если у вас еще не настроен сервер prosody, установите prosody и lua52-sec прямо сейчас. Остальная часть конфигурации prosody предполагает, что у вас установлен prosody локально.\n\nСначала убедитесь, что есть подкаталог для хранения пользовательских конфигураций и что просодия загружает его:\n\n```\nmkdir -p /etc/prosody/conf.d\ncat >> /etc/prosody/prosody.cfg.lua <<===\n  Include \"conf.d/*.cfg.lua\"\n===\n```\n\nСоздайте конфигурационный файл prosody для вашего домена:\n\n```\ncat > /etc/prosody/conf.d/$JITSIFQDN.cfg.lua <<===\nVirtualHost \"${JITSIFQDN}\"\n    authentication = \"anonymous\"\n    ssl = {\n        key = \"/var/lib/prosody/${JITSIFQDN}.key\";\n        certificate = \"/var/lib/prosody/${JITSIFQDN}.crt\";\n    }\n    modules_enabled = {\n        \"bosh\";\n        \"pubsub\";\n    }\n    c2s_require_encryption = false\n\nVirtualHost \"auth.${JITSIFQDN}\"\n    ssl = {\n        key = \"/var/lib/prosody/auth.${JITSIFQDN}.key\";\n        certificate = \"/var/lib/prosody/auth.${JITSIFQDN}.crt\";\n    }\n    authentication = \"internal_plain\"\n    admins = { \"focus@auth.${JITSIFQDN}\" }\n\nComponent \"conference.${JITSIFQDN}\" \"muc\"\n\nComponent \"jitsi-videobridge.${JITSIFQDN}\"\n    component_secret = \"${SECRET1}\"\n\nComponent \"focus.${JITSIFQDN}\"\n    component_secret = \"${SECRET2}\"\n===\n```\n\nСоздайте сертификаты, которые нужны prosody. Это интерактивно:\n\n```\nprosodyctl cert generate $JITSIFQDN\n```\n\n```\nprosodyctl cert generate auth.$JITSIFQDN\n```\n\nЗарегистрировать пользователя focus:\n\n```\nprosodyctl register focus auth.$JITSIFQDN $SECRET3\n```\n\nДоверительный сертификат:\n\n```\ntrust anchor /var/lib/prosody/auth.$JITSIFQDN.crt\n```\n\nЗатем restart службы prosody (или start / enable prosody, если она только что была установлена).\n\n"
    },
    {
      "title": "Настроить jitsi-videobridge",
      "level": 4,
      "content": "Конфигурация для jitsi-videobridge\n\n```\ncat > /etc/jitsi-videobridge/jitsi-videobridge.conf <<===\nflags=\"--host=localhost --domain=${JITSIFQDN} --port=5347 --secret=${SECRET1}\"\n===\n```\n\nЕсли вы хотите, чтобы настройки логирования и sip-коммуникатора находились в одной папке, вы можете сделать следующее\n\n```\ncat >> /etc/jitsi-videobridge/jitsi-videobridge.conf <<===\nVIDEOBRIDGE_DEBUG_OPTIONS=\"-Djava.util.logging.config.file=/etc/jitsi-videobridge/logging.properties -Dnet.java.sip.communicator.SC_HOME_DIR_NAME=jitsi-videobridge -Dnet.java.sip.communicator.SC_HOME_DIR_LOCATION=/etc \n===\n```\n\n```\ncp /opt/jitsi-videobridge/lib/logging.properties /etc/jitsi-videobridge/logging.properties\n\ncat > /etc/jitsi-videobridge/sip-communicator.properties <<===\norg.jitsi.videobridge.AUTHORIZED_SOURCE_REGEXP=focus@auth.${JITSIFQDN}/.*\norg.jitsi.impl.neomedia.transform.srtp.SRTPCryptoContext.checkReplay=false\norg.jitsi.videobridge.TCP_HARVESTER_PORT=4443\n===\n```\n\nЗатем start/enable службу jitsi-videobridge.\n\n"
    },
    {
      "title": "Настроить jicofo",
      "level": 4,
      "content": "```\ncat > /etc/jicofo/jicofo.conf <<===\nflags=\"--host=localhost --domain=${JITSIFQDN} --secret=${SECRET2} --user_domain=auth.${JITSIFQDN} --user_name=focus --user_password=${SECRET3}\"\n===\n```\n\nЗатем start / enable службу jicofo.\n\n"
    },
    {
      "title": "Настроить jitsi-meet",
      "level": 4,
      "content": "```\ncp /opt/jitsi-meet/config.js /opt/jitsi-meet/config.js.orig\ncat > /opt/jitsi-meet/config.js <<===\nvar domainroot = \"${JITSIFQDN}\" \nvar config = { \n       hosts: { \n               domain: domainroot, \n               muc: 'conference.'+domainroot, \n               bridge: 'jitsi-videobridge.'+domainroot,\n               focus: 'focus.'+domainroot\n       },\n       useNicks: false,\n       bosh: '//'+domainroot+'/http-bind',\n}\n===\n```\n\n"
    },
    {
      "title": "Настроить nginx",
      "level": 4,
      "content": "Вот минимальная рекомендуемая конфигурация nginx HTTPS из https://ssl-config.mozilla.org/#server=nginx&version=1.16.1&config=intermediate&openssl=1.1.1f&guideline=5.4 и минимальная конфигурация рекомендуемая в документации Jitsi-Meet. Хотя эта конфигурация будет работать нормально, вы возможно захотите адаптировать ее к своему собственному серверу.\n\nJitsi-meet#Configure nginx\n\n"
    },
    {
      "title": "Запуск за NAT",
      "level": 3,
      "content": "Следующие порты должны быть перенаправлены на ваш сервер:\n\nHTTPS:\n\n- TCP/443\n\nJitsi Videobridge:\n\n- TCP/4443\n- UDP/10000\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Notes by C0rn3j\n- Configurations used in the article\n\n"
    }
  ]
}