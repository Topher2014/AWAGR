{
  "title": "Thunar (日本語)",
  "url": "https://wiki.archlinux.org/title/Thunar_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- Xfce\n- ファイルマネージャの機能\n- GNOME Files\n- PCManFM\n- Nemo\n\nプロジェクトの ホームページ より:\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 プラグインとアドオン\n- 2 設定\n- 3 Thunar Volume Manager 3.1 設定\n- 4 カスタムアクション 4.1 ターミナルで開く 4.2 ファイルとフォルダの検索 4.3 ウイルスのスキャン 4.4 Dropbox にリンク\n- 5 ヒントとテクニック 5.1 Thunar を使ってリモートの場所をブラウズする 5.2 デーモンモードで起動する 5.3 起動が遅いという問題を解決する 5.4 サイドペインのショートカットを隠す 5.5 Thunar のキーボードショートカットを割り当てる 5.6 fstab に定義されたパーティションを表示する\n- 6 トラブルシューティング 6.1 大容量の外付けドライブの自動マウント 6.2 Tumblerd がハングアップして cpu を異常に消費する 6.3 ゴミ箱やネットワークアイコンが表示されたりされなかったりする 6.4 ファイルシステムがマウントできない 6.5 新しいウィンドウやタブが開くのが遅すぎる\n- 7 参照\n\n- 1.1 プラグインとアドオン\n\n- 3.1 設定\n\n- 4.1 ターミナルで開く\n- 4.2 ファイルとフォルダの検索\n- 4.3 ウイルスのスキャン\n- 4.4 Dropbox にリンク\n\n- 5.1 Thunar を使ってリモートの場所をブラウズする\n- 5.2 デーモンモードで起動する\n- 5.3 起動が遅いという問題を解決する\n- 5.4 サイドペインのショートカットを隠す\n- 5.5 Thunar のキーボードショートカットを割り当てる\n- 5.6 fstab に定義されたパーティションを表示する\n\n- 6.1 大容量の外付けドライブの自動マウント\n- 6.2 Tumblerd がハングアップして cpu を異常に消費する\n- 6.3 ゴミ箱やネットワークアイコンが表示されたりされなかったりする\n- 6.4 ファイルシステムがマウントできない\n- 6.5 新しいウィンドウやタブが開くのが遅すぎる\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "thunar パッケージをインストールしてください。このパッケージは xfce4 グループに含まれているため、Xfce を使っている場合、すでに Thunar はインストールされていると思われます。\n\n"
    },
    {
      "title": "プラグインとアドオン",
      "level": 3,
      "content": "- Gnome Virtual File System — ゴミ箱の追加やリムーバブルメディアやリモートファイルシステム (mtp/smb) のマウントなど。詳しくはファイルマネージャの機能#マウントを見てください。\n\n- Thunar Archive Plugin — コンテキストメニューアイテムを使って圧縮ファイルを作成したり解凍できるプラグイン。圧縮ファイルを直接作成・解凍するのではなく File Roller (file-roller), Ark (ark), Xarchiver (xarchiver) など他のプログラムのフロントエンドとして動作します。xfce4-goodies に含まれています。\n\n- Thunar Media Tags Plugin — メディアファイルに関する情報を表示するプラグイン。一括リネームやメディアタグの編集をすることもできます。ID3 (MP3 ファイルフォーマットのシステム) と Ogg/Vorbis タグをサポートしています。xfce4-goodies に含まれています。\n\n- Thunar Shares Plugin — root 権限を必要とすることなく Thunar から Samba を使ってフォルダを素早く共有することができるプラグイン。設定方法も参照してください。\n\n- Thunar Volume Manager — Thunar でリムーバブルデバイスの自動管理。xfce4 に含まれています。\n\n- Tumbler — サムネイルを生成する外部プログラム。ffmpegthumbnailer もインストールすることで動画のサムネイルが有効になります。\n\n- libgsf — GNOME Structured File Library は構造化されたファイルフォーマットを読み書きするためのユーティリティライブラリです。odf サムネイルのサポートが必要な場合にインストールしてください。\n\n- RAW Thumbnailer — raw サムネイルを表示するのに必要な軽量で高速な raw 画像サムネイラー。\n\n- Extra thumbnailers — Tumbler 用にカスタマイズされたサムネイル。\n\n- Folder thumbnailer — Tumbler を介したカスタムフォルダーのサムネイルのサポート。\n\n- STL thumbnailer — Tumbler の STL サムネイルの生成のサポート。\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "キーバインドを設定するには、ファイル ~/.config/Thunar/accels.scm を編集します。Thunar の隠し変数を設定するには、xfconf-query -c thunar -l -v を使用します。\n\n"
    },
    {
      "title": "Thunar Volume Manager",
      "level": 2,
      "content": "gvfs と thunar-volman の両方がインストールされている場合、メディアの接続時にコマンドを自動的に実行するように Thunar を設定できます。通常 MTP に従うモバイルデバイスの場合は、追加の gvfs-mtp パッケージが必要です。\n\n"
    },
    {
      "title": "設定",
      "level": 3,
      "content": "カメラやオーディオプレイヤーが接続された時に特定のアクションを実行するように設定することができます。 プラグインをインストールした後:\n\n1. Thunar を起動して 編集 > 設定\n1. '詳細' タブ下、'ボリューム管理を有効にする' のチェックを入れる\n1. configure をクリックして以下のアイテムにチェックを入れる: リムーバブルドライブがホットプラグされたらマウントする リムーバブルメディアが挿入されたらマウントする\n1. そして必要な変更を行なって下さい (下の例を参照)\n\n- リムーバブルドライブがホットプラグされたらマウントする\n- リムーバブルメディアが挿入されたらマウントする\n\nAmarok でオーディオ CD を再生させるよう設定する例:\n\n```\nマルチメディア - オーディオ CD: amarok --cdplay %d\n```\n\n"
    },
    {
      "title": "カスタムアクション",
      "level": 2,
      "content": "このセクションでは 編集 -> カスタムアクションの設定 からアクセスできる便利なカスタムアクションを説明しています (~/.config/Thunar/uca.xml に保存されます)。他にも thunar wiki にはサンプルが載っています。さらに、この ブログ記事にはカスタムアクションの広範囲なコレクションがされています。\n\n"
    },
    {
      "title": "ターミナルで開く",
      "level": 3,
      "content": "インストールに関する唯一のアクションは次のとおりです。exo にどの端末を使用するかを指示します。\n\n```\n~/.config/xfce4/helpers.rc\n```\n\n```\nTerminalEmulator=terminal\n```\n\nTable content:\n名前 | コマンド | ファイルのパターン | 登場する条件\nターミナルで開く | exo-open --working-directory %f --launch TerminalEmulator | * | フォルダー\n\n"
    },
    {
      "title": "ファイルとフォルダの検索",
      "level": 3,
      "content": "このアクションを使うには catfish がインストールされていなければなりません。mlocate もインストールしたほうが良いでしょう。\n\nTable content:\n名前 | コマンド | ファイルのパターン | 登場する条件\n検索 | catfish --path=%f | * | フォルダー\n\n"
    },
    {
      "title": "ウイルスのスキャン",
      "level": 3,
      "content": "このアクションを使うには clamav と clamtk がインストールされていなければなりません。\n\nTable content:\n名前 | コマンド | ファイルのパターン | 登場する条件\nウイルススキャン | clamtk %F | * | 全て選択\n\n"
    },
    {
      "title": "Dropbox にリンク",
      "level": 3,
      "content": "Table content:\n名前 | コマンド | ファイルのパターン | 登場する条件\nDropbox にリンク | ln -s %f /path/to/DropboxFolder | * | フォルダー, その他のファイル\n\n特定の場所にあるファイルやフォルダにシンボリックリンクするカスタムアクションを多数使用する場合、メニューが長くなりすぎないようにコンテキストメニューの Send To フォルダにアクションを置くと便利です。実行するアクションごとに ~/.local/share/Thunar/sendto に .desktop ファイルを作るだけで簡単に置くことができます。例えば上記の Dropbox シンボリックリンクアクションを Send To に置きたい場合、dropbox_folder.desktop を以下の内容で作成します。新しく作成したアクションは Thunar を再起動した後に有効になります。\n\n```\n[Desktop Entry]\nType=Application\nVersion=1.0\nEncoding=UTF-8\nExec=ln -s %f /path/to/DropboxFolder\nIcon=/usr/share/icons/dropbox.png\nName=Dropbox\n```\n\n"
    },
    {
      "title": "Thunar を使ってリモートの場所をブラウズする",
      "level": 3,
      "content": "Xfce 4.8 (Thunar 1.2) から Thunar で直接リモートの場所 (FTP サーバーや Samba 共有など) をブラウズできるようになっています。この機能を有効にするには gvfs, gvfs-smb, sshfs パッケージをインストールしてください。'Network' エントリが Thunar のサイドバーに表示され次のような URI スキームを場所ダイアログ (Ctrl+l で開く) に使うことでリモートの場所を開くことができます: smb://, ftp://, ssh://, sftp://, davs:// そしてその後にサーバーのホスト名や IP アドレス。\n\nNFS 共有には URI スキームがありませんが、fstab を適切に設定していれば Thunar は mount コマンドを実行することができます。\n\n```\n/etc/fstab\n```\n\n```\n# nas1 server\nnas1:/c/home\t\t/media/nas1/home\tnfs\tnoauto,user,_netdev,bg  0 0\n```\n\nここで重要なのは、クリックされるまで共有がマウントされないようにする noauto と、どのユーザーでも共有をマウント(アンマウント)できるようにする user、そして前もってネットワーク接続を行う _netdev、そして最後にマウント操作をバックグラウンドにする bg です。これはサーバーがスピンアップ時間を必要とする場合に動作するまでタイムアウトメッセージに対処して再クリックする必要をなくします。\n\n"
    },
    {
      "title": "デーモンモードで起動する",
      "level": 3,
      "content": "Thunar はデーモンモードで実行することが可能です。このモードには複数の利点があり、Thunar を高速に起動したり、バックグラウンドで Thunar を動かすことで必要なときだけウィンドウを開くことができます (例えば、フラッシュドライブが接続されたときなど)。\n\nログイン時に thunar --daemon コマンドが自動で実行されるようにしてください。詳しくは Xfce や自動起動を見て下さい。\n\n"
    },
    {
      "title": "起動が遅いという問題を解決する",
      "level": 3,
      "content": "一部の人々は Thunar を最初に起動するときに長い時間がかかるという問題を抱えています。これは gvfs がネットワークを確認しているのが原因で、gvfs が操作を完了するまで Thunar が起動できなくなっているからです。この挙動を変更するには、/usr/share/gvfs/mounts/network.mount を編集して AutoMount=true を AutoMount=false に変えてください。\n\n"
    },
    {
      "title": "サイドペインのショートカットを隠す",
      "level": 3,
      "content": "サイドペインのショートカットを表示させなくする隠しメニューが存在します。\n\n「デバイス」セクションラベルなど、サイドペインのショートカットがないところを右クリックして下さい。ポップアップメニューが表示され、隠したいアイテムのチェックを外すことができます。\n\n"
    },
    {
      "title": "Thunar のキーボードショートカットを割り当てる",
      "level": 3,
      "content": "自由にコマンドのショートカットを割り当てる方法があります。実際、Thunar のメニューバーに記載されるメニューオプションは自由にショートカットに割り当てることが可能です。ただし、残念ながら (Thunar Archive Plugin など) プラグインのオプションをショートカットで割り当てることはできません。\n\n```\nxfconf-query -c xsettings -p /Gtk/CanChangeAccels -T\n```\n\nThunar を開いて、例えば \"Open Terminal Here\" メニューオプションを探して下さい。エントリの上にマウスを乗せてキーボードショートカットにするキーを押します。多くの場合、F4 に設定すると便利でしょう。キーの割り当てを削除するには、Backspace キーを押します。\n\n上記の設定を行えば、Thunar の中で定義したショートカットを押すだけでターミナルを開くことができるようになります。\n\nGTK+#キーボードショートカットのカスタマイズを有効にするも参照。\n\n"
    },
    {
      "title": "fstab に定義されたパーティションを表示する",
      "level": 3,
      "content": "Thunar はデフォルトで /etc/fstab に定義されているパーティションを root パーティションを除いて一切デバイス欄に表示しません。\n\nfstab で表示したいパーティションに comment=x-gvfs-show オプションを付けることで表示を切り替えることができます。\n\n"
    },
    {
      "title": "大容量の外付けドライブの自動マウント",
      "level": 3,
      "content": "thunar-volman と gvfs がインストールされているにもかかわらず、Thunar が大きなリムーバブルメディア (サイズ > 1TB) のマウントを拒否する場合は、udevilAUR や udiskie などの別のオートマウンタをインストールしてみてください。後者は udisks2 を使用し、gvfs と互換性があるため、推奨されます。udisks2 サポートを使用して udiskie を起動するには、自動起動ファイルに次の行を追加します。\n\n```\nudiskie -2 &\n```\n\n"
    },
    {
      "title": "Tumblerd がハングアップして cpu を異常に消費する",
      "level": 3,
      "content": "Tumblerd はファイルシステムを監視して、サムネイルを作成する必要があるときにシステムに通知するサービスですが、ループにはまって、システムの CPU を100%使用してしまうことがあります。このバグレポートを見て下さい。以下のスクリプトは、[1] で考案されたもので、Tumblerd の異常を止めるための一時的な対処方法です。コピーして、.sh ファイルにペーストし、ホームディレクトリのどこかに保存して、ファイルに実行可能属性を付与し、システムの起動時に自動で実行させるように設定してください。\n\n```\n#!/bin/bash\nperiod=20\ntumblerpath=\"/usr/lib/*/tumbler-1/tumblerd\" # The * here should find the right one, whether 32 and 64-bit\ncpu_threshold=50\nmem_threshold=20\nmax_strikes=2                               # max number of above cpu/mem-threshold's in a row\nlog=\"/tmp/tumblerd-watcher.log\"\n\nif [[ -n \"${log}\" ]]; then\n    cat /dev/null > \"${log}\"\n    exec >\"${log}\" 2>&1\nfi\n\n\nstrikes=0\nwhile sleep \"${period}\"; do\n    while read pid; do\n\tcpu_usage=$(ps --no-headers -o pcpu -f \"${pid}\"|cut -f1 -d.)\n\tmem_usage=$(ps --no-headers -o pmem -f \"${pid}\"|cut -f1 -d.)\n\n\tif [[ $cpu_usage -gt $cpu_threshold ]] || [[ $mem_usage -gt $mem_threshold ]]; then\n\t    echo \"$(date +\"%F %T\") PID: $pid CPU: $cpu_usage/$cpu_threshold %cpu MEM: $mem_usage/$mem_threshold STRIKES: ${strikes} NPROCS: $(pgrep -c -f ${tumblerpath})\"\n\t    (( strikes++ ))\n\t    if [[ ${strikes} -ge ${max_strikes} ]]; then\n\t\tkill \"${pid}\"\n\t\techo \"$(date +\"%F %T\") PID: $pid KILLED; NPROCS: $(pgrep -c -f ${tumblerpath})\"\n\t\tstrikes=0\n\t    fi\n\telse\n\t    strikes=0\n\tfi\n    done < <(pgrep -f ${tumblerpath})\ndone\n```\n\n"
    },
    {
      "title": "ゴミ箱やネットワークアイコンが表示されたりされなかったりする",
      "level": 3,
      "content": "全ての Thunar インスタンスを gvfs の後に起動させてください [2]。thunar --daemon の場合、GVFS が有効になるまで待機するラッパーを作成することができます:\n\n```\n/usr/local/bin/Thunar\n```\n\n```\n#!/bin/bash\nif [[ $1 == --daemon ]]; then\n  until pgrep gvfs >/dev/null; do\n    sleep 1\n  done\n  exec /usr/bin/Thunar \"$@\"\nelse\n  exec /usr/bin/Thunar \"$@\"\nfi\n```\n\n"
    },
    {
      "title": "ファイルシステムがマウントできない",
      "level": 3,
      "content": "ファイルマネージャの機能#トラブルシューティングを見てください。\n\n"
    },
    {
      "title": "新しいウィンドウやタブが開くのが遅すぎる",
      "level": 3,
      "content": "XDG_TEMPLATES_DIR に設定したフォルダの下に多くのファイルがある場合があります。XDG ユーザーディレクトリ を参照してください。\n\n解決策としては、XDG_TEMPLATES_DIR のあるフォルダから別のフォルダにファイルを移動するか、XDG_TEMPLATES_DIR を別のフォルダに設定します。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- Thunar プロジェクトページ\n- Thunar Volume Manager プロジェクトページ\n- プラグインの リスト\n\n"
    }
  ]
}