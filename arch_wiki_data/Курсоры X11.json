{
  "title": "Курсоры X11",
  "url": "https://wiki.archlinux.org/title/%D0%9A%D1%83%D1%80%D1%81%D0%BE%D1%80%D1%8B_X11",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Дисплейный сервер сопровождается темой курсора, которая помогает в различных аспектах навигации и манипуляции GUI. Тема курсора уже включена в сервер, но другие темы также могут быть установлены.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установка совершается посредством пакета или загрузки и извлечения темы в соответствующий каталог.\n\n"
    },
    {
      "title": "Пакеты",
      "level": 3,
      "content": "Пакеты доступны в:\n\n- Официальных репозиториях — поиск \"xcursor-\".\n- AUR — поиск \"cursor\".\n\n"
    },
    {
      "title": "Вручную",
      "level": 3,
      "content": "Тему курсора, не доступную в официальных репозиториях и AUR, можно установить вручную. Скачанные темы нужно будет поместить в каталог icons (так как курсоры могут быть вместе с иконками).\n\nСайты, где можно найти темы:\n\n- GNOME Look\n- Customize.org[устаревшая ссылка 2023-05-06 ⓘ]\n- Deviant Art\n- Open Desktop\n\nЧтобы установить тему для конкретного пользователя, распакуйте её в ~/.local/share/icons/ или ~/.icons/:\n\n```\n$ tar xvf foobar-cursor-theme.tar.gz -C ~/.local/share/icons\n```\n\nСтруктура папки с темой: имя-темы/cursors. Например: ~/.local/share/icons/тема/cursors/. Также убедитесь, что извлечённые файлы следуют данной структуре.\n\nВыполните следующую команду, чтобы посмотреть уже установленные темы:\n\n```\nfind /usr/share/icons ~/.local/share/icons ~/.icons -type d -name \"cursors\"\n```\n\nЕсли пакет включает в себя файл index.theme, проверьте, есть ли внутри строка «Inherits». Если есть, то проверьте, существует ли указанная тема в системе (переименуйте, если необходимо).\n\n"
    },
    {
      "title": "Настройка",
      "level": 2,
      "content": "Существуют различные способы настройки установленных тем.\n\n"
    },
    {
      "title": "Спецификация XDG",
      "level": 3,
      "content": "Этот метод применим к X11 и Wayland.\n\nНастройка для конкретного пользователя производится посредством ~/.icons/default/index.theme; для общесистемной конфигурации используйте /usr/share/icons/default/index.theme.\n\nОпция Inherits в разделе [icon theme] должна быть установлена на имя каталога темы имя_темы, например xcursor-breeze-snow:\n\n```\n~/.icons/default/index.theme\n```\n\n```\n[icon theme] \nInherits=имя_темы\n```\n\nЗатем отредактируйте ~/.config/gtk-3.0/settings.ini, заменяя имя_темы на соответствующее название:\n\n```\n~/.config/gtk-3.0/settings.ini\n```\n\n```\n[Settings]\ngtk-cursor-theme-name=имя_темы\n```\n\nПерелогиньтесь, чтобы изменения вступили в силу.\n\n"
    },
    {
      "title": "LXAppearance",
      "level": 3,
      "content": "LXAppearance устанавливает курсор по умолчанию путём создания файла ~/.icons/default/index.theme. LXAppearance перезапишет любые изменения, сделанные вручную. Не забудьте отредактировать ~/.config/gtk-3.0/settings.ini, как это указано в Спецификации XDG, потому что некоторые приложения, например Firefox, используют эти настройки.\n\n"
    },
    {
      "title": "Среда рабочего стола",
      "level": 3,
      "content": "Среды рабочего стола используют протокол XSETTINGS, обычно реализуемый через демон настроек. Несмотря на возможность изменения темы на лету, в некоторых приложениях это не работает. Чтобы изменить тему вручную, смотрите #Спецификацию XDG.\n\n"
    },
    {
      "title": "GNOME",
      "level": 4,
      "content": "Тема курсора в GNOME изменяется посредством gnome-tweaks или gsettings:\n\n```\ngsettings set org.gnome.desktop.interface cursor-theme имя_темы\n```\n\nИзменение размера курсора (зависит от темы. Размеры могут быть следующими: 24, 32, 48, 64):\n\n```\ngsettings set org.gnome.desktop.interface cursor-size размер\n```\n\n"
    },
    {
      "title": "Mate",
      "level": 4,
      "content": "В MATE можно использовать mate-control-center или gsettings:\n\n```\ngsettings set org.mate.peripherals-mouse cursor-theme имя_темы\n```\n\nДля изменения размера:\n\n```\ngsettings set org.mate.peripherals-mouse размер\n```\n\n"
    },
    {
      "title": "XFCE",
      "level": 4,
      "content": "Чтобы изменить тему:\n\n```\nxfconf-query --channel xsettings --property /Gtk/CursorThemeName --set имя_темы\n```\n\nДля изменения размера:\n\n```\nxfconf-query --channel xsettings --property /Gtk/CursorThemeSize --set размер\n```\n\n"
    },
    {
      "title": "X resources",
      "level": 3,
      "content": "Для локального изменения темы, добавьте в ~/.Xresources:\n\n```\nXcursor.theme: имя_темы\n```\n\nТема должна загрузиться оконным менеджером. Если этого не произошло, её можно принудительно загрузить посредством ~/.xinitrc или .xprofile:\n\n```\n$ xrdb ~/.Xresources\n```\n\nЕсли ваша тема поддерживает несколько размеров, добавьте в ~/.Xresources:\n\n```\nXcursor.size: 16\n```\n\nЕсли вы сомневаетесь в том, что ваша тема поддерживает несколько размеров, то запустите X без этих настроек и дайте ему выбрать размер автоматически. (Обратитесь к документации своего оконного менеджера для деталей.)\n\n"
    },
    {
      "title": "Переменные окружения",
      "level": 3,
      "content": "Чтобы установить тему курсора для определённого приложения, используйте переменные окружения:\n\n```\n$ XCURSOR_THEME=ИмяТемы xclock\n```\n\nЕсли тема поддерживает несколько размеров, XCURSOR_SIZE является необязательным.\n\n"
    },
    {
      "title": "Менеджеры дисплея",
      "level": 3,
      "content": "Тема курсора обычно устанавливается в пределах менеджера дисплея, но имейте в виду, она не переносится между сеансами.\n\n"
    },
    {
      "title": "GDM",
      "level": 4,
      "content": "Смотрите GDM#Changing the cursor theme\n\n"
    },
    {
      "title": "Создание ссылок на недостающие курсоры",
      "level": 3,
      "content": "Приложения могу продолжать использовать тему по умолчанию, если в текущей теме отсутствуют некоторые курсоры. Это можно исправить, добавив ссылки на недостающие курсоры. Например:\n\n```\n$ cd ~/.icons/тема/cursors/\n$ ln -s right_ptr arrow\n$ ln -s cross crosshair\n$ ln -s right_ptr draft_large\n$ ln -s right_ptr draft_small\n$ ln -s cross plus\n$ ln -s left_ptr top_left_arrow\n$ ln -s cross tcross\n$ ln -s hand hand1\n$ ln -s hand hand2\n$ ln -s left_side left_tee\n$ ln -s left_ptr ul_angle\n$ ln -s left_ptr ur_angle\n$ ln -s left_ptr_watch 08e8e1c95fe2fc01f976f1e063a24ccd\n```\n\nЕсли вышеуказанные действия не помогают, посмотрите в /usr/share/icons/whiteglass/cursors, чтобы увидеть, каких курсоров не хватает в теме, и добавить ссылки на них.\n\n```\n$ cd ~/.icons/тема/cursors/\n$ rm watch left_ptr_watch\n$ ln -s left_ptr watch\n$ ln -s left_ptr left_ptr_watch\n```\n\n"
    },
    {
      "title": "Замена недостающих курсоров",
      "level": 3,
      "content": "Некоторые программы устанавливают свои курсоры ~/.Xresources, которые вы, возможно, захотите переопределить. Типичным примером этого является программа rdesktop, которая подключается к компьютеру с Microsoft Windows и использует курсоры, полученные от удалённой машины, которые часто трудно увидеть из-за ограничений протокола, который обеспечивает плохое качество преобразования.\n\nПроблему можно решить, заменив эти курсоры курсорами из этой же темы (или другой). Чтобы сделать это, необходимо получить хеш изображения. Это делается путём установки переменной окружения XCURSOR_DISCOVER и запуском требуемого приложения:\n\n```\n$ XCURSOR_DISCOVER=1 rdesktop ...\n```\n\nВ первый раз (и только в первый раз) курсор установится, некоторые детали будут отображаться вот так:\n\n```\nCursor image name: 24020000002800000528000084810000\n...\nCursor image name: 7bf1cc07d310bf080118007e08fc30ff\n...\nCursor hash 24020000002800000528000084810000 returns 0x0\n```\n\nДля поиска Xcursor использует директорию ~/.icons/default/cursors, туда следует поместить недостающие курсоры. Создайте директорию, если она не существует:\n\n```\n$ mkdir -p ~/.icons/default/cursors\n```\n\nДалее создадим ссылку на хэш изображения. В примере используется курсор left_ptr из темы Vanilla-DMZ:\n\n```\n$ ln -s /usr/share/icons/Vanilla-DMZ/cursors/left_ptr ~/.icons/default/cursors/24020000002800000528000084810000\n```\n\nИзменения будут видны после перезапуска приложения. Никаких специальных методов запуска приложений не требуется.\n\n"
    },
    {
      "title": "rdesktop",
      "level": 4,
      "content": "Вот некоторые распространённые курсоры Microsoft Windows, которые rdesktop использует при подключении к удалённой машине под управлением Windows 7. К сожалению, анимированные курсоры трудно переопределить, так как они отправляются по кадру, поэтому изображение нужно будет для каждого кадра!\n\n```\n$ ln -s /usr/share/icons/$THEME/cursors/xterm          ~/.icons/default/cursors/00000000017e000002fc000000000000\n$ ln -s /usr/share/icons/$THEME/cursors/right_ptr      ~/.icons/default/cursors/00000093000010860000631100006609\n$ ln -s /usr/share/icons/$THEME/cursors/plus           ~/.icons/default/cursors/01e00000201c00004038000080300000\n$ ln -s /usr/share/icons/$THEME/cursors/left_ptr       ~/.icons/default/cursors/24020000002800000528000084810000\n$ ln -s /usr/share/icons/$THEME/cursors/left_ptr_watch ~/.icons/default/cursors/6ce0180090108e0005814700a0021400\n$ ln -s /usr/share/icons/$THEME/cursors/hand           ~/.icons/default/cursors/d2201000a2c622004385440041308800\n$ ln -s /usr/share/icons/$THEME/cursors/watch          ~/.icons/default/cursors/fc618c00da110f0034fd0e004e082400\n```\n\n"
    },
    {
      "title": "Изменение стандартного курсора X сервера",
      "level": 3,
      "content": "Стандартный курсор X-сервера появляется в форме Xcursor в оконных менеджерах, где не установлен курсор по умолчанию в left_ptr или в оконных менеджерах, где используется XCB (таких как awesome) вместо Xlib.\n\nЧтобы исправить это, просто добавьте следующее в ~/.xinitrc, файлы конфигурации xsession или оконного менеджера, которые выполняются при запуске, если это возможно (например, bspwmrc оконного менеджера bspwm):\n\n```\n$ xsetroot -cursor_name left_ptr\n```\n\nСписок стилей курсора протокола X: appendix B\n\n"
    },
    {
      "title": ".Xdefaults",
      "level": 3,
      "content": "Если у вас есть конфликтующие курсоры, это может быть вызвано тем, что другой курсор был определён в файле ~/.Xdefaults.\n\n"
    },
    {
      "title": "Размер курсора не изменяется при загрузке",
      "level": 3,
      "content": "Если вы хотите изменить размер курсора через ~/.Xresources в ~/.xinitrc, и он не изменяется, то проверьте, что xrandr запускается перед загрузкой ~/.Xresources\n\n~/.xinitrc должен выглядеть примерно следующим образом:\n\n```\n~/.xinitrc\n```\n\n```\nxrandr &&\n...\nxrdb -merge ~/.Xresources &&\nexec wm\n```\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Xcursor(3) — больше информации о курсорах в X (поддерживаемые директории, форматы, совместимость и т.д.).\n\n"
    }
  ]
}