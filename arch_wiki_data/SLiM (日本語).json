{
  "title": "SLiM (日本語)",
  "url": "https://wiki.archlinux.org/title/SLiM_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- ディスプレイマネージャ\n\nSLiM は、Simple Login Manager の頭字語です。軽量で簡単に設定できる SLiM は、必要な依存関係が最小限で、GNOME や KDE デスクトップ環境からの依存関係は一切ありません。そのため、Xfce、Openbox、Fluxbox などの軽量デスクトップを好むユーザーにとって、軽量システムの実現に貢献します。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 設定 2.1 .xinitrc ファイル 2.2 SLiM を有効にする 2.3 単一のデスクトップ環境 2.4 複数のデスクトップ環境 2.5 デフォルトユーザー名の指定 2.6 自動ログインの有効化 2.7 テーマ 2.7.1 デュアルスクリーンの設定\n- 3 他のオプション 3.1 カーソルを変更する 3.2 SLiM とデスクトップの壁紙を同じにする 3.3 SLiM からのシャットダウン・再起動・サスペンド・終了・ターミナルの起動 3.4 Splashy でのパワーオフエラー 3.5 パワーオフのトレイアイコンが使えない 3.6 SLiM のログイン情報 3.7 カスタム SLiM ログインコマンド 3.8 SLiM と Gnome Keyring 3.9 SLiM で DPI を設定 3.10 テーマをランダムに使う 3.11 全てのセッションを他の VT に移動する 3.12 暗号化した /home をログイン時に自動でマウントする 3.13 キーボードレイアウトの変更\n- 4 全ての Slim オプション\n- 5 アンインストール\n- 6 既知の問題 6.1 systemd との非互換性\n- 7 参照\n\n- 2.1 .xinitrc ファイル\n- 2.2 SLiM を有効にする\n- 2.3 単一のデスクトップ環境\n- 2.4 複数のデスクトップ環境\n- 2.5 デフォルトユーザー名の指定\n- 2.6 自動ログインの有効化\n- 2.7 テーマ 2.7.1 デュアルスクリーンの設定\n\n- 2.7.1 デュアルスクリーンの設定\n\n- 3.1 カーソルを変更する\n- 3.2 SLiM とデスクトップの壁紙を同じにする\n- 3.3 SLiM からのシャットダウン・再起動・サスペンド・終了・ターミナルの起動\n- 3.4 Splashy でのパワーオフエラー\n- 3.5 パワーオフのトレイアイコンが使えない\n- 3.6 SLiM のログイン情報\n- 3.7 カスタム SLiM ログインコマンド\n- 3.8 SLiM と Gnome Keyring\n- 3.9 SLiM で DPI を設定\n- 3.10 テーマをランダムに使う\n- 3.11 全てのセッションを他の VT に移動する\n- 3.12 暗号化した /home をログイン時に自動でマウントする\n- 3.13 キーボードレイアウトの変更\n\n- 6.1 systemd との非互換性\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "公式リポジトリから slim をインストールしてください。\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "1.3.6-2 バージョンで、 SLiM はインストール済みのデスクトップ環境とウインドウマネージャを自動的に認識するようになりました。このことは、/etc/slim.conf の中の sessiondir /usr/share/xsessions/ に記載されています。したがって、それ以前のバージョンの SLiM をインストールしている方は、/etc/slim.conf と ~/.xinitrc を修正する必要があります。\n\n"
    },
    {
      "title": ".xinitrc ファイル",
      "level": 3,
      "content": "もし ~/.xinitrc ファイルがまだないようであれば、nano や然るべきテキストエディタ（例えば Leafpad や Geany）で、ファイルを作成しましょう。あるいは以下のようにして、スケルトンファイルをテンプレートとして使用することができます。\n\n```\n$ cp /etc/skel/.xinitrc ~\n```\n\nまだであれば、 ~/.xinitrc ファイルに実行可能権限を与えましょう。\n\n```\nchmod +x ~/.xinitrc\n```\n\n"
    },
    {
      "title": "SLiM を有効にする",
      "level": 3,
      "content": "SLiM デーモンを有効にするには次のコマンドを実行します: systemctl enable slim.service。この前提として、すでにインストールして有効にしてあるディスプレイマネージャがあればそれをまず無効化しておくか、systemctl enable slim.service -f を実行して既存のディスプレイマネージャを無効にすると同時に SLiM を有効にしましょう。\n\n"
    },
    {
      "title": "単一のデスクトップ環境",
      "level": 3,
      "content": "SLiM バージョン 1.3.6-2 以降を設定して特定の環境をロードするには、/etc/slim.conf と ~/.xinitrc の両方を編集する必要があります。\n\nまず、/etc/slim.conf を編集して sessiondir /usr/share/xsessions/ をコメント化します。そうすると、インストール済み環境の自動認識が無効になります。\n\n```\n# Set directory that contains the xsessions.\n# slim reads xsesion from this directory, and be able to select.\n# sessiondir            /usr/share/xsessions/\n```\n\nつぎに、~/.xinitrc を編集して、お望みのセッションを指定します。\n\n```\n#!/bin/sh\n\n#\n# ~/.xinitrc\n#\n# Executed by startx (run your window manager from here)\n#\n\nexec <session-command>\n```\n\n<session-command> をお望みのセッションのコマンドに置き換えてください。例えば以下のように:\n\n```\nexec awesome\nexec dwm\nexec startfluxbox\nexec fvwm2\nexec gnome-session\nexec openbox-session\nexec startkde\nexec startlxde\nexec startxfce4\nexec enlightenment_start\nexec mate-session\n```\n\n以上のそれぞれのデスクトップ環境やウインドウマネージャの詳細な解説は、この Wiki のそれぞれの記事を参照してください。\n\n"
    },
    {
      "title": "複数のデスクトップ環境",
      "level": 3,
      "content": "複数のデスクトップ環境を選択可能なようにするには、 /etc/slim.conf と ~/.xinitrc を修正します。1.3.6-2 以前の SLiM にも適用可能です。\n\nまず /etc/slim.conf を編集して、 sessiondir /usr/share/xsessions/ があることを確認し、コメント化から外します。\n\n```\n# Set directory that contains the xsessions.\n# slim reads xsesion from this directory, and be able to select.\nsessiondir            /usr/share/xsessions/\n```\n\nSLiM の古いバージョンのユーザーは、 sessions の項目を新たなコマンドに差し替えねばなりません。\n\nつぎに、~/.xinitrc を編集して、指定されたセッションが起動するようにします。\n\n```\nexec $1\n```\n\nSLiM の古いバージョンのユーザーは、case $1 in [...] esac の部分を置き換えねばならないでしょう。より具体的に言うと、複数のセッションから選択していた古い手段として以下のような例が問題となります。以下のこのコードまるごとが、ただ単なる exec $1 に置き換えられます。\n\n```\nDEFAULTSESSION=openbox-session\n\ncase \"$1\" in\n    openbox) exec openbox-session ;;\n     xfce) exec xfce4-session ;;\n     gnome3) exec gnome-session ;;\n     kde) exec startkde ;;\n     cinnamon) exec gnome-session-cinnamon ;;\n     razor-qt) exec razor-session ;;\n     lxde) exec lxsession ;;\n     mate) exec mate-session ;;\n     *) exec $DEFAULTSESSION ;;\nesac\n```\n\n"
    },
    {
      "title": "デフォルトユーザー名の指定",
      "level": 3,
      "content": "SLiM では、お望みのユーザー名が自動的に入力されているように設定可能です。最初からパスワード欄が表示されているようになります。/etc/slim.conf 内の以下の行を変更しましょう。\n\n```\n# default_user        simone\n```\n\nこの行のコメント化を外して、 \"simone\" を希望のユーザ名に変更しましょう。\n\n```\ndefault_user        <your username>\n```\n\n"
    },
    {
      "title": "自動ログインの有効化",
      "level": 3,
      "content": "/etc/slim.conf を編集して、auto_login のコメント化を外し、no を yes に変更しましょう。\n\n```\nauto_login          yes\n```\n\n"
    },
    {
      "title": "テーマ",
      "level": 3,
      "content": "slim-themes パッケージをインストールします:\n\n```\n# pacman -S slim-themes archlinux-themes-slim\n```\n\narchlinux-themes-slim パッケージにはテーマが複数入っています (slimthemes.png)。 /usr/share/slim/themes ディレクトリで ls して利用できるテーマを見て下さい。/etc/slim.conf の current_theme 行に使いたいテーマ名を入力します:\n\n```\n#current_theme       default\ncurrent_theme       archlinux-simplyblack\n```\n\n起動している Xorg サーバーインスタンスでテーマをプレビューするには:\n\n```\n$ slim -p /usr/share/slim/themes/<theme name>\n```\n\n終了するには、Login 行に \"exit\" と入力して Enter を押して下さい。\n\nまた、追加のテーマパッケージが AUR にあります。\n\n"
    },
    {
      "title": "デュアルスクリーンの設定",
      "level": 4,
      "content": "/usr/share/slim/themes/<your-theme>/slim.theme で slim テーマのパーセント値をカスタマイズできます。ボックス自体は 450 px × 250 px です:\n\n```\ninput_panel_x           50%\ninput_panel_y           50%\n```\n\nピクセル値にする:\n\n```\n# この設定は \"archlinux-simplyblack\" パネルを 1440x900 スクリーンの中央に設定します\ninput_panel_x           495\ninput_panel_y           325\n```\n\n```\n# この設定は \"archlinux-retro\" パネルを 1680x1050 スクリーンの中央に設定します\ninput_panel_x           615\ninput_panel_y           400\n```\n\nテーマに壁紙画像がある場合は background_style 設定 ('stretch', 'tile', 'center', 'color') を使って正しく壁紙を表示してください。詳しい説明は slim テーマについての公式ドキュメントを見て下さい。\n\n"
    },
    {
      "title": "カーソルを変更する",
      "level": 3,
      "content": "インストールした後、/etc/slim.conf を開き次の行をアンコメントします:\n\n```\ncursor   left_ptr\n```\n\n代わりに矢印が使われるようになります。この設定は xsetroot -cursor_name に優先します。使うことができるカーソルの名前はここや /usr/share/icons/<your-cursor-theme>/cursors/ の中で見ることができます。\n\nログイン画面で使われるカーソルを変更するには、/usr/share/icons/default/index.theme という名のファイルを次の内容で作って下さい:\n\n```\n[Icon Theme]\nInherits=<your-cursor-theme>\n```\n\n<your-cursor-theme> は使いたいカーソルテーマの名前に置き換えて下さい (例: whiteglass)。\n\n"
    },
    {
      "title": "SLiM とデスクトップの壁紙を同じにする",
      "level": 3,
      "content": "SLiM とデスクトップで壁紙を共有するには、使っているテーマの壁紙をリネームして、デスクトップの壁紙ファイルからデフォルトの SLim テーマへのリンクを作成します:\n\n```\n# mv /usr/share/slim/themes/default/background.jpg{,.bck}\n# ln -s /path/to/mywallpaper.jpg /usr/share/slim/themes/default/background.jpg\n```\n\n"
    },
    {
      "title": "SLiM からのシャットダウン・再起動・サスペンド・終了・ターミナルの起動",
      "level": 3,
      "content": "SLiM のログイン画面からシャットダウン・再起動・サスペンド・終了・ターミナルの起動をすることができます。ユーザー名にこれらを意味する変数を、パスワードに root パスワードを入力してください:\n\n- ターミナルを起動するには、ユーザー名に console と入力します (デフォルトは xterm で予めインストールしておく必要があります、利用するターミナルを変えるには /etc/slim.conf を編集して下さい)\n- シャットダウンするには、ユーザー名に halt と入力します\n- 再起動するには、ユーザー名に reboot と入力します\n- slim を終了して bash に戻るには、ユーザー名に exit と入力します\n- サスペンドをするには、ユーザー名に suspend と入力します (サスペンドはデフォルトでは無効になっています、/etc/slim.conf を root 権限で開き suspend_cmd 行をアンコメントしてください、必要ならサスペンドコマンドも変更してください (例: /usr/sbin/suspend を sudo /usr/sbin/pm-suspend にする))\n\n"
    },
    {
      "title": "Splashy でのパワーオフエラー",
      "level": 3,
      "content": "Splashy と SLiM を使っていて、ときどき GNOME, Xfce, LXDE などのメニューからパワーオフ・再起動ができなくなるかもしれません。/etc/slim.conf と /etc/splash.conf を開いて、DEFAULT_TTY=7 を xserver_arguments vt07 と同じように設定してください。\n\n"
    },
    {
      "title": "パワーオフのトレイアイコンが使えない",
      "level": 3,
      "content": "パワーオフのトレイアイコンが失敗する場合、root 権限がないのが原因かもしれません。トレイアイコンを root 権限を使って実行するには、/etc/slim.conf を以下のように編集します:\n\n```\nsessionstart_cmd \t/path/to/tray/icon/program &\n```\n\n"
    },
    {
      "title": "SLiM のログイン情報",
      "level": 3,
      "content": "デフォルトでは、SLiM はログイン情報のログを utmp と wtmp に記録することに失敗し、そのため who や last などがログイン情報の報告を誤ります。これを修正するためには、 slim.conf を編集し、以下のようにします:\n\n```\nsessionstart_cmd    /usr/bin/sessreg -a -l $DISPLAY %user\n sessionstop_cmd     /usr/bin/sessreg -d -l $DISPLAY %user\n```\n\n"
    },
    {
      "title": "カスタム SLiM ログインコマンド",
      "level": 3,
      "content": "セッションやユーザー、slim が使うテーマなどの情報のログを残すために /etc/slim.conf の sessionstart_cmd/sessionstop_cmd を使うこともできます:\n\n```\nsessionstop_cmd /usr/bin/logger -i -t ASKAPACHE \"(sessionstop_cmd: u:%user s:%session t:%theme)\"\n sessionstart_cmd /usr/bin/logger -i -t ASKAPACHE \"(sessionstart_cmd: u:%user s:%session t:%theme)\"\n```\n\nまた、slim がロードされたときに (beep プログラムを使って) 曲を再生するには:\n\n```\nsessionstart_cmd /usr/bin/beep -f 659 -l 460 -n -f 784 -l 340 -n -f 659 -l 230 -n -f 659 -l 110\n```\n\n"
    },
    {
      "title": "SLiM と Gnome Keyring",
      "level": 3,
      "content": "カスタムセッションにGNOME キーリングを利用したい場合には、GNOME Keyring#GNOME は使わないがディスプレイマネージャは使用する を参照してください。\n\n"
    },
    {
      "title": "SLiM で DPI を設定",
      "level": 3,
      "content": "一般的に DPI の設定は Xorg で行いますが、SLiM で指定することもできます。/etc/X11/xinit/xserverrc 内で -dpi 96 を使って DPI を設定しても、それが SLiM に反映されない場合、これを修正するには slim.conf 内の:\n\n```\nxserver_arguments   -nolisten tcp vt07\n```\n\nを\n\n```\nxserver_arguments   -nolisten tcp vt07 -dpi 96\n```\n\nに変えてください。\n\n"
    },
    {
      "title": "テーマをランダムに使う",
      "level": 3,
      "content": "current_theme にカンマで区切った複数のテーマをセットすると、ランダムに選ばれます。\n\n"
    },
    {
      "title": "全てのセッションを他の VT に移動する",
      "level": 3,
      "content": "tty ターミナル 3−6 を使用しないようにしたいかもしれません (screen を使用するとき、ターミナルは一つしか必要ないからです)。\n\nそれで、X サーバに移動するには、 /etc/slim.conf ファイル内の数字を一つ編集する必要があります。以下の行です。\n\n```\nxserver_arguments -nolisten tcp vt07\n```\n\nvt07 を vt03 に変更するだけで、agetty が起動しないようになります。\n\n"
    },
    {
      "title": "暗号化した /home をログイン時に自動でマウントする",
      "level": 3,
      "content": "pam_mount を使うことができます。\n\n"
    },
    {
      "title": "キーボードレイアウトの変更",
      "level": 3,
      "content": "/etc/X11/xorg.conf.d/10-evdev.conf を開いて、以下のセクションを探し、太字の部分 (dvorak はあなたのキーマップに置き換えて下さい) を追加してください:\n\n```\nSection  \"InputClass\"\n          Identifier \"evdev keyboard catchall\"\n          MatchIsKeyboard \"on\"\n          MatchDevicePath \"/dev/input/event*\"\n          Driver \"evdev\"\n       \n          # Keyboard layouts\n          Option \"XkbLayout\" \"dvorak\"\nEndSection\n```\n\n"
    },
    {
      "title": "全ての Slim オプション",
      "level": 2,
      "content": "slim の全ての設定オプションとそのデフォルト値の一覧です。\n\nsessionstart_cmd (login_cmd の直前に実行される) と sessionstop_cmd では、%user が、\n\nTable content:\nオプション名 | デフォルト値\ndefault_path | /bin:/usr/bin:/usr/local/bin\ndefault_xserver | /usr/bin/X\nxserver_arguments | vt07 -auth /var/run/slim.auth\nnumlock | \ndaemon | yes\nxauth_path | /usr/bin/xauth\nlogin_cmd | exec /bin/bash -login ~/.xinitrc %session\nhalt_cmd | /sbin/shutdown -h now\nreboot_cmd | /sbin/shutdown -r now\nsuspend_cmd | \nsessionstart_cmd | \nsessionstop_cmd | \nconsole_cmd | /usr/bin/xterm -C -fg white -bg black +sb -g %dx%d+%d+%d -fn %dx%d -T\nscreenshot_cmd | import -window root /slim.png\nwelcome_msg | Welcome to %host\nsession_msg | Session:\ndefault_user | \nfocus_password | no\nauto_login | no\ncurrent_theme | default\nlockfile | /var/run/slim.lock\nlogfile | /var/log/slim.log\nauthfile | /var/run/slim.auth\nshutdown_msg | The system is halting...\nreboot_msg | The system is rebooting...\nsessiondir | /usr/share/xsessions/\nhidecursor | false\ninput_panel_x | 50%\ninput_panel_y | 40%\ninput_name_x | 200\ninput_name_y | 154\ninput_pass_x | -1\ninput_pass_y | -1\ninput_font | Verdana:size=11\ninput_color | #000000\ninput_cursor_height | 20\ninput_maxlength_name | 20\ninput_maxlength_passwd | 20\ninput_shadow_xoffset | 0\ninput_shadow_yoffset | 0\ninput_shadow_color | #FFFFFF\nwelcome_font | Verdana:size=14\nwelcome_color | #FFFFFF\nwelcome_x | -1\nwelcome_y | -1\nwelcome_shadow_xoffset | 0\nwelcome_shadow_yoffset | 0\nwelcome_shadow_color | #FFFFFF\nintro_msg | \nintro_font | Verdana:size=14\nintro_color | #FFFFFF\nintro_x | -1\nintro_y | -1\nbackground_style | stretch\nbackground_color | #CCCCCC\nusername_font | Verdana:size=12\nusername_color | #FFFFFF\nusername_x | -1\nusername_y | -1\nusername_msg | Please enter your username\nusername_shadow_xoffset | 0\nusername_shadow_yoffset | 0\nusername_shadow_color | #FFFFFF\npassword_x | -1\npassword_y | -1\npassword_msg | Please enter your password\nmsg_color | #FFFFFF\nmsg_font | Verdana:size=16:bold\nmsg_x | 40\nmsg_y | 40\nmsg_shadow_xoffset | 0\nmsg_shadow_yoffset | 0\nmsg_shadow_color | #FFFFFF\nsession_color | #FFFFFF\nsession_font | Verdana:size=16:bold\nsession_x | 50%\nsession_y | 90%\nsession_shadow_xoffset | 0\nsession_shadow_yoffset | 0\nsession_shadow_color | #FFFFFF\n\n"
    },
    {
      "title": "アンインストール",
      "level": 2,
      "content": "完全に SLiM を削除するには:\n\n```\n# pacman -Rns slim\n # rm /etc/systemd/system/display-manager.service\n```\n\n"
    },
    {
      "title": "systemd との非互換性",
      "level": 3,
      "content": "ディスプレイマネージャ#systemd との非互換性を参照してください。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- SLiM on SourceForge\n- SLiM on GitHub\n\n"
    }
  ]
}