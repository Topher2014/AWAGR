{
  "title": "LightDM (日本語)",
  "url": "https://wiki.archlinux.org/title/LightDM_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- ディスプレイマネージャ\n- GDM\n- LXDM\n\nLightDM はクロスデスクトップのディスプレイマネージャです。主な特徴は以下の通り:\n\n- クロスデスクトップ - 様々なデスクトップ技術をサポート。\n- 様々なディスプレイサーバーに対応 (X、Mir、Wayland ...)。\n- 軽量 - メモリの使用量が少なくて高速に動作。\n- ゲストセッションをサポート。\n- リモートログインをサポート (着信 - XDMCP、VNC、発信 - XDMCP、PAM)。\n- 充実したテストスイート。\n- 軽量なコードベース。\n\nLightDM の設計に関する詳細は ここ から見れます。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 Greeter\n- 2 LightDM を有効にする\n- 3 コマンドラインツール 3.1 ユーザーの切り替え\n- 4 テスト\n- 5 任意の設定と調整 5.1 X セッションラッパー 5.1.1 環境変数 5.1.2 キーマップ 5.1.3 lightdm-gtk-greeter で複数のキーボード配列 5.2 背景画像・色を変更する 5.2.1 GTK greeter 5.2.2 Webkit2 greeter 5.2.3 Slick Greeter 5.3 アバターを変更する 5.4 Arch の 64x64 アイコンを使う 5.5 自動ログインを有効にする 5.6 インタラクティブなパスワードレスログインを有効化する 5.7 ゲストセッションを有効化する 5.8 システムユーザーとサービスユーザーを隠す 5.9 SLiM からの移行 5.10 ~/.xinitrc を使ってログイン 5.11 NumLock をデフォルトでオンにする 5.12 デフォルトセッション 5.13 ログインウィンドウの位置を変更 5.13.1 GTK greeter 5.14 VNC サーバー 5.15 light-locker を使って画面をロック 5.16 マルチモニターのセットアップ\n- 6 トラブルシューティング 6.1 自動ログインが機能しない 6.2 現在の設定を見る 6.3 LightDM が起動せず、画面が点滅する 6.4 間違ったロケールが表示される 6.5 GTK greeter でアイコンが表示されない 6.6 ログインしようとすると LightDM がフリーズする 6.7 LightDM が間違ったモニタに表示される 6.8 LightDM が表示されない、または TTY 出力のみがモニタに表示される 6.9 Intel Graphics で LightDM の FPS が低い 6.10 Pulseaudio が自動的に起動しない 6.11 ホームディレクトリが暗号化されていると LightDM の表示に時間がかかる 6.12 \"[ OK ] Reached target Graphical Interface.\" で起動がストップする 6.13 Greeter に重複した GNOME エントリがあると Wayland セッションが動作しない 6.14 初回ログイン時に必ずセクメンテーション違反が発生する 6.15 ログインの無限ループ 6.16 Wayland セッションで入力デバイスが動かない 6.17 lightdm-webkit2-greeter がログインプロセスでエラーを出力する\n- 7 参照\n\n- 1.1 Greeter\n\n- 3.1 ユーザーの切り替え\n\n- 5.1 X セッションラッパー 5.1.1 環境変数 5.1.2 キーマップ 5.1.3 lightdm-gtk-greeter で複数のキーボード配列\n- 5.2 背景画像・色を変更する 5.2.1 GTK greeter 5.2.2 Webkit2 greeter 5.2.3 Slick Greeter\n- 5.3 アバターを変更する\n- 5.4 Arch の 64x64 アイコンを使う\n- 5.5 自動ログインを有効にする\n- 5.6 インタラクティブなパスワードレスログインを有効化する\n- 5.7 ゲストセッションを有効化する\n- 5.8 システムユーザーとサービスユーザーを隠す\n- 5.9 SLiM からの移行\n- 5.10 ~/.xinitrc を使ってログイン\n- 5.11 NumLock をデフォルトでオンにする\n- 5.12 デフォルトセッション\n- 5.13 ログインウィンドウの位置を変更 5.13.1 GTK greeter\n- 5.14 VNC サーバー\n- 5.15 light-locker を使って画面をロック\n- 5.16 マルチモニターのセットアップ\n\n- 5.1.1 環境変数\n- 5.1.2 キーマップ\n- 5.1.3 lightdm-gtk-greeter で複数のキーボード配列\n\n- 5.2.1 GTK greeter\n- 5.2.2 Webkit2 greeter\n- 5.2.3 Slick Greeter\n\n- 5.13.1 GTK greeter\n\n- 6.1 自動ログインが機能しない\n- 6.2 現在の設定を見る\n- 6.3 LightDM が起動せず、画面が点滅する\n- 6.4 間違ったロケールが表示される\n- 6.5 GTK greeter でアイコンが表示されない\n- 6.6 ログインしようとすると LightDM がフリーズする\n- 6.7 LightDM が間違ったモニタに表示される\n- 6.8 LightDM が表示されない、または TTY 出力のみがモニタに表示される\n- 6.9 Intel Graphics で LightDM の FPS が低い\n- 6.10 Pulseaudio が自動的に起動しない\n- 6.11 ホームディレクトリが暗号化されていると LightDM の表示に時間がかかる\n- 6.12 \"[ OK ] Reached target Graphical Interface.\" で起動がストップする\n- 6.13 Greeter に重複した GNOME エントリがあると Wayland セッションが動作しない\n- 6.14 初回ログイン時に必ずセクメンテーション違反が発生する\n- 6.15 ログインの無限ループ\n- 6.16 Wayland セッションで入力デバイスが動かない\n- 6.17 lightdm-webkit2-greeter がログインプロセスでエラーを出力する\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "lightdm パッケージをインストールしてください。開発版は lightdm-gitAUR でインストールできます。\n\n"
    },
    {
      "title": "Greeter",
      "level": 3,
      "content": "Greeter もインストールする必要があるでしょう。Greeter はユーザーにログイン情報の入力を求める GUI であり、セッションの選択なども行います。Greeter 無しで LightDM を使うことも可能ですが、自動ログインが設定されている場合に限ります。Greeter を使用する場合は、xorg-server をインストールし、さらに以下の greeter パッケージのどれかをインストールする必要があります。\n\nGTK ベースの greeter:\n\n- LightDM GTK Greeter — LightDM のための GTK greeter。これはデフォルトの greeter です。他の greeter が設定されていない場合、LightDM はこの greeter を使おうとします。\n\n- lightdm-pantheon-greeter — Elementary OS プロジェクトの greeter。\n\n- slick-greeter — lightdm-gtk-greeter よりも見た目に重点を置いた GTK ベースの greeter。元は Unity greeter からフォークされたもので、Linux Mint ではデフォルトです。\n\n- Web Greeter for LightDM — テーマに Webkit2 を使用する greeter。このプロジェクトの開発は2019年5月22日以降停止しています。\n\n- Mini-Greeter — 最小の、カスタマイズ可能な、シングルユーザーの GTK3 greeter。\n\n- Nody Greeter — ウェブの技術で素晴らしいテーマを作成できる LightDM greeter。Electron.js と NodeGTK、そして Node.js で作成されています。\n\nQt ベースの greeter:\n\n- Web Greeter — テーマに PyQtWebEngine を使用している、モダンで美しい greeter。lightdm-webkit2-greeter の後継です。\n\n- LightDM KDE Greeter — KDE による LightDM greeter。\n\n他の greeter:\n\n- lightdm-deepin-greeter — Deepin プロジェクトの greeter。\n\n- LightDM Elephant Greeter — 小さくシンプルな greeter。デフォルトでは cage Wayland コンポジタ内で動作します。\n\nlightdm-webkit2-greeter 用のテーマ:\n\n- Litarvan's LightDM WebKit2 theme — モダンで機能が豊富なテーマ。\n\n- Aether — 洗練された、扱いやすい Arch Linux テーマのログインスクリーン。\n\nweb-greeterAUR と nody-greeterAUR 用のテーマ:\n\n- Shikai — 美しく、カスタマイズ可能なテーマ。\n\nLightDM の設定ファイルの [Seat:*] セクションを変更することでデフォルトの greeter を設定することができます。例えば:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[Seat:*]\n...\ngreeter-session=lightdm-yourgreeter-greeter\n...\n```\n\nどの greeter が利用できるか確認できる方法としては、/usr/share/xgreeters ディレクトリ内のファイルをリストアップするというものがあります。それぞれの .desktop ファイルは1つの利用可能な greeter を表します。以下の例では、lightdm-gtk-greeter greeter と lightdm-webkit2-greeter greeter が利用可能です:\n\n```\n$ ls -1 /usr/share/xgreeters/\n```\n\n```\nlightdm-gtk-greeter.desktop\nlightdm-webkit2-greeter.desktop\n```\n\n"
    },
    {
      "title": "LightDM を有効にする",
      "level": 2,
      "content": "LightDM をブート時に起動するには lightdm.service を有効化してください。ディスプレイマネージャ#ディスプレイマネージャをロードする も参照。\n\n"
    },
    {
      "title": "コマンドラインツール",
      "level": 2,
      "content": "LightDM はコマンドラインツール dm-tool を提供しています。これを使うことで現在のシートのロック、セッションの切り替えなどができます。'最小主義の'ウィンドウマネージャを使っている場合やテストに便利です。利用できるコマンドを表示するには、次を実行してください:\n\n```\n$ dm-tool --help\n```\n\n"
    },
    {
      "title": "ユーザーの切り替え",
      "level": 3,
      "content": "LightDM の dm-tool コマンドを使って別々の tty に複数のユーザーをログインさせることができます。以下のコマンドは現在のセッションをロックするシグナルを送信して LightDM の greeter への切り替えを行って、新しいユーザーがログインできるようにします:\n\n```\n$ dm-tool switch-to-greeter\n```\n\n"
    },
    {
      "title": "テスト",
      "level": 2,
      "content": "まず、xorg-server-xephyr をインストールしてください。\n\nそして、LightDM を X アプリケーションとして実行してください:\n\n```\n$ lightdm --test-mode --debug\n```\n\n"
    },
    {
      "title": "任意の設定と調整",
      "level": 2,
      "content": "LightDM は、設定ファイル /etc/lightdm/lightdm.conf を編集することで設定することができます。\n\nまた、一部の greeter には独自の設定ファイルが存在しています。例えば:\n\nlightdm-gtk-greeter: /etc/lightdm/lightdm-gtk-greeter.conf (あるいは、lightdm-gtk-greeter-settings GUI を使用することもできます)。\n\nlightdm-webkit2-greeter: /etc/lightdm/lightdm-webkit2-greeter.conf\n\n"
    },
    {
      "title": "X セッションラッパー",
      "level": 3,
      "content": "xinit から移行したユーザは、セッションがシェルから起動しないことに気づくでしょう。これは、シェルはセッションを起動する (そして、セッションはシェルの環境変数を継承する) のに対し、LightDM はセッションを起動するがシェルを source しないことが原因です。LightDM はラッパースクリプトを実行することでセッションを起動し、最後にグラフィカル環境を起動します。デフォルトでは、/etc/lightdm/Xsession が実行されます。\n\n"
    },
    {
      "title": "環境変数",
      "level": 4,
      "content": "スクリプトは /etc/profile、~/.profile、/etc/xprofile、そして ~/.xprofile をこの順番で読み込みます。これらのファイルを source しないシェルを使用している場合は、ファイルを読み込む ~/.xprofile を作成してもよいです。以下の例では、zsh がログインシェルです:\n\n```\n~/.xprofile\n```\n\n```\n#!/bin/sh\n[ -f ~/.config/zsh/.zshenv ] && . ~/.config/zsh/.zshenv\n```\n\nセッションにおいて重要であるシェル変数 (GTK や QT のテーマ、GNUPG の場所、設定のオーバーライドなど) を定義している場合は、こうすることでログインシェルから起動せずにグラフィカル環境が環境変数にアクセスすることができるようになります。\n\n"
    },
    {
      "title": "キーマップ",
      "level": 4,
      "content": "スクリプトは /etc/X11/Xkbmap と ~/.Xkbmap で定義されている引数を使って Xkbmap を実行します。これらのファイルが存在しない場合、スクリプトは /etc/X11/Xmodmap と ~/.Xmodmap で定義されている引数を使って xmodmap を実行します。xkbmap を使用する場合、上記のファイルは cat を使ってパースされます。例:\n\n```\n~/.Xmodmap\n```\n\n```\n-model pc105 -layout us,us,tr -variant ,dvorak,f -option grp:caps_toggle\n```\n\nそれら以外の場合、セッションは X11 のシステムのデフォルトのキーマップを継承します。このキーマップは、xorg の設定ファイルを手動で編集するか、localectl set-x11-keymap を使用することで定義することができます。Xorg/キーボード設定#キーボードレイアウトの設定 を参照。\n\n"
    },
    {
      "title": "lightdm-gtk-greeter で複数のキーボード配列",
      "level": 4,
      "content": "事前定義済みのキーボード配列の中から配列を切り替えられるようにするには、ドロップダウンメニューを有効化し、配列を設定してください。lightdm-gtk-greeter-settings GUI を使用するか、設定ファイルを直接編集してください:\n\n```\n/etc/lightdm/lightdm-gtk-greeter.conf\n```\n\n```\n[greeter]\nindicators = ~host;~spacer;~clock;~spacer;~layout;~language;~session;~a11y;~power\n```\n\n複数の配列を設定するには localectl を使用してください。例えば、de とその \"バリアント\" である neo を設定し、後者をプライマリとするには:\n\n```\n# localectl --no-convert set-x11-keymap de,de pc105 neo,\n```\n\n末尾のコンマは2つめの de の空白のバリアントを意味していることに注意してください。\n\n"
    },
    {
      "title": "背景画像・色を変更する",
      "level": 3,
      "content": "背景には16進数のカラーコードか画像を設定することができます。一部の greeter は、ログイン画面による背景選択、ランダムな背景などのよりロバストな背景オプションを提供しています。\n\n"
    },
    {
      "title": "GTK greeter",
      "level": 4,
      "content": "lightdm-gtk-greeter-settings GUI を使って設定することができます。\n\nGreeter 画面の壁紙をカスタマイズしたい場合は、/etc/lightdm/lightdm-gtk-greeter.conf を編集して [greeter] セクション内で background 変数を定義する必要があります。例:\n\n```\n/etc/lightdm/lightdm-gtk-greeter.conf\n```\n\n```\n[greeter]\nbackground=/usr/share/pixmaps/black_and_white_photography-wallpaper-1920x1080.jpg\n```\n\nGTK3 テーマは [greeter] セクション内の theme-name 変数で指定することができます。アイコンとカーソルのテーマも同じように設定できます。例:\n\n```\n/etc/lightdm/lightdm-gtk-greeter.conf\n```\n\n```\n[greeter]\ntheme-name = Tela\nicon-theme-name = Tela\ncursor-theme-name = Tela\ncursor-theme-size = 32\nfont-name = Cantarell 20\n```\n\n"
    },
    {
      "title": "Webkit2 greeter",
      "level": 4,
      "content": "lightdm-webkit2-greeter では、背景画像をログイン画面で直接選択することができます。また、Material テーマを使用する場合は、起動するたびにランダムな画像を表示するオプションも提供されています。デフォルトでは、画像は /usr/share/backgrounds から読み込まれます。lightdm-webkit2-greeter.conf を編集することで背景画像を直接変更することができます。例えば:\n\n```\n/etc/lightdm/lightdm-webkit2-greeter.conf\n```\n\n```\n[branding]\nbackground_images = /usr/share/backgrounds\n```\n\n"
    },
    {
      "title": "Slick Greeter",
      "level": 4,
      "content": "lightdm-settingsAUR GUI を使用してください。\n\n"
    },
    {
      "title": "アバターを変更する",
      "level": 3,
      "content": "まず、accountsservice パッケージがインストールされていることを確認し、その後、以下のようにセットアップしてください。username の部分はユーザーのログイン名に置き換えてください。\n\n- 96x96 の PNG 画像ファイルを使って /var/lib/AccountsService/icons/username.png ファイルを作成してください。その他の画像フォーマットも利用可能です (例えば JPEG)。\n- あるいは、デフォルトの設定がすでにユーザーのホームディレクトリのパスを使用している場合は、画像ファイルを /home/username/.face として配置し、次の手順を飛ばしてください。\n- アカウントの設定ファイル /var/lib/AccountsService/users/username を編集あるいは作成し、以下の設定を追加してください:\n\n```\n[User]\nIcon=/var/lib/AccountsService/icons/username.png\n```\n\nここでのファイル名は、1番目の手順で作成したアイコンファイルでなければなりません。なので、必要に応じてファイル名の拡張子を変更してください。\n\n"
    },
    {
      "title": "Arch の 64x64 アイコンを使う",
      "level": 3,
      "content": "archlinux-artworkAUR パッケージには素晴らしいサンプルが含まれており、/usr/share/archlinux/icons にインストールされます。以下のように /usr/share/icons/hicolor/64x64/devices にコピーすることが可能です:\n\n```\n# find /usr/share/archlinux/icons -name \"*64*\" -exec cp {} /usr/share/icons/hicolor/64x64/devices \\;\n```\n\nコピーした後は、archlinux-artworkAUR パッケージは削除してかまいません。\n\n"
    },
    {
      "title": "自動ログインを有効にする",
      "level": 3,
      "content": "LightDM の設定ファイルを編集して、以下の設定をアンコメントし、正しく設定してください:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[Seat:*]\nautologin-user=username\n```\n\nパスワードを入力しないで自動的にログインできるようにするには、ユーザを autologin グループに追加する必要があります:\n\n```\n# groupadd -r autologin\n# gpasswd -a username autologin\n```\n\nLightDM は ~/.dmrc に指定されたセッションを使ってログインします。このファイルの設定をオーバーライドするには、lightdm.conf で autologin-session を指定してください:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[Seat:*]\nautologin-user=username\nautologin-session=session\n```\n\n有効なセッション名のリストは、X セッションは /usr/share/xsessions/*.desktop を、Wayland セッションは /usr/share/wayland-sessions/*.desktop を一覧表示すればわかります。\n\n"
    },
    {
      "title": "インタラクティブなパスワードレスログインを有効化する",
      "level": 3,
      "content": "LightDM は PAM を経由します。なので、PAM の lightdm 設定ファイルを設定する必要があります:\n\n```\n/etc/pam.d/lightdm\n```\n\n```\n#%PAM-1.0\nauth        sufficient  pam_succeed_if.so user ingroup nopasswdlogin\nauth        include     system-login\n...\n```\n\n次に、パスワードを入力せずにインタラクティブにログインできるようにするために、あなたのユーザを nopasswdlogin グループと autologin グループに追加する必要があります:\n\n```\n# groupadd -r nopasswdlogin\n# groupadd -r autologin\n# gpasswd -a username nopasswdlogin\n# gpasswd -a username autologin\n```\n\n自動ログインし、さらにパスワード無しで再ログインできるユーザアカウントを作成するには、両方のグループに含まれるユーザを作成してください。例えば:\n\n```\n# useradd -mG autologin,nopasswdlogin username\n```\n\n"
    },
    {
      "title": "ゲストセッションを有効化する",
      "level": 3,
      "content": "(システムの設定を変えずに) LightDM でゲストセッションを有効化するには、少なくとも以下の2つが必要です:\n\n1. guest-account-script: guest-account をデフォルトとし、以下の2つのコマンドを受け入れるスクリプト: add (一時的なゲストシステムアカウントを作成し、作成されたアカウントのユーザ名を返します) remove アカウント名 (対応するアカウントを削除します)\n1. 作成されたゲストアカウントを追加する autologin グループ (参照: /etc/pam.d/lightdm-autologin)。\n\n- add (一時的なゲストシステムアカウントを作成し、作成されたアカウントのユーザ名を返します)\n- remove アカウント名 (対応するアカウントを削除します)\n\nLightDM でゲストセッションを有効化する AUR パッケージが2つあります:\n\n- lightdm-guestAUR: 上流の (ほぼ変更されていない) guest-session スクリプトと lightdm 自体を提供します。\n- lightdm-guest-accountAUR: スクリプトの最小バージョンのみを提供します。\n\n"
    },
    {
      "title": "システムユーザーとサービスユーザーを隠す",
      "level": 3,
      "content": "システムユーザーをログイン画面で表示されないようにするには、任意の依存パッケージ accountsservice をインストールするか、ユーザーの名前を /etc/lightdm/users.conf の hidden-users に追加してください。前者の方法ではユーザーを追加・削除したときにリストを更新する必要はありません。\n\n"
    },
    {
      "title": "SLiM からの移行",
      "level": 3,
      "content": "xinitrc の中身を xprofile に移動し、ウィンドウマネージャやデスクトップ環境を起動するコマンドを削除してください。\n\n"
    },
    {
      "title": "~/.xinitrc を使ってログイン",
      "level": 3,
      "content": "ディスプレイマネージャ#セッションとして ~/.xinitrc を実行 を見てください。\n\n"
    },
    {
      "title": "NumLock をデフォルトでオンにする",
      "level": 3,
      "content": "numlockx パッケージをインストールし、/etc/lightdm/lightdm.conf を編集してください:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[Seat:*]\ngreeter-setup-script=/usr/bin/numlockx on\n```\n\n"
    },
    {
      "title": "デフォルトセッション",
      "level": 3,
      "content": "他の DM と同じように、Lightdm は最後に選択された xsession を ~/.dmrc に保存します。詳しくは ディスプレイマネージャ#セッション設定 を見てください。\n\n"
    },
    {
      "title": "GTK greeter",
      "level": 4,
      "content": "/etc/lightdm/lightdm-gtk-greeter.conf を編集して position 変数に値を入力する必要があります。x 値と y 値を入れることができ、絶対座標 (ピクセル) と相対座標 (パーセント) で指定できます。また、ウィンドウのアンカーの位置 (start、center、end) を指定することもできます。値はカンマで区切ります。\n\n例:\n\n```\nposition=200,start 50%,center\n```\n\n"
    },
    {
      "title": "VNC サーバー",
      "level": 3,
      "content": "Lightdm を使って VNC 経由で接続することも可能です。サーバ側に tigervnc をインストールしてください。任意で、クライアント側の PC にも VNC クライアントとしてインストールしてください。\n\nサーバ側で root として認証パスワードをセットアップしてください:\n\n```\n# vncpasswd /etc/vncpasswd\n```\n\nそして、以下のように LightDM の設定ファイルを編集してください。listen-address の設定で localhost からの接続のみをリッスンするように VNC を設定していることに注意してください。これは、SSH とポートフォワーディング経由での接続のみを許可するためです。SSH クライアントでは、トンネルの接続先として localhost:5900 のみを使うようにしてください。デュアルスタックのネットワーク接続では 127.0.0.1:5900 や ::1:5900 は信頼性がありません。セキュアでない接続も許可するようにしたい場合、この設定を無効化してください。\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[VNCServer]\nenabled=true\ncommand=Xvnc -rfbauth /etc/vncpasswd\nport=5900\nlisten-address=localhost\nwidth=1024\nheight=768\ndepth=24\n```\n\n設定したら、TigerVNC#クライアント側 に書かれているように SSH トンネルを開いてローカルホストに接続してください。\n\n"
    },
    {
      "title": "light-locker を使って画面をロック",
      "level": 3,
      "content": "light-locker は LightDM を使用してユーザーを認証するシンプルなスクリーンロッカーです。インストールして起動したら以下のコマンドでセッションをロックできます:\n\n```\n$ light-locker-command -l\n```\n\n上記コマンドを使うにはセッションの最初に light-locker を起動する必要があります。デフォルトでは、これは XDG 自動起動を使用して有効化されます。その他のオプションは 自動起動 を見てください。\n\n"
    },
    {
      "title": "マルチモニターのセットアップ",
      "level": 3,
      "content": "マルチモニター環境では LightDM がモニターの解像度を適切に設定しないことがあります。以下の Xorg 設定はデュアルモニターの環境で機能します: 大きなプライマリスクリーンを左側に配置し、サブの小さい方のスクリーンをプライマリの右側に配置します。順番は逆にすることも変更することもできます。\n\n```\n/etc/X11/xorg.conf.d/52-resolution-fix.conf\n```\n\n```\nSection \"Monitor\"\n    Identifier \"DP1\"\n    Option \"PreferredMode\" \"3840x2160\"\n    Option \"Primary\" \"1\"\nEndSection\nSection \"Monitor\"\n    Identifier \"eDP1\"\n    Option \"PreferredMode\" \"1920x1080\"\n    Option \"RightOf\" \"DP1\"\nEndSection\n```\n\nこれは、/etc/lightdm/lightdm.conf の display-setup-script の設定を不要にします。\n\n"
    },
    {
      "title": "自動ログインが機能しない",
      "level": 3,
      "content": "/etc/lightdm/lightdm.conf 内の autologin-user= に適切な値が設されていることを確認してください。末尾に空白があるとエラーが発生します。\n\n自動ログインが失敗した時に画面に何も表示されない、あるいはログイン画面に即座に戻される場合、logind-check-graphical=true を設定する必要があるかもしれません。\n\n自動ログインの用途には lightdm-autologin-greeter-gitAUR をインストールすることもできます。\n\n"
    },
    {
      "title": "現在の設定を見る",
      "level": 3,
      "content": "現在の設定を見るには、以下を実行してください:\n\n```\n$ lightdm --show-config\n```\n\n現在の設定、及びそれらの設定が読み込まれた元の設定ファイルが表示されます。\n\n"
    },
    {
      "title": "LightDM が起動せず、画面が点滅する",
      "level": 3,
      "content": "起動時に画面が点滅し続け、LightDM が表示されない場合、LightDM の設定ファイルで greeter を正しく定義しているか確認してください。GTK greeter を適切に定義している場合は、xsessions-directory (デフォルト: /usr/share/xsessions) が存在していて少なくとも一つは .desktop ファイルが含まれていることを確認してください。\n\n最後に使用したセッションが利用できなくなった時も同じ問題が lightdm の起動時に発生することがあります (例えば gnome を使った後 gnome-session パッケージを削除した場合): 一番簡単な回避策は削除したパッケージを一時的に戻すことです。もうひとつの解決策は:\n\n```\n# dbus-send --system --type=method_call --print-reply --dest=org.freedesktop.Accounts /org/freedesktop/Accounts/User1000 org.freedesktop.Accounts.User.SetXSession string:xfce\n```\n\nこの例は、セッション \"xfce\" をユーザー ID 1000 のユーザーのデフォルトとして設定します。\n\n"
    },
    {
      "title": "間違ったロケールが表示される",
      "level": 3,
      "content": "LightDM でロケールが正しく表示されない場合はあなたが使用しているロケールを /etc/environment に追加してください:\n\n```\nLANG=ja_JP.utf8\n```\n\nLightDM や greeter でシステムロケール以外の言語を使いたい場合、ドロップインファイルで Environment= オプションを使用することで可能です。\n\n"
    },
    {
      "title": "GTK greeter でアイコンが表示されない",
      "level": 3,
      "content": "lightdm-gtk-greeter を greeter として使っていてプレースホルダ画像がアイコンとして表示される場合、正しいアイコンテーマとテーマを設定してください。次のファイルを確認してください:\n\n```\n/etc/lightdm/lightdm-gtk-greeter.conf\n```\n\n```\n[greeter]\ntheme-name=mate      # /usr/share/themes/ 以下のディレクトリの名前\nicon-theme-name=mate # /usr/share/icons/ 以下の完全なアイコンセットディレクトリの名前\n```\n\n"
    },
    {
      "title": "ログインしようとすると LightDM がフリーズする",
      "level": 3,
      "content": "適当なユーザー名・パスワードを入力してログインしようとすると、LightDM がフリーズしデスクトップを起動できないことがあります。この問題を修正するには、gdk-pixbuf2 パッケージを再インストールしてください。フォーラムへの投稿を参照。\n\n"
    },
    {
      "title": "LightDM が間違ったモニタに表示される",
      "level": 3,
      "content": "マルチモニタを使っていると、LightDM が間違ったモニタに表示されることがあります (例: プライマリモニタが右側にある場合)。LightDM のログイン画面が特定のモニタで表示されるように指定するには、/etc/lightdm/lightdm.conf を編集して display-setup-script パラメータを次のように変更してください:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\ndisplay-setup-script=xrandr --output HDMI-1 --primary\n```\n\nHDMI1 は実際のモニタの ID に置き換えてください、xrandr コマンドの出力で確認できます。\n\nもしくは、GTK greeter を使用している場合、/etc/lightdm/lightdm-gtk-greeter.conf を編集して以下のように active-monitor パラメータを追加することもできます:\n\n```\n/etc/lightdm/lightdm-gtk-greeter.conf\n```\n\n```\n[greeter]\nactive-monitor=0\n```\n\n0 は適当なディスプレイの番号に置き換えてください。\n\n"
    },
    {
      "title": "LightDM が表示されない、または TTY 出力のみがモニタに表示される",
      "level": 3,
      "content": "システムの起動が速すぎて、グラフィックドライバーが読み込まれるよりも先に LightDM サービスが起動してしまうことがあります。このような場合、lightdm.conf ファイルに以下の設定を追加してください:\n\n```\n/etc/lightdm/lightdm.conf\n```\n\n```\n[LightDM]\nlogind-check-graphical=true\n```\n\n上記の設定で LightDM はグラフィックデバイスの準備が完了するのを待ってから、greeter を生成する、またはセッションを自動起動します。\n\nしかし、新しいバージョンの LightDM では、これがデフォルトの設定になっています。その結果、一部のハードウェアでは、グラフィックドライバが適切に検出されず、LightDM が greeter を起動しない場合があります (ブートしてシステムが安定した後でも)。この場合、この設定を false に設定して、グラフィックドライバのチェックをせずに greeter を起動するように強制的してください。\n\n"
    },
    {
      "title": "Intel Graphics で LightDM の FPS が低い",
      "level": 3,
      "content": "Intel graphics#AccelMethod を参照。\n\n"
    },
    {
      "title": "Pulseaudio が自動的に起動しない",
      "level": 3,
      "content": "PulseAudio#実行 を参照。\n\n"
    },
    {
      "title": "ホームディレクトリが暗号化されていると LightDM の表示に時間がかかる",
      "level": 3,
      "content": "一部の LightDM テーマは、ホームディレクトリ内のアバター画像ファイルにアクセスしようとします。ホームディレクトリが暗号化されている場合、LightDM はホームディレクトリにアクセスできず、フリーズします。以下のどちらかの方法により、これを防止できます:\n\n- #アバターを変更する で説明されているようにアバターを設定する\n- lightdm-gtk-greeter の場合のみ: /etc/lightdm/lightdm-gtk-greeter.conf で hide-user-image = true を設定する\n\n"
    },
    {
      "title": "\"[ OK ] Reached target Graphical Interface.\" で起動がストップする",
      "level": 3,
      "content": "/etc/nsswitch.conf を変更している場合、ユーザとグループの探索に失敗することがあります。これは、/etc/nslcd.conf で nss_initgroups_ignoreusers ALLLOCAL を設定せずに nsswitch.conf のグループに ldap が含まれている場合に起こります。\n\n"
    },
    {
      "title": "Greeter に重複した GNOME エントリがあると Wayland セッションが動作しない",
      "level": 3,
      "content": "一部の greeter (例: lightdm-webkit2-greeter) は、2つのセッションが同一の名前を持つことをサポートしていません [1]。重複したエントリがあるか確認するには:\n\n```\n$ ls -1 /usr/share/wayland-sessions /usr/share/xsessions\n```\n\n/usr/share/xsessions 内の重複したエントリの名称を変更してください。例えば:\n\n```\n# mv /usr/share/xsessions/gnome.desktop /usr/share/xsessions/gnome.desktop.disabled\n```\n\n"
    },
    {
      "title": "初回ログイン時に必ずセクメンテーション違反が発生する",
      "level": 3,
      "content": "ネットワーク設定#ホスト名の設定 にあるように、ホスト名を設定してください。FS#47694 も参照してください。\n\n"
    },
    {
      "title": "ログインの無限ループ",
      "level": 3,
      "content": "正しいユーザ名とパスワードを入力しても画面が真っ暗になり、何度やってもログイン画面に戻るというループに陥った場合、rm ~/.Xauthority を実行する (つまり、無限ループが発生しているユーザの問題のある .Xauthority を削除する) と解決することがあります。\n\nもう一つの理由は、あなたが \"lightdm.conf\" を一から作り直そうとして、以下の行を入れ忘れたのかもしれません:\n\n```\nsession-wrapper=/etc/lightdm/Xsession\n```\n\nこの行がないと、LightDM は、Arch Linux には存在しない \"lightdm-session\" をセッションラッパーとして使おうとしてしまいます。\n\nlightdm.conf ファイルで session-wrapper を設定したが、lightdm のログではデフォルトの session-wrapper が使われていると出力される場合、スタートアップ中に lightdm.conf がアクセスできる状態にあることを確認してください。そのような例としては、lightdm.conf をホームディレクトリ内のファイルへのシンボリックリンクにしたが、LightDM サービスが開始する前はホームディレクトリがマウントされていないような環境があります。そのようなケースでは、LightDM はデフォルトの session-wrapper にフォールバックします。\n\n"
    },
    {
      "title": "Wayland セッションで入力デバイスが動かない",
      "level": 3,
      "content": "Wayland セッションを開始すると、入力デバイスが動かなくなり、物理的に抜き差ししても治らないことがあります。LightDM issue 63 を参照してください。\n\n回避策は、/etc/lightdm/Xsession に sleep 1 を追加して Wayland コンポジタの開始を遅延させることです。archlinux/packaging/packages/lightdm!4 は、Arch パッケージに先の回避策を適用した例です。\n\n"
    },
    {
      "title": "lightdm-webkit2-greeter がログインプロセスでエラーを出力する",
      "level": 3,
      "content": "\"an error was detected in the current theme that could interfere with the system login process\" のようなメッセージが Greeterの起動時に出力される場合は次のコマンドで詳細なログを確認することができます。\n\n```\nlightdm-webkit2-greeter\n```\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- Ubuntu Wiki の記事\n- Gentoo:LightDM/ja\n- GitHub の LightDM\n\n"
    }
  ]
}