{
  "title": "Transmission (Українська)",
  "url": "https://wiki.archlinux.org/title/Transmission_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Transmission — це легкий BitTorrent клієнт, що працює на багатьох платформах.\n\n"
    },
    {
      "title": "Встановлення",
      "level": 2,
      "content": "Встановити Transmission можна в декількох пакетах:\n\n- transmission-cli – демон, з консольним, та Веб інтерфейсом.\n- transmission-gtk – графічний інтерфейс на GTK 3.\n- transmission-qt – графічний інтерфейс на Qt 5.\n- tremcAUR or tremc-gitAUR – псевдографічний консольний інтерфейс для демона.\n- stigAUR or stig-gitAUR – псевдографічний консольний інтерфейс для демона.\n- transmission-remote-gtk – графічний інтерфейс для демона на GTK.\n\n"
    },
    {
      "title": "Налагодження графічного варіанту",
      "level": 2,
      "content": "Обидва графічних варіанти: transmission-gtk та transmission-qt, можуть працювати самостійно, без запущеного демона. Ці програми налаштовані так, щоб нормально працювати з самого початку, але користувачі мають змогу змінити деякі характеристики. В нормі, файли налаштувань знаходяться в ~/.config/transmission.\n\nДізнатись як правильно редагувати файл налаштувань можна на сторінці Transmission в Github.\n\n"
    },
    {
      "title": "Демон Transmission та текстовий інтерфейс",
      "level": 2,
      "content": "transmission-cli складається з команд:\n\n"
    },
    {
      "title": "Запуск і зупинка демона",
      "level": 3,
      "content": "Демона transmission можна запустити:\n\n- Як користувача під ім'ям transmission, увімкнувши transmission.service. Користувача можна замінити, як сказано у розділі #Вибір користувача.\n- Від вашого імені, запустивши команду:\n\n```\n$ transmission-daemon\n```\n\nПочавши роботу, демон створить початковий файл налаштувань. Дивіться #Налагодження демона.\n\nДемона можна зупинити командою:\n\n```\n$ pkill -3 transmission-daemon\n```\n\nЗупинити Transmission можна також командою:\n\n```\n$ transmission-remote --exit\n```\n\n"
    },
    {
      "title": "Протидія захаращенню журналу",
      "level": 3,
      "content": "В ході роботи, transmission-daemon може зробити багато небажаних записів до журналу. Їх можна обмежити, запустивши програму всередині невеликого скрипта-обгортки. Приклад нижче містить також і екранні повідомлення:\n\n```\ntranswrap.sh\n```\n\n```\n#!/bin/zsh\nkillall transmission-daemon 2> /dev/null\ntransmission-daemon --foreground --log-info 2>&1 | while read line; do\n\techo $line |\n\t\tgrep -v \"announcer.c:\\|platform.c:\\|announce done (tr-dht.c:\" |\n\t\tgrep -v \"Saved.*variant.c:\" |\n\t\twhile read line; do\n\t\t\techo $line | grep -q \"Queued for verification (verify.c:\" &&\n\t\t\t\tnotify-send --app-name=\"Transmission Started\" \"${line#* * }\"\n\t\t\techo $line | grep -q \"changed from .Incomplete. to .Complete.\" &&\n\t\t\t\tnotify-send --app-name=\"Transmission Complete\" \"${line#* * }\"\n\t\t\techo $line | systemd-cat --identifier=\"TransWrap\" --priority=5\n\t\tdone 2>&1 > /dev/null\n\tdone&disown\n```\n\n"
    },
    {
      "title": "Netctl",
      "level": 4,
      "content": "Можливо, вам хочеться запускати transmission лише в деяких мережах. Наведений код перевіряє чи комп'ютер підключений до мережі з дозволеного списку і лише тоді запускає transmission-daemon.\n\n```\n/etc/netctl/hooks/90-transmission.sh\n```\n\n```\n#!/bin/bash\n\n# SSID дозволених мереж.\ndeclare -A ssids=(\n    [\"network_1\"]=y\n    [\"network_2\"]=y\n)\n\nif [[ ${ssids[$SSID]} ]]; then\n    case $ACTION in\n        CONNECT|REESTABLISHED)\n            # Потрібно почекати, інакше не займає 9091-ий порт.\n            sleep 30\n            systemctl start transmission\n            ;;\n        *)\n            systemctl stop transmission\n            ;;\n    esac\nfi\n```\n\n"
    },
    {
      "title": "Wicd",
      "level": 4,
      "content": "Створіть стартовий скрипт в теці /etc/wicd/scripts/postconnect та скрипт зупинки в теці /etc/wicd/scripts/predisconnect. Не забудьте дозволити їх виконання. Наприклад:\n\n```\n/etc/wicd/scripts/postconnect/transmission\n```\n\n```\n#!/bin/bash\n\nsystemctl start transmission\n```\n\n```\n/etc/wicd/scripts/predisconnect/transmission\n```\n\n```\n#!/bin/bash\n\nsystemctl stop transmission\n```\n\n"
    },
    {
      "title": "Вибір користувача",
      "level": 3,
      "content": "Оберіть, як ви хочете запускати transmission:\n\n- Як окремого користувача, з ім'ям transmission за замовчуванням (радимо цей варіант, бо він безпечніший).\n\nВ нормі, transmission створює користувача та групу з назвою transmission, файли якого зберігаються в /var/lib/transmission/, та працює як цей \"користувач\". Це зроблено для підвищення безпеки: щоб transmission, та його завантаження, не мали доступу до файлів за межами /var/lib/transmission/. Налагодження, операції, та доступ до завантажень потрібно робити від імені кореневого користувача (root) (Тобто, з sudo).\n\n- Від вашого власного імені.\n\nЩоб це зробити, перезапишіть файл сервісу, та вкажіть ваше власне ім'я:\n\n```\n/etc/systemd/system/transmission.service.d/username.conf\n```\n\n```\n[Service]\nUser=ім'я вашого користувача\n```\n\n"
    },
    {
      "title": "Налагодження демона",
      "level": 3,
      "content": "Створіть початковий файл налаштувань запустивши демона.\n\n- Якщо запустили як користувача transmission: файлом налаштувань буде /var/lib/transmission/.config/transmission-daemon/settings.json.\n\n- Якщо запустили від власного імені: файл матиме назву ~/.config/transmission-daemon/settings.json.\n\nНалагодити демона можна або використовуючи клієнта Transmission, або веб інтерфейс, що доступний за адресою http://localhost:9091 в браузері.\n\nНа сайті Transmission є стаття про його налагодження: https://github.com/transmission/transmission/wiki/Editing-Configuration-Files\n\nТим, хто запускає демона під ім'ям transmission, радимо створити спільну теку з правильними дозволами, щоб до неї мав доступ користувач transmission та системний користувач, та оновити відповідні налаштування. Наприклад:\n\n```\n# mkdir /mnt/data/torrents\n# chown -R facade:transmission /mnt/data/torrents\n# chmod -R 775 /mnt/data/torrents\n```\n\nТепер до /mnt/data/torrents матиме доступ системний користувач facade та всі члени групи transmission, до якої належить і користувач transmission. Не дозволяйте запис та зчитування з теки (себто, не міняйте chmod теки на 777). Натомість, дайте окремим користувачам/групам правильні дозволи до правильних директорій.\n\nАбо ж, додайте користувача до групи transmission (#usermod -a -G transmission ваше_ім'я) та змініть дозволи до тек /var/lib/transmission та /var/lib/transmission/Downloads так, щоб члени групи transmission мали повний доступ до них.\n\n"
    },
    {
      "title": "Довірені хости",
      "level": 4,
      "content": "Якщо ви бажаєте звертатись до демона Transmission по мережі використовуючи назву хоста сервера, то вам варто додати цю назву до rpc-host-whitelist у settings.json. Без цього, ви отримаєте помилку \"421 Misdirected Request\" коли спробуєте підключитись до сервера.\n\nЦього не потрібно робити, якщо ви підключаєтесь до сервера демона по IP адресі.\n\n"
    },
    {
      "title": "Тека під наглядом",
      "level": 4,
      "content": "Якщо ви хочете Щоб .torrent файли із теки додавались автоматично, але параметри watch-dir watch-dir-enabled не працюють, то спробуйте запустити transmission з ключем -c /шлях/до/бажаної/теки.\n\nЯкщо ви користуєтесь systemd, поправте transmission.service як описано у статті systemd#Editing provided units.\n\n"
    },
    {
      "title": "Увімкнути IPv6",
      "level": 4,
      "content": "В нормі, до демона можна підключитись лише через IPv4. Щоб він слухав і IPv6, відкрийте файл settings.json та замініть значення параметра rpc-bind-address на \"::\".\n\n"
    },
    {
      "title": "Приклади команд",
      "level": 4,
      "content": "Якщо вам потрібно прибрати всі завершені торенти, скористайтесь цією командою з вашими ім'ям і паролем:\n\n```\n# transmission-remote -n 'ім'я:пароль' -l | grep 100% | awk '{print $1}'| paste -d, -s | xargs -i transmission-remote -t {} -r\n```\n\nРоздавати вже скачані торенти:\n\n```\n# transmission-remote [HOST] --torrent=example.torrent -a example.torrent --verify --download-dir=/шлях/до/теки --start\n```\n\n"
    },
    {
      "title": "Через графічний інтерфейс",
      "level": 3,
      "content": "Як тільки ви встановите Transmission , то зможете з легкістю відкрити веб інтерфейс. Просто клацніть по меню edit та виберіть preferences. Перейдіть на вкладку Remote та увімкніть Allow remote access.\n\nТут же ви можете змінити порт, який займає Transission з 9091 на інший.\n\nПеревірте Use authentication введіть ім'я й пароль щоб мати змогу авторизуватись.\n\nБуде безпечніше, якщо ви забороните доступ з більшости IP адрес, увімкнувши Only allow these IP addresses.\n\nТепер, ви маєте змогу відкрити веб інтерфейс. Клацніть на Open web client щоб відкрити браузер. Або, самотужки, напишіть в браузері адресу http://IP_АДРЕСА:ПОРТ\n\nЯкщо ви не міняли порт, то він буде 9091: вам треба буде перейти за посиланням http://localhost:9091\n\n"
    },
    {
      "title": "Через командний рядок",
      "level": 3,
      "content": "Ви не зобов'язані мати графічний варіант Transmission щоб мати веб інтерфейс, демон теж його має. Ви можете відкрити його не докладаючи ніяких додаткових зусиль. Прочитайте розділ #Запуск і зупинка демона\n\nТа все ж, ви можете задати все згадане в попередньому розділі:\n\n```\n$ transmission-daemon --auth --username arch --password linux --port 9091 --allowed \"127.0.0.1\"\n```\n\nце те ж саме що й\n\n```\n$ transmission-daemon -t -u arch -v linux -p 9091 -a \"127.0.0.1\"\n```\n\n"
    },
    {
      "title": "Теми",
      "level": 3,
      "content": "Якщо веб інтерфейс здається вам застарілим та негарним, спробуйте цю простеньку тему.\n\nА https://github.com/ronggang/transmission-web-control — це повна заміна стандартного інтерфейсу, яку можна використовувати обабіч із ним.\n\n"
    },
    {
      "title": "Cannot access the daemon over the network",
      "level": 3,
      "content": "The daemon is started after network.service was initialised. However, if you enable the service dhcpcd as opposed to the device-specific service, such as dhcpcd@enp1s0.service for example, it may happen that Transmission is started too early and cannot bind to the network interface. Thus, the web interface is unreachable. A possible solution is to add the Requires line to the unit's configuration file:\n\n```\n/etc/systemd/system/transmission.service.d/fixdep.conf\n```\n\n```\n[Unit]\nRequires=network.target\n```\n\n"
    },
    {
      "title": "Не відкривається веб інтерфейс",
      "level": 3,
      "content": "```\n404: Not Found\n\nCouldn't find Transmission's web interface files!\n\nUsers: to tell Transmission where to look, set the TRANSMISSION_WEB_HOME environment variable to the folder where the web interface's index.html is located.\n\nPackage Builders: to set a custom default at compile time, #define PACKAGE_DATA_DIR in libtransmission/platform.c or tweak tr_getClutchDir () by hand.\n```\n\nНавіть якщо ви встановили графічну версію, ви не зможете відкрити веб інтерфейс без transmission-cli.\n\n"
    },
    {
      "title": "Не виходить встановити буфер прийому/відправки",
      "level": 3,
      "content": "Іноді, Transmission може записувати до журналу такі рядки:\n\n```\nUDP Failed to set receive buffer: requested 4194304, got 425984\nUDP Failed to set send buffer: requested 1048576, got 425984\n```\n\nЦе можна виправити виставивши net.core.rmem_max=4194304 та net.core.wmem_max=1048576 з sysctl.\n\n"
    },
    {
      "title": "Див. також",
      "level": 2,
      "content": "- Transmission вікі\n- Використання без інтерфейсу\n- Transmission вікі на GitHub\n\n"
    }
  ]
}