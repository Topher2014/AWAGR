{
  "title": "PCManFM (日本語)",
  "url": "https://wiki.archlinux.org/title/PCManFM_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- LXDE\n- Openbox\n- ファイルマネージャの機能\n- SpaceFM\n- Thunar\n- GNOME Files\n- Nemo\n\nPCManFM はフリーのファイルマネージャアプリケーションで、LXDE の標準ファイルマネージャです。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 開発バージョン\n- 2 デスクトップの管理 2.1 デスクトップの優先 2.2 新しいアイコンの作成\n- 3 デーモンモード\n- 4 自動起動\n- 5 追加機能\n- 6 ヒントとテクニック 6.1 画像ファイル以外のサムネイルを表示 6.2 ターミナルエミュレータの設定 6.3 アーカイバの統合 6.4 コンテキストメニューへのカスタム項目の追加 6.5 Create New... から使用するテンプレート 6.6 サムネイル\n- 7 トラブルシューティング 7.1 \"他のアプリケーションで開く\" ダイアログウィンドウが空 7.2 アプリケーションが表示されない 7.3 アイコンが表示されない 7.4 マウスボタンで \"次・前のフォルダ\" 機能が使えない 7.5 --desktop パラメータが機能しなかったり X サーバーがクラッシュする 7.6 ターミナルエミュレータの高度な設定が保存されない 7.7 PCManFM にファイルソートの設定を記憶させる 7.8 ドライブをマウントしようとすると \"Not authorized\" エラーが発生する 7.9 Operation not supported 7.10 システム再起動の度にパスワードが消える\n\n- 1.1 開発バージョン\n\n- 2.1 デスクトップの優先\n- 2.2 新しいアイコンの作成\n\n- 6.1 画像ファイル以外のサムネイルを表示\n- 6.2 ターミナルエミュレータの設定\n- 6.3 アーカイバの統合\n- 6.4 コンテキストメニューへのカスタム項目の追加\n- 6.5 Create New... から使用するテンプレート\n- 6.6 サムネイル\n\n- 7.1 \"他のアプリケーションで開く\" ダイアログウィンドウが空\n- 7.2 アプリケーションが表示されない\n- 7.3 アイコンが表示されない\n- 7.4 マウスボタンで \"次・前のフォルダ\" 機能が使えない\n- 7.5 --desktop パラメータが機能しなかったり X サーバーがクラッシュする\n- 7.6 ターミナルエミュレータの高度な設定が保存されない\n- 7.7 PCManFM にファイルソートの設定を記憶させる\n- 7.8 ドライブをマウントしようとすると \"Not authorized\" エラーが発生する\n- 7.9 Operation not supported\n- 7.10 システム再起動の度にパスワードが消える\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "次のパッケージのいずれかを インストール して下さい。\n\n- GTK 2: pcmanfm\n- GTK 3: pcmanfm-gtk3\n- Qt5: pcmanfm-qt\n\nオプションで、ゴミ箱のサポート、udisks によるボリュームのマウント、およびリモートファイルシステムのために gvfs もインストールします。\n\n"
    },
    {
      "title": "開発バージョン",
      "level": 3,
      "content": "開発バージョンは AUR から入手できます。\n\n- GTK 2: pcmanfm-gitAUR\n- Qt5: pcmanfm-qt-gitAUR\n- Qt6: pcmanfm-qt6-gitAUR\n\n"
    },
    {
      "title": "デスクトップの管理",
      "level": 2,
      "content": "PCManFM で壁紙を設定したりデスクトップアイコンの使用を有効化するには:\n\n```\npcmanfm --desktop\n```\n\nウィンドウマネージャのネイティブのデスクトップメニューが PCManFM のデスクトップメニューに置き換わります。また、PCManFM のメニューから Desktop preferences を選択して Desktop タブの Right click shows WM menu オプションを有効にすることでウィンドウマネージャのメニューに簡単に戻すことが可能です。\n\n"
    },
    {
      "title": "デスクトップの優先",
      "level": 3,
      "content": "ウィンドウマネージャのネイティブのデスクトップメニューを使用する場合、以下のコマンドを使うことでいつでもデスクトップの優先設定を修正することができます:\n\n```\n$ pcmanfm --desktop-pref\n```\n\n上記のコマンドをキーバインドやネイティブのデスクトップメニューに追加することで簡単に切り替えることが可能になります。\n\n"
    },
    {
      "title": "新しいアイコンの作成",
      "level": 3,
      "content": "テキストファイルやドキュメント、画像などのユーザーコンテンツはデスクトップに直接ドラッグアンドドロップすることができます。アプリケーションのショートカットを作成したい場合はアプリケーションの .desktop ファイルを ~/Desktop ディレクトリにコピーする必要があります。ファイルをドラッグアンドドロップすると完全に移動してしまうので注意してください。以下のようにファイルをコピーしてください:\n\n```\n$ cp /usr/share/applications/<name of application>.desktop ~/Desktop\n```\n\n例えば、lxterminal のデスクトップショートカットを作成する場合、コマンドは以下のようになります:\n\n```\n$ cp /usr/share/applications/lxterminal.desktop ~/Desktop\n```\n\nXDG ユーザーディレクトリのプログラムを使っている場合、$HOME ディレクトリを作成すれば設定は不要になります。\n\n"
    },
    {
      "title": "デーモンモード",
      "level": 2,
      "content": "バックグラウンドで PCManFM を起動するには (リムーバブルメディアを自動的にマウントしたい場合など):\n\n```\npcmanfm -d\n```\n\n自動マウントが失敗する場合は udisks を参照してください。\n\n"
    },
    {
      "title": "自動起動",
      "level": 2,
      "content": "PCManFM をデーモンプロセスとして自動起動したりスタンドアロンのウィンドウマネージャのデスクトップを管理する方法は使用しているウィンドウマネージャによります。例えば、Openbox のデスクトップ管理を有効にするには、以下のコマンドを ~/.config/openbox/autostart ファイルに追加します:\n\n```\npcmanfm --desktop &\n```\n\n使用しているウィンドウマネージャの wiki 記事や公式ホームページなどを確認してください。ウィンドウマネージャが起動起動ファイルを提供していない場合、以下のファイルを編集して PCManFM を自動起動させることができます:\n\n- xinitrc: SLiM ディスプレイマネージャや Startx コマンドを使っている場合。\n- xprofile: LXDM や LightDM などのディスプレイマネージャを使っている場合。\n\n"
    },
    {
      "title": "追加機能",
      "level": 2,
      "content": "経験の浅いユーザーはファイルマネージャだけでは (特に Openbox などのスタンドアロンのウィンドウマネージャでインストールした場合) Xfce や KDE などの完全なデスクトップ環境が提供している機能の全てを利用できないことに気づくでしょう。詳しくはファイルマネージャの機能を参照してください。\n\n"
    },
    {
      "title": "画像ファイル以外のサムネイルを表示",
      "level": 3,
      "content": "PCManFM は画像ファイルのサムネイルを最初からサポートしています。ただし、他のファイルタイプのサムネイルを表示するとき、PCManFM は /usr/share/thumbnailers に存在するファイルの情報を使用します。サムネイルを作成するパッケージは大抵 .thumbnail ファイルを /usr/share/thumbnailers に追加します。例えば OpenDocument ファイルのサムネイルを表示するには、libgsf パッケージをインストールします。動画ファイルのサムネイルを表示したい場合、ffmpegthumbnailer パッケージが必要です。PDF ファイルならば evince パッケージをインストールします。パッケージには evince-thumbnailer が含まれており /usr/share/thumbnailers にファイルが作成されます。evince をインストールしたくない場合、imagemagick の convert コマンドを使うことで evince-thumbnailer の機能を模倣することができます。/usr/share/thumbnailers に以下の内容で .thumbnailer 拡張子のファイル (例: imagemagick-pdf.thumbnailer) を作成してください:\n\n```\n[Thumbnailer Entry]\nTryExec=convert\nExec=convert %i[0] -thumbnail %s %o\nMimeType=application/pdf;application/x-pdf;image/pdf;\n```\n\n上記の例と同じように、.thumbnail ファイルを作成することでサムネイル作成プログラムを自分で指定することができます。%i は入力ファイル (サムネイルを作成するファイル)、%o は出力ファイル (サムネイル画像)、%s はサムネイルのサイズです。パラメータは PCManFM によって自動的に適切なデータに置き換えられてサムネイル作成プログラムに渡されます。\n\n"
    },
    {
      "title": "ターミナルエミュレータの設定",
      "level": 3,
      "content": "Tools > Open Current Folder in Terminal から PCManFM が使用するターミナルエミュレータは Edit > Preferences > Advanced で設定できます。例: bash -c 'pantheon-terminal --working-directory \"$PWD\"'。\n\n"
    },
    {
      "title": "アーカイバの統合",
      "level": 3,
      "content": "Edit > Preferences > Advanced から統合アーカイバを選択することができます。PCManFM は file-roller, xarchiver (または xarchiver-gtk2), engrampa, ark, に対応しています。\n\n"
    },
    {
      "title": "コンテキストメニューへのカスタム項目の追加",
      "level": 3,
      "content": "PCManFM は デスクトップファイル仕様拡張子 (DES-EMA) をサポートしています。ファイルやディレクトリのコンテキストメニューに任意の項目を追加します。独自の項目を追加するには、~/.local/share/file-manager/actions/ を作成し (まだ存在しない場合)、その中に .desktop ファイルを追加します。\n\n```\n~/.local/share/file-manager/actions/action.desktop\n```\n\n```\n[Desktop Entry]\nType=Action\nProfiles=profile_id\nName=Action name in English\nName[cc]=Action name in Language\nIcon=Icon name\n# Example: Icon=text-editor\n \n[X-Action-Profile profile_id]\nMimeTypes=MIME-types (semicolon separated)\nExec=command and arguments\n# Example: Exec=gedit %f\n```\n\nID をセミコロンで区切ってリストすることにより、1 つ以上のプロファイルを 1 つのアクションにバインドできます。プロファイルを使用すると、どのファイルタイプに対してどのコマンドを実行するかを指定できます。したがって、同じアクションでも、選択したファイルのタイプに応じて異なるコマンドを実行できます。特定の MIME タイプ (例: テキストファイルの場合は text/plain) のほかに、次の一般的なタイプを使用できます。\n\n- all/allfiles - 任意のファイル;\n- inode/directory - 任意のディレクトリ;\n- all/all - 任意のファイルとディレクトリ;\n\n"
    },
    {
      "title": "Create New... から使用するテンプレート",
      "level": 3,
      "content": "PCManFM は起動時に ~/Templates のファイルを Create New... コンテキストメニューのアイテムとして追加します。\n\n"
    },
    {
      "title": "サムネイル",
      "level": 3,
      "content": "他のファイルマネージャ (例 Nautilus) と同様に、 PCManFM はフォルダ内のすべてのイメージのプレビューをロードします。 HDD を酷使しないためには、フォルダ内の画像数を 100 にしてください。\n\n"
    },
    {
      "title": "\"他のアプリケーションで開く\" ダイアログウィンドウが空",
      "level": 3,
      "content": "\"他のアプリケーションで開く\" ダイアログでアプリケーションが表示されない場合、gnome-menus を削除して lxmenu-data をインストールしてみてください。さらに、以下の変数をエクスポートしてください:\n\n- XDG_MENU_PREFIX=lxde-\n- XDG_CURRENT_DESKTOP=LXDE\n\n"
    },
    {
      "title": "アプリケーションが表示されない",
      "level": 3,
      "content": "$HOME/.cache/menus ディレクトリのファイルを全て削除して PCManFM を起動しなおしてみてください。\n\nPCManFM は XDG_MENU_PREFIX 環境変数の設定を必要とします。変数の値は /etc/xdg/menus/ ディレクトリに存在するファイルの冒頭と一致している必要があります。例えば .xinitrc ファイルで以下のように設定します:\n\n```\nexport XDG_MENU_PREFIX=\"lxde-\"\n```\n\n詳しくは Arch フォーラムの [1] や Linux Mint フォーラムの [2] を参照してください。\n\n"
    },
    {
      "title": "アイコンが表示されない",
      "level": 3,
      "content": "デスクトップ環境のかわりにウィンドウマネージャを使用していてフォルダやファイルのアイコンが表示されない場合、GTK+ アイコンテーマを指定してください。\n\n例えば oxygen-icons をインストールしている場合、~/.gtkrc-2.0 または /etc/gtk-2.0/gtkrc を編集して以下の行を追加:\n\n```\ngtk-icon-theme-name = \"oxygen\"\n```\n\nそれでも表示されない場合、別のテーマを使ってください (gnome, hicolor, locolor ではアイコンが表示されません)。インストールされている全てのアイコンテーマを確認するには:\n\n```\n$ ls ~/.icons/ /usr/share/icons/\n```\n\n適したテーマがない場合、新しくインストールしてください。インストール可能なアイコンパッケージを確認するには:\n\n```\n$ pacman -Ss icon-theme\n```\n\n"
    },
    {
      "title": "マウスボタンで \"次・前のフォルダ\" 機能が使えない",
      "level": 3,
      "content": "Xbindkeys を使うことで問題を解決できます。\n\nxbindkeys と xvkbdAUR をインストールして ~/.xbindkeysrc を編集して以下のように記述してください:\n\n```\n# Sample .xbindkeysrc for a G9x mouse.\n\"/usr/bin/xvkbd -text '\\[Alt_L]\\[Left]'\"\n b:8\n\"/usr/bin/xvkbd -text '\\[Alt_L]\\[Right]'\"\n b:9\n```\n\n実際のボタンコードは xorg-xev パッケージで確認できます。\n\n~/.xinitrc に以下を追加することでログイン時に xbindkeys を起動できます:\n\n```\nxbindkeys &\n```\n\n"
    },
    {
      "title": "--desktop パラメータが機能しなかったり X サーバーがクラッシュする",
      "level": 3,
      "content": "ユーザーが ~/.config/pcmanfm の所有者になっていて書き込み権限があることを確認してください。\n\n--desktop-pref パラメータを使用するか ~/.config/pcmanfm/default/pcmanfm.config を編集して壁紙を設定することで問題は解決します。\n\n"
    },
    {
      "title": "ターミナルエミュレータの高度な設定が保存されない",
      "level": 3,
      "content": "libfm 設定ファイルの権限があることを確認してください:\n\n```\n$ chmod -R 755 ~/.config/libfm\n$ chmod 644 ~/.config/libfm/libfm.conf\n```\n\n"
    },
    {
      "title": "PCManFM にファイルソートの設定を記憶させる",
      "level": 3,
      "content": "View > Sort Files から PCManFM で表示されるファイルの順序を変更することができますが、PCManFM の次の起動時に順序は記憶されていません。永続的に順序を変更するには Edit > Preferences を開いて閉じてください。これで現在の sort_type と sort_by の値が ~/.config/pcmanfm/LXDE/pcmanfm.conf に書き込まれます。\n\n"
    },
    {
      "title": "ドライブをマウントしようとすると \"Not authorized\" エラーが発生する",
      "level": 3,
      "content": "/etc/polkit-1/rules.d/00-mount-internal.rules という名前の polkit ルールを作成してください:\n\n```\npolkit.addRule(function(action, subject) {\n   if ((action.id == \"org.freedesktop.udisks2.filesystem-mount-system\" &&\n      subject.local && subject.active && subject.isInGroup(\"storage\")))\n      {\n         return polkit.Result.YES;\n      }\n});\n```\n\nそしてユーザーを storage グループに追加してください:\n\n```\n# usermod -aG storage username\n```\n\n"
    },
    {
      "title": "Operation not supported",
      "level": 3,
      "content": "一般的なトラブルシューティング#セッションのパーミッションを見てください。\n\n"
    },
    {
      "title": "システム再起動の度にパスワードが消える",
      "level": 3,
      "content": "ネットワーク共有のために GNOME/Keyring、KDE Wallet または lxqt_walletAUR などのキーリングアプリケーションをインストールするか、必要に応じて SSH エージェントをインストールします。\n\n"
    }
  ]
}