{
  "title": "Установка без подключения к Интернету",
  "url": "https://wiki.archlinux.org/title/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B1%D0%B5%D0%B7_%D0%BF%D0%BE%D0%B4%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BA_%D0%98%D0%BD%D1%82%D0%B5%D1%80%D0%BD%D0%B5%D1%82%D1%83",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Ссылки по теме\n\n- Offline installation of packages (Русский)\n\nNote: **The factual accuracy of this article or section is disputed.** The factual accuracy of this article or section is disputed.\n\nThe factual accuracy of this article or section is disputed.\n\nЕсли вы хотите установить Archiso (Русский) (например, официальный ежемесячный выпуск) без подключения к интернету или если вы не хотите загружать пакеты снова:\n\nСначала следуйте инструкциям статьи Руководство по установке, а затем пропустите разделы от Соединения с Интернетом до Установки основных пакетов.\n\n"
    },
    {
      "title": "Установка archiso в новый корень",
      "level": 2,
      "content": "Вместо того, чтобы устанавливать пакеты с помощью pacstrap (которые будут загружаться из удалённых репозиториев), скопируйте всё в live-среду в новый корень:\n\n```\n# cp -ax / /mnt\n```\n\nЗатем скопируйте образ ядра в новый корень, чтобы сохранить целостность новой системы:\n\n```\n# cp -vaT /run/archiso/bootmnt/arch/boot/$(uname -m)/vmlinuz /mnt/boot/vmlinuz-linux\n```\n\nПосле этого сгенерируйте fstab, как описано в разделе Руководство по установке#Fstab.\n\n"
    },
    {
      "title": "Chroot и настройка базовой системы",
      "level": 2,
      "content": "Далее, выполните операцию chroot в вашей вновь установленной системы:\n\n```\n# arch-chroot /mnt /bin/bash\n```\n\n"
    },
    {
      "title": "Восстановление конфигурации journald",
      "level": 3,
      "content": "Эта настройка archiso приведёт к сохранению системного журнала в ОЗУ, а это означает, что журнал после перезагрузки будет недоступен:\n\n```\n# sed -i 's/Storage=volatile/#Storage=auto/' /etc/systemd/journald.conf\n```\n\n"
    },
    {
      "title": "Удаление особых правил udev",
      "level": 3,
      "content": "Это правило udev автоматически запускает dhcpcd, если есть какие-либо проводные сетевые интерфейсы.\n\n```\n# rm /etc/udev/rules.d/81-dhcpcd.rules\n```\n\n"
    },
    {
      "title": "Отключение и удаление служб, созданных archiso",
      "level": 3,
      "content": "Некоторые файлы служб создаются для live-среды – отключите их и удалите файлы, поскольку они не нужны в новой системе:\n\n```\n# systemctl disable pacman-init.service choose-mirror.service\n# rm -r /etc/systemd/system/{choose-mirror.service,pacman-init.service,etc-pacman.d-gnupg.mount,getty@tty1.service.d}\n# rm /etc/systemd/scripts/choose-mirror\n```\n\n"
    },
    {
      "title": "Удаление особых скриптов live-среды",
      "level": 3,
      "content": "Существуют некоторые скрипты, установленные скриптами archiso в live-системе, которые не нужны для новой системы:\n\n```\n# rm /etc/systemd/system/getty@tty1.service.d/autologin.conf\n# rm /root/{.automated_script.sh,.zlogin}\n# rm /etc/mkinitcpio-archiso.conf\n# rm -r /etc/initcpio\n```\n\n"
    },
    {
      "title": "Импорт ключей archlinux",
      "level": 3,
      "content": "Чтобы использовать официальные репозитории, нужно импортировать главные ключи archlinux (pacman/Package signing (Русский)#Инициализация связки ключей). Этот шаг обычно делается с помощью pacstrap, но может быть выполнен с помощью\n\n```\n# pacman-key --init\n# pacman-key --populate archlinux\n```\n\n"
    },
    {
      "title": "Настройка системы",
      "level": 3,
      "content": "Теперь вы можете выполнить пропущенные шаги раздела Руководство по установке#Настройка системы (установка локали, часовой пояс, имя хоста и т.д.) и завершить установку, создав исходный ramdisk, как описано в разделе Руководство по установке#Initramfs.\n\n"
    }
  ]
}