{
  "title": "Aurweb RPC interface (Español)",
  "url": "https://wiki.archlinux.org/title/Aurweb_RPC_interface_(Espa%C3%B1ol)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **2022-11-07** \n\nArtículos relacionados\n\n- Official repositories web interface\n\nLa interfaz RPC de Aurweb es una interfaz liviana de RPC para AUR. Las consultas se envían como solicitudes GET de HTTP y el servidor responde en formato JSON.\n\n"
    },
    {
      "title": "Tipos de consulta",
      "level": 3,
      "content": "Hay dos tipos de consulta:\n\n- search\n- info\n\n"
    },
    {
      "title": "search",
      "level": 4,
      "content": "Las búsquedas de paquetes se pueden realizar emitiendo solicitudes con el formulario:\n\n```\n/rpc/?v=5&type=search&by=field&arg=keywords\n```\n\ndonde keywords es el argumento de búsqueda y field es uno de los siguientes valores:\n\n- name (busca solo por nombre de paquete)\n- name-desc (busca por nombre y descripción del paquete)\n- maintainer (busca por mantenedor de paquetes)\n- depends (busca paquetes cuya \"depends\" dependen de palabras clave)\n- makedepends (busca paquetes cuya \"makedepends\" dependa de palabras clave)\n- optdepends (busca paquetes cuya \"optdepends\" dependa de palabras clave)\n- checkdepends (busca paquetes cuya \"checkdepends\" dependa de palabras clave)\n\nEl parámetro by se puede omitir y el valor predeterminado es name-desc. Los posibles tipos de retorno son search y error.\n\nSi se realiza una búsqueda por mantenedor y el argumento de búsqueda se deja vacío, se devuelve una lista de paquetes huérfanos.\n\nEjemplos:\n\nBuscar por paquete:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=search&arg=paquete\n```\n\nBuscar por paquetes mantenidos por usuario:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=search&by=maintainer&arg=usuario\n```\n\nBuscar por paquetes que tengan paquete como `makedepends`:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=search&by=makedepends&arg=paquete\n```\n\nBuscar con callback (devolución de llamada):\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=search&arg=paquete&callback=jsonp1192244621103\n```\n\n"
    },
    {
      "title": "info",
      "level": 4,
      "content": "La información del paquete se puede obtener emitiendo solicitudes con el formulario:\n\n```\n/rpc/?v=5&type=info&arg[]=pkg1&arg[]=pkg2&…\n```\n\ndonde pkg1, pkg2, … son las coincidencias exactas de los nombres de los paquetes, de los cuales se quieren recuperar los detalles del paquete.\n\nLos posibles tipos de retorno son multiinfo y error.\n\nEjemplos:\n\nInformación para un único paquete:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=info&arg[]=paquete\n```\n\nInformación para varios paquetes:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=info&arg[]paquete1=&arg[]=paquete2\n```\n\n"
    },
    {
      "title": "Tipos de retorno",
      "level": 3,
      "content": "La carga para la devolución es de un formato único y dispone actualmente de tres tipos principales. La respuesta siempre devolverá un tipo para que el usuario pueda determinar si el resultado de una operación fue un error o no.\n\nEl formato para la carga de devolución es:\n\n```\n{\"version\":5,\"type\":ReturnType,\"resultcount\":0,\"results\":ReturnData}\n```\n\nReturnType es una cadena y el valor es uno de los siguientes:\n\n- search\n- multiinfo\n- error\n\n"
    },
    {
      "title": "return data",
      "level": 4,
      "content": "El tipo de ReturnData es una matriz de elementos de diccionario para search y multiinfo de ReturnType, y una matriz vacía para error de ReturnType.\n\nPara ReturnType search, ReturnData puede contener los siguientes campos:\n\n- ID\n- Name\n- PackageBaseID\n- PackageBase\n- Version\n- Description\n- URL\n- NumVotes\n- Popularity\n- OutOfDate\n- Maintainer\n- FirstSubmitted\n- LastModified\n- URLPath\n\nPara ReturnType info y multiinfo, ReturnData también puede contener adicionalmente los siguientes campos:\n\n- Depends\n- MakeDepends\n- OptDepends\n- CheckDepends\n- Conflicts\n- Provides\n- Replaces\n- Groups\n- License\n- Keywords\n\nLos campos que no contienen un paquete se omitirán de la salida.\n\n"
    },
    {
      "title": "error",
      "level": 4,
      "content": "El tipo \"error\" tiene una cadena de respuesta de error como valor de retorno. Se puede devolver una respuesta de error desde un tipo de consulta search o info.\n\nEjemplo de ReturnType error:\n\n```\n{\"version\":5,\"type\":\"error\",\"resultcount\":0,\"results\":[],\"error\":\"Incorrect by field specified.\"}\n```\n\n"
    },
    {
      "title": "search",
      "level": 4,
      "content": "El tipo \"search\" es el resultado devuelto por una operación de solicitud de búsqueda.\n\nEjemplo de ReturnType search:\n\n```\n{\"version\":5,\"type\":\"search\",\"resultcount\":2,\"results\":[{\"ID\":206807,\"Name\":\"cower-git\", ...}]}\n```\n\n"
    },
    {
      "title": "info",
      "level": 4,
      "content": "El tipo \"info\" es el resultado devuelto por una operación de solicitud de información.\n\nEjemplo de ReturnType multiinfo:\n\n```\n{\n    \"version\":5,\n    \"type\":\"multiinfo\",\n    \"resultcount\":1,\n    \"results\":[{\n        \"ID\":229417,\n        \"Name\":\"cower\",\n        \"PackageBaseID\":44921,\n        \"PackageBase\":\"cower\",\n        \"Version\":\"14-2\",\n        \"Description\":\"A simple AUR agent with a pretentious name\",\n        \"URL\":\"http:\\/\\/github.com\\/falconindy\\/cower\",\n        \"NumVotes\":590,\n        \"Popularity\":24.595536,\n        \"OutOfDate\":null,\n        \"Maintainer\":\"falconindy\",\n        \"FirstSubmitted\":1293676237,\n        \"LastModified\":1441804093,\n        \"URLPath\":\"\\/cgit\\/aur.git\\/snapshot\\/cower.tar.gz\",\n        \"Depends\":[\n            \"curl\",\n            \"openssl\",\n            \"pacman\",\n            \"yajl\"\n        ],\n        \"MakeDepends\":[\n            \"perl\"\n        ],\n        \"License\":[\n            \"MIT\"\n        ],\n        \"Keywords\":[]\n    }]\n }\n```\n\n"
    },
    {
      "title": "jsonp",
      "level": 3,
      "content": "Si está trabajando con una página de JavaScript y necesita un mecanismo de devolución de llamada (\"callback\") en formato JSON, que puede hacerlo uno mismo. Solo necesitamos proporcionar una variable de \"callback\" adicional. Esta devolución de llamada generalmente se maneja a través de la biblioteca javascript, he aquí un ejemplo:\n\nEjemplo de consulta:\n\n```\nhttps://aur.archlinux.org/rpc/?v=5&type=search&arg=foobar&callback=jsonp1192244621103\n```\n\nEjemplo de resultado:\n\n```\n/**/jsonp1192244621103({\"version\":5,\"type\":\"search\",\"resultcount\":1,\"results\":[{\"ID\":250608,\"Name\":\"foobar2000\",\"PackageBaseID\":37068,\"PackageBase\":\"foobar2000\",\"Version\":\"1.3.9-1\",\"Description\":\"An advanced freeware audio player (uses Wine).\",\"URL\":\"http:\\/\\/www.foobar2000.org\\/\",\"NumVotes\":39,\"Popularity\":0.425966,\"OutOfDate\":null,\"Maintainer\":\"supermario\",\"FirstSubmitted\":1273255356,\"LastModified\":1448326415,\"URLPath\":\"\\/cgit\\/aur.git\\/snapshot\\/foobar2000.tar.gz\"}]})\n```\n\nEsto llamaría automáticamente a la función de JavaScript jsonp1192244621103 con el parámetro establecido en los resultados de la llamada RPC.\n\n"
    },
    {
      "title": "Limitaciones",
      "level": 2,
      "content": "- Las solicitudes GET de HTTP están limitadas a un URI de 8190 bytes de longitud máxima. Sin embargo, la instancia oficial de AUR que se ejecuta en un servidor nginx con HTTP/2 utiliza el límite de 4443 bytes de longitud máxima de URI predeterminada. Las solicitudes de información con más de 200 paquetes aproximadamente como argumento deberán dividirse.\n- Las consultas de búsqueda deben tener al menos dos caracteres de longitud.\n- Las búsquedas fallarán si contienen 5000 o más resultados.\n- La tasa de API está limitada a un máximo de 4000 solicitudes por IP al día.\n\n"
    },
    {
      "title": "Clientes de referencia",
      "level": 2,
      "content": "A veces las cosas son más fáciles de entender con ejemplos. Algunas implementaciones de referencia (jQuery, python, ruby) están disponibles en la siguiente URL: https://github.com/cactus/random/tree/2b72a1723bfc8ae64eed6a3c40cb154accae3974/aurjson_examples\n\n"
    }
  ]
}