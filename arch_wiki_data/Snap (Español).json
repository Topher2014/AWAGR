{
  "title": "Snap (Español)",
  "url": "https://wiki.archlinux.org/title/Snap_(Espa%C3%B1ol)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **2019-02-27** \n\nArtículos relacionados\n\n- Flatpak\n- AppArmor\n\nSnap es un sistema de despliegue y manejo de paquetes. Los paquetes son llamados 'snaps' y la herramienta para usarlos es 'snapd', la cual funciona en una amplia gama de distribuciones Linux y permite, por lo tanto, el despliege ascendente de software agnóstico a la distribución. Snap fue originalmente diseñado y desarrollado por Canonical.\n\nsnapd es un demonio REST API para la administración de paquetes snaps. Los usuarios pueden interactuar con él al usar el cliente snap, el cual es parte del mismo paquete.\n\nLos snaps pueden ser confinados usando AppArmor el cual ahora es habilitado por el kernel predeterminado. Consulte las páginas wiki relevantes para encontrar instrucciones para habilitar AppArmor en su sistema.\n\n"
    },
    {
      "title": "Instalación",
      "level": 2,
      "content": "Instale el paquete snapdAUR o snapd-gitAUR.\n\nDesde la versión 2.36, snapd habilita el soporte AppArmor para Arch Linux. Para usarlo, tiene que habilitar AppArmor en su sistema, vea AppArmor#Instalación.\n\nSi está usando AppArmor:\n\n```\n$ systemctl enable --now apparmor.service\n $ systemctl enable --now snapd.apparmor.service\n```\n\n"
    },
    {
      "title": "Configuración",
      "level": 2,
      "content": "Para lanzar el demonio snapd cuando snap intente usarlo, inicie y/o habilite snapd.socket\n\n"
    },
    {
      "title": "Utilización",
      "level": 2,
      "content": "La herramienta snap es utilizada para administrar las snaps.\n\n"
    },
    {
      "title": "Buscando",
      "level": 3,
      "content": "Para encontrar snaps para instalar, puede consultar Ubuntu Store con:\n\n```\n$ snap find searchterm\n```\n\n"
    },
    {
      "title": "Instalando",
      "level": 3,
      "content": "Una vez haya encontrado la snap que busca puede instalarla con:\n\n```\n# snap install snapname\n```\n\nEsto requiere privilegios de root. La instalación de snaps por usuario no es posible, aún. Descargará la snap en /var/lib/snapd/snaps y la montará en /var/lib/snapd/snap/snapname para que esté disponible en el sistema.\n\nTambién creará unidades de montaje por cada snap y las agregará a /etc/systemd/system/multi-user.target.wants/ como enlaces simbólicos para que todas las snaps estén disponibles cuando su sistema es iniciado.\n\nUna vez hecho esto debería encontrarla en la lista de snaps instaladas junto con su número de versión, revisión y desarollador usando:\n\n```\n$ snap list\n```\n\nTambién puede cargar snaps desde su disco duro local con:\n\n```\n# snap install --dangerous /path/to/snap\n```\n\n"
    },
    {
      "title": "Actualización",
      "level": 3,
      "content": "Para actualizar su snap manualmente use:\n\n```\n# snap refresh\n```\n\nLas snaps se actualizan automáticamente de acuerdo a la configuración snap refresh.timer.\n\nPara ver el siguiente/último tiempo de actualización use:\n\n```\n# snap refresh --time\n```\n\nPara establecer un tiempo de actualización diferente, ej. dos veces al día:\n\n```\n# snap set core refresh.timer=0:00~24:00/2\n```\n\nVea página de documentación de opciones de sistema para detalles sobre como personalizar el tiempo de actualización.\n\n"
    },
    {
      "title": "Eliminando",
      "level": 3,
      "content": "Los snaps pueden ser eliminados al ejecutar:\n\n```\n# snap remove snapname\n```\n\n"
    },
    {
      "title": "Snaps Clásicas",
      "level": 3,
      "content": "Algunas snaps (e.j. Skype y Pycharm) usan el confinamiento clásico. Sin embargo, el confinamiento clásico requiere el directorio /snap, que no es compatible con FHS. Por lo tanto, el paquete snapd no lleva éste directorio. Sin embargo, si el usuario lo desea, puede crear manualmente un enlace simbólico de /snap a /var/lib/snapd/snap, para permitir la instalación de snaps clásicas:\n\n```\n# ln -s /var/lib/snapd/snap /snap\n```\n\n"
    },
    {
      "title": "Confinamiento",
      "level": 3,
      "content": "Cuando se utiliza AppArmor, snapd (2.36+) generará los mismos perfiles para las snaps como en Ubuntu. El analizador de AppArmor es suficientemente inteligente para eliminar las reglas que aún no son compatibles por la línea principal del kernel.\n\nPara verificar si el confinamiento básico está funcionando, instale la snap hello-world. Luego ejecute lo siguiente:\n\n```\n$ hello-world.evil\n Hello Evil World!\n This example demonstrates the app confinement\n You should see a permission denied error next\n /snap/hello-world/27/bin/evil: 9: /snap/hello-world/27/bin/evil: cannot create /var/tmp/myevil.txt: Permission denied\n```\n\nLa denegación fue causada por AppArmor y debería haber sido registrada.\n\n```\n# dmesg\n ...\n [  +0.000003] audit: type=1327 audit(1540469583.966:257): proctitle=2F62696E2F7368002F736E61702F68656C6C6F2D776F726C642F32372F62696E2F6576696C\n [ +12.268939] audit: type=1400 audit(1540469596.236:258): apparmor=\"DENIED\" operation=\"open\" profile=\"snap.hello-world.evil\" name=\"/var/tmp/myevil.txt\" pid=10835 comm=\"evil\" requested_mask=\"wc\" denied_mask=\"wc\" fsuid=1000 ouid=1000\n [  +0.000006] audit: type=1300 audit(1540469596.236:258): arch=c000003e syscall=2 success=no exit=-13 a0=55d991ba6bc8 a1=241 a2=1b6 a3=55d991ba6be0 items=0 ppid=31349 pid=10835 auid=1000 uid=1000 gid=1000 euid=1000 suid=1000 fsuid=1000 egid=1000 sgid=1000 fsgid=1000 tty=pts2 ses=3 comm=\"evil\" exe=\"/bin/dash\" subj==snap.hello-world.evil (enforce)\n ...\n```\n\nSi no ve ningúna denegación, verifique que los perfiles se hayan cargado.\n\n```\n$ sudo aa-status |grep snap.hello-world\n    snap.hello-world.env\n    snap.hello-world.evil\n    snap.hello-world.hello-world\n    snap.hello-world.sh\n```\n\nAdemás, puede verificar que las características sandbox están disponibles en el sistema de acuerdo a snapd:\n\n```\n$ snap debug sandbox-features\n apparmor:             kernel:caps kernel:domain kernel:file kernel:mount kernel:namespaces kernel:network_v8 kernel:policy kernel:ptrace kernel:query kernel:rlimit kernel:signal parser:unsafe policy:default support-level:partial\n confinement-options:  devmode\n dbus:                 mediated-bus-access\n kmod:                 mediated-modprobe\n mount:                freezer-cgroup-v1 layouts mount-namespace per-snap-persistency per-snap-profiles per-snap-updates per-snap-user-profiles stale-base-invalidation\n seccomp:              bpf-argument-filtering kernel:allow kernel:errno kernel:kill_process kernel:kill_thread kernel:log kernel:trace kernel:trap\n```\n\n"
    },
    {
      "title": "Administración Gráfica",
      "level": 2,
      "content": "Tanto Gnome Software Center como KDE Discover pueden proporcionar soporte nativo de snap con los paquetes gnome-software-snapAUR[enlace roto: package not found] o discover-snapAUR.\n\n"
    },
    {
      "title": "Soporte",
      "level": 2,
      "content": "Arch Linux related mailing lists and other official Arch Linux support channels are not an appropriate place to request help with snaps on Arch Linux. An appropriate place to ask for support is the Snapcraft forum.\n\nLas listas de correo relacionadas con Arch Linux y otros canales oficiales de soporte de Arch Linux no son lugar apropiado para solicitar ayuda sobre snaps en Arch Linux. Un lugar apropiado para solicitar ayuda de soporte es el foro Snapcraft.\n\n"
    },
    {
      "title": "Véase también",
      "level": 2,
      "content": "- Sitio oficial\n- Repositorio GitHub\n- Artículo de arstechnica (06/16) acerca de snaps de Ubuntu que estarán disponibles para Arch y otras distribuciones\n\n"
    }
  ]
}