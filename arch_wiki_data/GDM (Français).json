{
  "title": "GDM (Français)",
  "url": "https://wiki.archlinux.org/title/GDM_(Fran%C3%A7ais)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- GNOME (Français)\n- Display manager (Français)\n\nSelon GDM - GNOME Display Manager : \"Le gestionnaire d'affichage GNOME (GDM) est un programme qui gère les serveurs d'affichage graphique et traite les connexions des utilisateurs graphiques.\"\n\nLes gestionnaires d'affichage fournissent aux utilisateurs du Système X Window et de Wayland une invite de connexion graphique.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "GDM peut être installé avec le paquet gdm, et est installé en tant que membre du groupe gnome.\n\n"
    },
    {
      "title": "Démarrage",
      "level": 2,
      "content": "Pour exécuter GDM au moment du démarrage, activez gdm.service.\n\n"
    },
    {
      "title": "Démarrage automatique des applications",
      "level": 3,
      "content": "Pour démarrer automatiquement les applications après la connexion, suivez les instructions de Autostarting#On desktop environment startup qui se rapportent à votre environnement de bureau.\n\n"
    },
    {
      "title": "Image d'arrière-plan de l'écran de connexion",
      "level": 3,
      "content": "- Depuis GNOME 3.16, les thèmes de GNOME Shell sont désormais stockés sous forme de fichiers binaires (gresource).\n- Cette modification sera écrasée lors des mises à jour ultérieures de gnome-shell.\n\nTout d'abord, vous devez extraire le thème GNOME Shell existant dans un répertoire de votre répertoire personnel. Vous pouvez le faire à l'aide du script suivant :\n\n```\nextractgst.sh\n```\n\n```\n#!/bin/sh\ngst=/usr/share/gnome-shell/gnome-shell-theme.gresource\nworkdir=${HOME}/shell-theme\n\nfor r in `gresource list $gst`; do\n\tr=${r#\\/org\\/gnome\\/shell/}\n\tif [ ! -d $workdir/${r%/*} ]; then\n\t  mkdir -p $workdir/${r%/*}\n\tfi\ndone\n\nfor r in `gresource list $gst`; do\n        gresource extract $gst $r >$workdir/${r#\\/org\\/gnome\\/shell/}\ndone\n```\n\nNaviguez vers le répertoire créé. Vous devriez constater que les fichiers du thème y ont été extraits. Copiez maintenant votre image d'arrière-plan préférée dans ce répertoire.\n\nEnsuite, vous devez créer un fichier dans le répertoire avec le contenu suivant :\n\n```\ngnome-shell-theme.gresource.xml\n```\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<gresources>\n  <gresource prefix=\"/org/gnome/shell/theme\">\n    <file alias=\"icons/scalable/actions/color-pick.svg\">color-pick.svg</file>\n    <file alias=\"icons/scalable/actions/pointer-double-click-symbolic.svg\">pointer-double-click-symbolic.svg</file>\n    <file alias=\"icons/scalable/actions/pointer-drag-symbolic.svg\">pointer-drag-symbolic.svg</file>\n    <file alias=\"icons/scalable/actions/pointer-primary-click-symbolic.svg\">pointer-primary-click-symbolic.svg</file>\n    <file alias=\"icons/scalable/actions/pointer-secondary-click-symbolic.svg\">pointer-secondary-click-symbolic.svg</file>\n    <file alias=\"icons/scalable/actions/preview-close-symbolic.svg\">window-close-24-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/carousel-arrow-next-24-symbolic.svg\">carousel-arrow-next-24-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/carousel-arrow-back-24-symbolic.svg\">carousel-arrow-back-24-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/eye-open-negative-filled-symbolic.svg\">eye-open-negative-filled-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/eye-not-looking-symbolic.svg\">eye-not-looking-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/keyboard-caps-lock-filled-symbolic.svg\">keyboard-caps-lock-filled-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/keyboard-enter-symbolic.svg\">keyboard-enter-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/keyboard-hide-symbolic.svg\">keyboard-hide-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/keyboard-layout-filled-symbolic.svg\">keyboard-layout-filled-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/keyboard-shift-filled-symbolic.svg\">keyboard-shift-filled-symbolic.svg</file>\n    <file alias=\"icons/scalable/status/message-indicator-symbolic.svg\">message-indicator-symbolic.svg</file>\n    <file>calendar-today.svg</file>\n    <file>checkbox-focused.svg</file>\n    <file>checkbox-off-focused.svg</file>\n    <file>checkbox-off.svg</file>\n    <file>checkbox.svg</file>\n    <file>filename</file>\n    <file>gnome-shell.css</file>\n    <file>gnome-shell-high-contrast.css</file>\n    <file>gnome-shell-start.svg</file>\n    <file>no-events.svg</file>\n    <file>no-notifications.svg</file>\n    <file>pad-osd.css</file>\n    <file>process-working.svg</file>\n    <file>toggle-off.svg</file>\n    <file>toggle-off-dark.svg</file>\n    <file>toggle-off-hc.svg</file>\n    <file>toggle-on.svg</file>\n    <file>toggle-on-dark.svg</file>\n    <file>toggle-on-hc.svg</file>\n    <file>workspace-placeholder.svg</file>\n  </gresource>\n</gresources>\n```\n\nRemplacez filename par le nom de fichier de votre image de fond ou supprimez la ligne pour utiliser une valeur de couleur hexagonale à la place.\n\nMaintenant, ouvrez le fichier gnome-shell.css dans le répertoire et modifiez la définition #lockDialogGroup comme suit :\n\n```\n#lockDialogGroup {\n  background: url(filename);\n  background-size: widthpx heightpx;\n  background-repeat: no-repeat;\n}\n```\n\nDéfinissez background-size à la résolution utilisée par GDM ; il ne s'agit pas nécessairement de la résolution de l'image. Pour une liste des résolutions d'affichage, consultez Définition d'écran. Encore une fois, définissez filename comme étant le nom de l'image d'arrière-plan.\n\nSi vous souhaitez uniquement modifier la couleur de l'arrière-plan, ajustez la définition de #lockDialogGroup comme suit :\n\n```\n#lockDialogGroup {\n  background-color: #color;\n}\n```\n\noù color est la nouvelle couleur d'arrière-plan codée en hexadécimal.\n\nEnsuite, compilez le thème en utilisant la commande suivante :\n\n```\n$ glib-compile-resources gnome-shell-theme.gresource.xml\n```\n\nCopiez ensuite le fichier résultant gnome-shell-theme.gresource dans le répertoire /usr/share/gnome-shell.\n\nEnfin, redémarrez gdm.service (notez que la simple déconnexion n'est pas suffisante) et vous devriez constater qu'il utilise l'image d'arrière-plan de votre choix.\n\nPour plus d'informations, veuillez consulter le fil de discussion suivant [1]. Un script shell pour automatiser les étapes ci-dessus est disponible sur le dépôt github de DimaZirix.\n\n"
    },
    {
      "title": "Configuration par dconf",
      "level": 3,
      "content": "Certains paramètres de GDM sont stockés dans une base de données dconf. Ils peuvent être configurés soit en ajoutant des keyfiles au répertoire /etc/dconf/db/gdm.d puis en recompilant la base de données GDM en exécutant dconf update en tant que root ou en se connectant à l'utilisateur GDM sur le système et en changeant le paramètre directement en utilisant l'outil de ligne de commande gsettings. Notez que pour la première approche, un fichier de profil GDM est nécessaire - il doit être créé manuellement car il n'est plus fourni en amont, voir ci-dessous :\n\n```\n/etc/dconf/profile/gdm\n```\n\n```\nuser-db:user\nsystem-db:gdm\nfile-db:/usr/share/gdm/greeter-dconf-defaults\n```\n\nPour cette dernière approche, vous pouvez vous connecter à l'utilisateur GDM avec la commande ci-dessous :\n\n```\n# machinectl shell gdm@ /bin/bash\n```\n\n"
    },
    {
      "title": "Logo de l'écran de connexion",
      "level": 4,
      "content": "Créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/02-logo\n```\n\n```\n[org/gnome/login-screen]\nlogo='/path/to/logo.png'\n```\n\nRecompilez ensuite la base de données GDM. Alternativement, exécutez la commande suivante pour vous connecter temporairement à l'utilisateur GDM et changer le logo :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.login-screen logo '/path/to/logo.png'\n```\n\n"
    },
    {
      "title": "Changer le thème du curseur",
      "level": 4,
      "content": "GDM ne tient pas compte des paramètres du thème du curseur de GNOME et ignore également le thème du curseur défini conformément à la spécification XDG. Pour changer le thème du curseur utilisé dans GDM, créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/10-cursor-settings\n```\n\n```\n[org/gnome/desktop/interface]\ncursor-theme='theme-name'\n```\n\nPuis recompilez la base de données GDM. Alternativement, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et changer le thème du curseur :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface cursor-theme 'theme-name'\n```\n\n"
    },
    {
      "title": "Changement du thème de l'icône",
      "level": 4,
      "content": "Les mêmes méthodes peuvent être utilisées pour changer le thème des icônes. Créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/11-icon-settings\n```\n\n```\n[org/gnome/desktop/interface]\nicon-theme='theme-name'\n```\n\nEnsuite, recompilez la base de données GDM. Sinon, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et modifier le thème des icônes :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface icon-theme 'theme-name'\n```\n\n"
    },
    {
      "title": "Police plus grande pour l'écran de connexion",
      "level": 4,
      "content": "Cliquez sur l'icône d'accessibilité en haut à droite de l'écran (un cercle blanc avec la silhouette d'une personne au centre) et cochez l'option Texte Large.\n\nPour définir un facteur d'échelle spécifique, créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/03-scaling\n```\n\n```\n[org/gnome/desktop/interface]\ntext-scaling-factor='1.25'\n```\n\nRecompilez ensuite la base de données GDM. Alternativement, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et changer la police :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface text-scaling-factor '1.25'\n```\n\n"
    },
    {
      "title": "Désactiver le son",
      "level": 4,
      "content": "Cet ajustement désactive le retour audible entendu lorsque le volume du système est modifié (via le clavier) sur l'écran de connexion.\n\nCréez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/04-sound\n```\n\n```\n[org/gnome/desktop/sound]\nevent-sounds=false\n```\n\nPuis recompilez la base de données GDM. Alternativement, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et désactiver le son :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.sound event-sounds 'false'\n```\n\n"
    },
    {
      "title": "Configurer le comportement du bouton d'alimentation",
      "level": 4,
      "content": "- Les paramètres logind du bouton d'alimentation sont remplacés par le daemon des paramètres de GNOME. [2]\n- Depuis GDM 3.18, le bouton d'alimentation ne peut pas être réglé sur interactif. [3]\n- Dans certains cas, ce paramètre sera ignoré et des valeurs par défaut codées en dur seront utilisées. [4]\n\nCréez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/05-power\n```\n\n```\n[org/gnome/settings-daemon/plugins/power]\npower-button-action='action'\n```\n\nRecompilez ensuite la base de données GDM. Alternativement, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et configurer le comportement :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.settings-daemon.plugins.power power-button-action 'action'\n```\n\noù action peut être l'un de nothing, suspend ou hibernate.\n\n"
    },
    {
      "title": "Activer la fonction \"taper pour cliquer\"",
      "level": 4,
      "content": "L'option «Tap-to-click» est désactivée par défaut dans GDM (et GNOME), mais vous pouvez facilement l'activer avec un paramètre dconf.\n\nPour activer la fonction Tap-to-Click, créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/06-tap-to-click\n```\n\n```\n[org/gnome/desktop/peripherals/touchpad]\ntap-to-click=true\n```\n\nRecompilez ensuite la base de données GDM. Alternativement, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et activer l'action :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click 'true'\n```\n\n"
    },
    {
      "title": "Désactiver/Activer le menu d'accessibilité",
      "level": 4,
      "content": "Pour désactiver ou activer le menu d'accessibilité, créez le fichier de configuration suivant :\n\n```\n/etc/dconf/db/gdm.d/07-accessibility\n```\n\n```\n[org/gnome/desktop/interface]\ntoolkit-accessibility='boolean'\n```\n\nRecompilez ensuite la base de données GDM. Sinon, exécutez ce qui suit pour vous connecter temporairement à l'utilisateur GDM et modifier l'état :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.desktop.interface toolkit-accessibility 'boolean'\n```\n\nLe menu est désactivé lorsque la clé est false, activé lorsqu'elle est true.\n\n"
    },
    {
      "title": "Activer la veilleuse sur GDM",
      "level": 4,
      "content": "Pour activer la Veilleuse sur GDM, lancez\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.settings-daemon.plugins.color night-light-enabled true\n```\n\n"
    },
    {
      "title": "Disposition du clavier",
      "level": 3,
      "content": "La disposition du clavier du système sera appliquée à GDM. Consultez Xorg (Français)/Keyboard configuration (Français).\n\nLorsque vous utilisez Wayland, vous devrez peut-être spécifier manuellement la disposition du clavier X avec localectl :\n\n```\n$ localectl set-x11-keymap fr.\n```\n\nSi un système a plusieurs utilisateurs, il est possible de spécifier une disposition de clavier différente de celle du système pour que GDM l'utilise. Tout d'abord, assurez-vous que le paquet gnome-control-center est installé. Ensuite, démarrez gnome-control-center et naviguez jusqu'à Region & Language > Input Sources. Dans la barre d'en-tête, cliquez sur le bouton à bascule Login Screen et choisissez une disposition de clavier dans la liste. Notez que le bouton Login Screen ne sera visible dans la barre d'en-tête que si plusieurs utilisateurs sont présents sur le système [5].\n\nLes utilisateurs de GDM 2.x (anciennement GDM) peuvent avoir besoin de modifier ~/.dmrc comme indiqué ci-dessous :\n\n```\n~/.dmrc\n```\n\n```\n[Desktop]\nLanguage=fr_FR.UTF-8   # à changer pour la langue\nLayout=fr   nodeadkeys # à changer pour la disposition du clavier\n```\n\n"
    },
    {
      "title": "Changer la langue",
      "level": 3,
      "content": "La langue du système sera appliquée à GDM. Si un système a plusieurs utilisateurs, il est possible de définir une langue pour GDM différente de la langue du système. Dans ce cas, assurez-vous d'abord que gnome-control-center est installé. Ensuite, lancez gnome-control-center et choisissez Région et langue. Dans la barre d'en-tête, cochez le bouton à bascule Login Screen. Enfin, cliquez sur Language et choisissez votre langue dans la liste. Vous serez invité à saisir votre mot de passe root. Notez que le bouton Login Screen ne sera visible dans la barre d'en-tête que si plusieurs utilisateurs sont présents sur le système [6].\n\n"
    },
    {
      "title": "Connexion automatique",
      "level": 4,
      "content": "Pour activer la connexion automatique avec GDM, ajoutez ce qui suit à /etc/gdm/custom.conf (remplacez username par le vôtre) :\n\n```\n/etc/gdm/custom.conf\n```\n\n```\n# Activer la connexion automatique pour l'utilisateur\n[daemon]\nAutomaticLogin=username\nAutomaticLoginEnable=True\n```\n\nou pour une connexion automatique avec un délai :\n\n```\n/etc/gdm/custom.conf\n```\n\n```\n[daemon]\nTimedLoginEnable=true\nTimedLogin=username\nTimedLoginDelay=1\n```\n\nVous pouvez définir la session utilisée pour la connexion automatique (remplacez gnome-xorg par la session souhaitée) :\n\n```\n/var/lib/AccountsService/users/username\n```\n\n```\nXSession=gnome-xorg\n```\n\n"
    },
    {
      "title": "Connexion sans mot de passe =",
      "level": 3,
      "content": "Si vous voulez contourner l'invite de mot de passe dans GDM, ajoutez simplement la ligne suivante sur la première ligne de /etc/pam.d/gdm-password :\n\n```\nauth sufficient pam_succeed_if.so user ingroup nopasswdlogin\n```\n\nEnsuite, ajoutez le groupe nopasswdlogin à votre système. Consultez Groupe d'utilisateurs pour obtenir des descriptions de groupes et des commandes de gestion de groupes.\n\nMaintenant, ajoutez votre utilisateur au groupe nopasswdlogin et vous n'aurez qu'à cliquer sur votre nom d'utilisateur pour vous connecter.\n\n- Ne faites pas cela pour un compte root.\n- Vous ne pourrez plus changer votre type de session à la connexion avec GDM. Si vous voulez changer votre type de session par défaut, vous devrez d'abord retirer votre utilisateur du groupe nopasswdlogin.\n\n"
    },
    {
      "title": "Fermeture sans mot de passe pour les sessions multiples",
      "level": 4,
      "content": "GDM utilise polkit et logind pour obtenir les autorisations d'arrêt. Vous pouvez arrêter le système lorsque plusieurs utilisateurs sont connectés en définissant :\n\n```\n/etc/polkit-1/localauthority.conf.d/org.freedesktop.logind.policy\n```\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE policyconfig PUBLIC\n \"-//freedesktop//DTD PolicyKit Policy Configuration 1.0//EN\"\n \"http://www.freedesktop.org/software/polkit/policyconfig-1.dtd\">\n\n<!--\nPolicy definitions for logind\n -->\n\n<policyconfig>\n\n  <action id=\"org.freedesktop.login1.power-off-multiple-sessions\">\n    <description>Shutdown the system when multiple users are logged in</description>\n    <message>System policy prevents shutting down the system when other users are logged in</message>\n    <defaults>\n      <allow_inactive>yes</allow_inactive>\n      <allow_active>yes</allow_active>\n    </defaults>\n  </action>\n\n</policyconfig>\n```\n\nVous pouvez trouver toutes les options logind disponibles (par exemple, reboot-multiple-sessions) dans org.freedesktop.login1(5).\n\n"
    },
    {
      "title": "Activer la connexion root dans GDM",
      "level": 4,
      "content": "Il n'est pas conseillé de se connecter en tant que root, mais si nécessaire vous pouvez éditer /etc/pam.d/gdm-password et ajouter la ligne suivante avant la ligne auth required pam_deny.so :\n\n```\n/etc/pam.d/gdm-password\n```\n\n```\nauth            sufficient      pam_succeed_if.so uid eq 0 quiet\n```\n\nLe fichier devrait ressembler à ceci :\n\n```\n/etc/pam.d/gdm-password\n```\n\n```\n...\nauth            sufficient      pam_succeed_if.so uid eq 0 quiet\nauth            sufficient      pam_succeed_if.so uid >= 1000 quiet\nauth            required        pam_deny.so\n...\n```\n\nVous devriez être en mesure de vous connecter en tant que root après avoir redémarré GDM.\n\n"
    },
    {
      "title": "Cacher un utilisateur de la liste de connexion",
      "level": 4,
      "content": "Les utilisateurs de la liste d'utilisateurs de GDM sont rassemblés par AccountsService. Il cache automatiquement les utilisateurs du système (UID < 1000). Pour cacher les utilisateurs ordinaires de la liste de connexion, créez ou modifiez un fichier portant le nom de l'utilisateur à cacher dans /var/lib/AccountsService/users/ pour qu'il contienne au moins :\n\n```\n/var/lib/AccountsService/users/username\n```\n\n```\n[User]\nSystemAccount=true\n```\n\n"
    },
    {
      "title": "Configurer les paramètres par défaut du moniteur",
      "level": 3,
      "content": "Certains environnements de bureau stockent les paramètres d'affichage dans ~/.config/monitors.xml. Les commandes xrandr sont ensuite générées sur la base du contenu du fichier. GDM a un fichier similaire stocké dans /var/lib/gdm/.config/monitors.xml.\n\nSi vous avez configuré vos moniteurs comme vous le souhaitez (résolution, taux de rafraîchissement, orientation, mise à l'échelle, primaire et ainsi de suite) dans ~/.config/monitors.xml et que vous voulez que GDM respecte ces paramètres :\n\n```\n# cp ~/.config/monitors.xml /var/lib/gdm/.config/\n# chown gdm:gdm /var/lib/gdm/.config/monitors.xml\n```\n\nLes parties pertinentes de monitors.xml pour la rotation et la mise à l'échelle de l'écran sont :\n\n```\n<monitors version=\"2\">\n  <configuration>\n    <logicalmonitor>\n      ...\n      <scale>2</scale>\n      ...\n      <transform>\n        <rotation>right</rotation>\n        <flipped>no</flipped>\n      </transform>\n      ...\n    </logicalmonitor>\n  </configuration>\n</monitors>\n```\n\nLes modifications prendront effet à la déconnexion. Ceci est nécessaire car GDM ne respecte pas xorg.conf.\n\n- Si vous utilisez GDM sous Wayland, vous devez également utiliser un monitors.xml qui a été créé sous Wayland. Consultez le bug GDM 224 pour plus d'informations. Alternativement, vous pouvez forcer GDM à #Utiliser Xorg, et utiliser un monitors.xml qui a été créé sous Xorg.\n- Si vous utilisez «fractional scaling», vous devez l'activer pour l'utilisateur gdm.\n\n"
    },
    {
      "title": "Configurer l'autorisation d'accès au serveur X",
      "level": 3,
      "content": "Vous pouvez utiliser la commande xhost pour configurer les autorisations d'accès au serveur X.\n\nPar exemple, pour accorder à GDM le droit d'accéder au serveur X, utilisez la commande suivante :\n\n```\n# xhost +SI:localuser:gdm\n```\n\n"
    },
    {
      "title": "Wayland et le pilote propriétaire NVIDIA",
      "level": 3,
      "content": "Pour utiliser Wayland dans GDM avec le pilote NVIDIA (version 470 ou supérieure), vous devez d'abord activer NVIDIA#DRM kernel mode setting.\n\nÀ partir de GDM 42 et du pilote NVIDIA 510, GDM utilise par défaut Wayland. Pour les pilotes NVIDIA plus anciens (entre les versions 470 et 510), GDM utilise une règle udev selon le chipset pour utiliser Xorg plutôt que Wayland. Pour forcer l'activation de Wayland, annulez ces règles en créant le lien symbolique suivant :\n\n```\n# ln -s /dev/null /etc/udev/rules.d/61-gdm.rules\n```\n\nSi, au lieu de GDM, un écran noir apparaît, essayez de désactiver la carte graphique intégrée dans les paramètres du BIOS de votre ordinateur.\n\n"
    },
    {
      "title": "Échec à la déconnexion",
      "level": 3,
      "content": "Si GDM démarre correctement au démarrage, mais échoue après plusieurs tentatives de déconnexion, essayez d'ajouter cette ligne à la section daemon de /etc/gdm/custom.conf :\n\n```\nGdmXserverTimeout=60\n```\n\n"
    },
    {
      "title": "Xorg «rootless»",
      "level": 3,
      "content": "Consultez Xorg (Français)#Xorg sans root.\n\n"
    },
    {
      "title": "Utiliser Xorg",
      "level": 3,
      "content": "Le backend Wayland est utilisé par défaut, et le backend Xorg n'est utilisé que si le backend Wayland ne peut être lancé. Vous pouvez souhaiter utiliser le backend Xorg à la place si, par exemple :\n\n- GDM plantes\n\nPour utiliser le backend Xorg par défaut, décommentez la ligne suivante dans /etc/gdm/custom.conf :\n\n```\n#WaylandEnable=false\n```\n\n"
    },
    {
      "title": "GDM ne démarre pas tant qu'une entrée n'est pas fournie",
      "level": 3,
      "content": "Si, après le démarrage, l'écran reste noir et que GDM ne démarre pas tant que la souris n'est pas déplacée ou que quelque chose n'est pas tapé au clavier, cela peut être dû à un manque d'entropie nécessaire à la génération de nombres aléatoires. Pour confirmer, vérifiez que la ligne suivante apparaît dans le journal de systemd-random-seed (qui peut être lu en exécutant journalctl --unit systemd-random-seed avec les privilèges de root) :\n\n```\nKernel entropy pool is not initialized yet, waiting until it is.\n```\n\nPour corriger cela, vous pouvez passer le random.trust_cpu=on paramètre du noyau si votre CPU prend en charge l'instruction RDRAND, ou vous pouvez utiliser haveged qui fournit également de l'entropie, bien qu'elle soit de qualité prétendument faible. Consultez l'article de Debian sur le sujet pour d'autres solutions.\n\n"
    },
    {
      "title": "Suppression incomplète de gdm",
      "level": 3,
      "content": "Après avoir supprimé gdm, systemd peut signaler ce qui suit :\n\n```\nuser 'gdm': directory '/var/lib/gdm' does not exist\n```\n\nPour supprimer cette alerte, connectez-vous en tant que root et supprimer l'utilisateur principal gdm, puis supprimer le groupe gdm :\n\nVérifiez que gdm est supprimé avec succès via pwck et grpck avec les privilèges root. Pour compléter le tout, vous pouvez vérifier qu'il ne reste aucun fichiers non possédés pour gdm.\n\n"
    },
    {
      "title": "Auto-suspension de GDM (GNOME 3.28)",
      "level": 3,
      "content": "GDM utilise une base de données dconf séparée pour contrôler la gestion de l'alimentation. Pour appliquer les paramètres d'alimentation de votre utilisateur, copiez-les dans la base de données dconf de GDM :\n\n```\n$ IFS=$'\\n'; for x in $(sudo -u username gsettings list-recursively org.gnome.settings-daemon.plugins.power); do eval \"sudo -u gdm dbus-launch gsettings set $x\"; done; unset IFS\n```\n\noù username est votre nom d'utilisateur.\n\nPour désactiver l'auto-suspension sur AC uniquement, exécutez :\n\n```\n$ sudo -u gdm dbus-launch gsettings set org.gnome.settings-daemon.plugins.power sleep-inactive-ac-type 'nothing'\n```\n\n(Pour désactiver également la suspension automatique sur batterie, exécutez la commande avec battery au lieu de ac).\n\nRedémarrez GDM pour activer vos changements.\n\n"
    },
    {
      "title": "GDM ignore Wayland et utilise X.Org par défaut",
      "level": 3,
      "content": "Wayland nécessite l'exécution de Kernel Mode Setting (KMS) pour fonctionner, et sur certaines machines, le processus GDM démarre avant KMS, ce qui fait que GDM ne peut pas consulter Wayland et ne fonctionne qu'avec X.Org. Cela peut entraîner l'apparition de messages comme les suivants dans votre journal :\n\n```\ngnome-shell[569]: Failed to open gpu '/dev/dri/card0': GDBus.Error:org.freedesktop.DBus.Error.AccessDenied: Operation not permitted\ngnome-shell[569]: Failed to create backend: No GPUs found\nsystemd[505]: org.gnome.Shell@wayland.service: Failed with result 'protocol'.\nsystemd[505]: Failed to start GNOME Shell on Wayland.\n```\n\nAlternativement, le même problème peut conduire à ce que GDM n'apparaisse pas ou que le moniteur n'affiche que la sortie TTY.\n\nVous pouvez résoudre ce problème en démarrant KMS plus tôt.\n\nDe plus, si vous utilisez un pilote NVIDIA, la session Wayland peut être bloquée par une règle udev (consultez les notes sous GNOME#Wayland sessions). Cela peut donner lieu à des messages comme ceux qui suivent :\n\n```\nsystemd[1022]: Condition check resulted in GNOME Shell on Wayland being skipped.\nsystemd[1022]: org.gnome.Shell@wayland.service: Skipped due to 'exec-condition'.\nsystemd[1022]: org.gnome.Shell@wayland.service: Control process exited, code=exited, status=2/INVALIDARGUMENT\n```\n\nConsultez #Wayland et le pilote propriétaire NVIDIA pour une solution de contournement.\n\n"
    },
    {
      "title": "Écran noir sur les GPU AMD ou Intel lorsqu'un (e)GPU NVidia est présent",
      "level": 3,
      "content": "Au début, sans périphérique NVidia, GDM démarre et fonctionne normalement sur Wayland, mais cesse de fonctionner dès qu'un eGPU NVidia est branché (ou que le module nvidia est chargé pour d'autres raisons). Un symptôme typique du problème est un écran noir avec un curseur clignotant lors des déconnexions et des redémarrages de GDM et le message suivant dans les journaux de GDM (accessible en exécutant journalctl -u gdm -b en tant que root) :\n\n```\nGdm : Child process -<some PID> was already dead.\n```\n\nLa solution est la même que ci-dessus : Empêchez /usr/lib/gdm-disable-wayland de s'exécuter au chargement du module nvidia.\n\nNotez que GDM sur Wayland ne fonctionnera plus après l'exécution de /usr/lib/gdm-disable-wayland. Ceci est dû au fait que WaylandEnable=false a été écrit dans /run/gdm/custom.conf, qui prévaut sur /etc/gdm/custom.conf. Pour corriger la situation sans redémarrage, supprimez /run/gdm/custom.conf et redémarrez GDM.\n\n"
    },
    {
      "title": "GDM ne peut pas être activé",
      "level": 3,
      "content": "Consultez systemd/FAQ#Failure to enable unit due to preexisting symlink.\n\n"
    },
    {
      "title": "Voir aussi",
      "level": 2,
      "content": "- Manuel de référence du gestionnaire de connexions GNOME\n\n"
    }
  ]
}