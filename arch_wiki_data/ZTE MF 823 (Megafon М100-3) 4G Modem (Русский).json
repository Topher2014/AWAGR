{
  "title": "ZTE MF 823 (Megafon М100-3) 4G Modem (Русский)",
  "url": "https://wiki.archlinux.org/title/ZTE_MF_823_(Megafon_%D0%9C100-3)_4G_Modem_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Подготовка",
      "level": 2,
      "content": "Скорее всего пригодится usb_modeswitch; установите его.\n\n"
    },
    {
      "title": "Определение устройства",
      "level": 2,
      "content": "Проверьте вывод lsusb. Когда устройство переключено в 1405 product code, должно получиться:\n\n```\n$ Bus 002 Device 018: ID 19d2:1405 ZTE WCDMA Technologies MSM\n```\n\nВ России модем поставляется Мегафоном (модель М100-3, без веб-интерфеса, устанавливается дополнительный софт) и Билайном (имеется веб-интерфейс).\n\nВозможные режимы модема:\n\nЕсли модем не определяется как 19d2:1405 (или 1403), обратитесь к этой статье: USB 3G Modem#Mode switching\n\n"
    },
    {
      "title": "Соединение",
      "level": 2,
      "content": "Если модем определяется как интерфейс Ethernet (проводное соединение), то с ним должна нормально работать обычная настройка сети. Лампочка на модеме (синяя при 2G/3G режиме или зеленая при 4G) не мигает. Для подключения к сети необходимо вставить ссылку (CGI команду) в браузер.\n\nhttp://192.168.0.1/goform/goform_set_cmd_process?goformId=CONNECT_NETWORK\n\nЧтобы не вводить эту команду каждый раз после выключения модема, переключите модем в режим \"автодозвона\"\n\nhttp://192.168.0.1/goform/goform_set_cmd_process?goformId=SET_CONNECTION_MODE&ConnectionMode=auto_dial\n\nЕсли вы подключаетесь из командной оболочки, нужно указать HTTP-заголовок Referer:\n\n```\ncurl --header \"Referer: http://192.168.0.1/index.html\" http://192.168.0.1/goform/goform_set_cmd_process?goformId=CONNECT_NETWORK\n```\n\nБез него вы в ответ получите {\"result\":\"faulure\"}\n\n"
    },
    {
      "title": "Команды",
      "level": 2,
      "content": "CGI команда для выбора режимов 2G/3G/4G:\n\n```\nhttp://192.168.0.1/goform/goform_set_cmd_process?goformId=SET_BEARER_PREFERENCE&BearerPreference=\n```\n\nДобавьте необходимый параметр после знака \"=\" (чувствительны к регистру)\n\n```\nNETWORK_auto (автоматический режим)\nWCDMA_preferred (предпочитать 3G)\nGSM_preferred (предпочитать 2G)\nOnly_GSM (только 2G)\nOnly_WCDMA (только 3G)\nOnly_LTE (только 4G)\nWCDMA_AND_GSM (3G+2G)\nWCDMA_AND_LTE (3G+4G)\nGSM_AND_LTE (2G+4G)\n```\n\nПосле выбора режима необходимо вновь набрать команду NETWORK CONNECT для подключения к сети.\n\nДля перевода модема в диагностический режим (ВНИМАНИЕ! Прием дальнейших CGI команд будет невозможен, соединение прервано!), используйте следующую ссылку:\n\n```\nhttp://192.168.0.1/goform/goform_process?goformId=MODE_SWITCH&switchCmd=FACTORY\n```\n\nМожет потребоваться выполнить следующую команду (как root), чтобы получить доступ к последовательному порту AT-команд:\n\n```\n# echo 0x19d2 0x16 > /sys/module/usbserial/drivers/usb-serial:generic/new_id\n```\n\nПорт должен появиться как /dev/ttyUSBn, например /dev/ttyUSB1. С ним вы можете использовать свою любимую программу эмуляции последовательного терминала для управления устройством. Приведённые ниже команды могут быть особенно полезны (в примерах используется modem-cmd):\n\n```\n# modem-cmd /dev/ttyUSB1 AT+ZCDRUN=8     # установить режим 1403 (RNDIS)\n# modem-cmd /dev/ttyUSB1 AT+ZCDRUN=9     # установить режим 1225 (по умолчанию)\n# modem-cmd /dev/ttyUSB1 AT+ZCDRUN=F     # выйти из диагностического режима и перейти в выбранный режим (RNDIS или по умолчанию)\n```\n\n"
    },
    {
      "title": "Telnet соединение",
      "level": 2,
      "content": "К модему можно подключиться по telnet\n\n```\ntelnet 192.168.0.1\nlogin: root\npassword: zte9x15\n```\n\nКак видите, внутри модема установлен Линукс. Вы можете установить дополнительные программы для ARM-машин (например mc, nano...) или изменить что-то в веб-интерфейсе. Исследуйте модем с осторожностью!\n\n"
    },
    {
      "title": "Возможное использование с кодом 1403",
      "level": 2,
      "content": "По какой-то причине это устройство может зависнуть в режиме 0016 и не переключиться в любой другой режим. Может не удасться переключить режимы с помощью usb_modeswitch или отправить AT-команды на /dev/ttyUSB0. Получалось сменить режим с 0016 на 1403 с помощью Mac OSX, после чего модем начинал работать в Linux.\n\nВ режиме 0016 OSX предоставит следующие интерфейсы:\n\n```\n/dev/tty.ZTEUSBATPort_\n/dev/tty.ZTEUSBModem_\n/dev/tty.ZTEUSBDIAGPort_\n```\n\nПереключиться в режим 1403 можно отправкой AT-команд:\n\n```\nscreen /dev/tty.ZTEUSBModem_ 9600\n\n>>ATI\nManufacturer: ZTE CORPORATION\nModel: MF823\nRevision: MF823_T03\nIMEI: 866948013728723\n+GCAP: +CGSM\n\n>>AT+CREG?\n+CREG: 0,1\nOK\n\n>>AT+COPS?\n+COPS: 0,0,\"Telstra Mobile\",7\nOK\n\n>>AT+ZCDRUN=8+AT+ZCDRUN=F\nexit download mode result(0:FAIL 1:SUCCESS):1\nOK\n```\n\nТеперь устройство должно работать как Ethernet-интерфейс независимо от того, к какой системе вы его подключаете.\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "whirlpool.net.au - Linux & Serial Diags\n\nGsmforum.ru - Обсуждение ZTE MF823, в №7 посте инструкция по разлочке [устаревшая ссылка 2024-07-30 ⓘ]\n\n"
    }
  ]
}