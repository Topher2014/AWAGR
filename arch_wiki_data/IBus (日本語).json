{
  "title": "IBus (日本語)",
  "url": "https://wiki.archlinux.org/title/IBus_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- Fcitx\n- Fcitx5\n- インプットメソッド\n- SCIM\n- UIM\n\nIBus (\"Intelligent Input Bus\") は様々な言語の文字を入力するためのシステムである、インプットメソッドフレームワークのひとつです。IBus は Fcitx, SCIM, UIM と同等の機能を持っています。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 統合\n- 3 設定方法 3.1 GNOME 3.2 その他のデスクトップ環境\n- 4 ヒントとテクニック 4.1 絵文字入力 4.2 Unicode 入力 4.3 トレイアイコンの色 4.4 レイアウトスイッチャーの表示遅延 4.5 修飾キーの組み合わせを使用してレイアウトを切り替える 4.6 rxvt-unicode\n- 5 トラブルシューティング 5.1 pyenvが原因でパッケージが欠落している 5.2 再起動後に設定が削除される 5.3 Ibus IME のパッケージはキーボードのネイティブ文字セットのみを入力します 5.4 キーを押し続けると \"固着\" する\n- 6 参照\n\n- 3.1 GNOME\n- 3.2 その他のデスクトップ環境\n\n- 4.1 絵文字入力\n- 4.2 Unicode 入力\n- 4.3 トレイアイコンの色\n- 4.4 レイアウトスイッチャーの表示遅延\n- 4.5 修飾キーの組み合わせを使用してレイアウトを切り替える\n- 4.6 rxvt-unicode\n\n- 5.1 pyenvが原因でパッケージが欠落している\n- 5.2 再起動後に設定が削除される\n- 5.3 Ibus IME のパッケージはキーボードのネイティブ文字セットのみを入力します\n- 5.4 キーを押し続けると \"固着\" する\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "ibus パッケージをインストールしてください。\n\nさらに、使用可能なインプットメソッドの包括的なリストについては、インプットメソッド#使用可能なインプトメソッドエディターの一覧 を参照してください。\n\n"
    },
    {
      "title": "統合",
      "level": 2,
      "content": "少なくとも以下の 環境変数 を設定してください。\n\n```\n/etc/environment\n```\n\n```\nGTK_IM_MODULE=ibus\nQT_IM_MODULE=ibus\nXMODIFIERS=@im=ibus\n```\n\nユーザーログイン時に IBus を起動するには、以下のコマンドで 自動起動 エントリを作成します。\n\n```\nibus-daemon -rxRd\n```\n\n次回ログイン時に、ユーザーセッションとともに IBus が開始されます。\n\n- ibus-autostartAUR パッケージはこれを 自動起動 するエントリを提供します。\n- ibus-daemonAUR パッケージは ibus@$DISPLAY.service を提供し、これを 有効化 することで実現できます。\n- KDE には Input Method Panel という plasmoid があり、IBus のフロントエンドとして動作し、より良い統合体験を提供できる可能性があります。 Input Method Panel で IBus を起動するには、上記の ibus-daemon コマンドで --panel=/usr/lib/kimpanel-ibus-panel オプションを使用します。入力メソッドパネル ウィジェットを設定するには、KDE UserBase Wiki と KDE#ウィジェット を参照してください。 ibus-autostart-kimpanelAUR パッケージは、自動起動 するエントリを提供します。\n\n- Input Method Panel で IBus を起動するには、上記の ibus-daemon コマンドで --panel=/usr/lib/kimpanel-ibus-panel オプションを使用します。入力メソッドパネル ウィジェットを設定するには、KDE UserBase Wiki と KDE#ウィジェット を参照してください。\n- ibus-autostart-kimpanelAUR パッケージは、自動起動 するエントリを提供します。\n\n"
    },
    {
      "title": "設定方法",
      "level": 2,
      "content": "システムに非ラテン語の言語をサポートするためのヘルプは ロケール を参照してください。\n\n利用可能な非ラテン語フォントの非網羅的なリストについては フォント#ラテン文字 を参照してください。\n\n"
    },
    {
      "title": "GNOME",
      "level": 3,
      "content": "GNOME はデフォルトで IBus を使用しているので、設定 > キーボード > 入力ソース で好きな言語のキーボードレイアウトを追加することができます。\n\n"
    },
    {
      "title": "その他のデスクトップ環境",
      "level": 3,
      "content": "IBus の環境設定ウィンドウを起動するには、以下の方法があります。\n\n- IBus のトレイアイコンを右クリックし、Preferencesを選択します。\n- GUI アプリケーションの IBus Preferences を見つけて起動するか、または\n- ターミナルでコマンド ibus-setup を実行する。\n\nここで注目すべき点は、次のインプットメソッド (デスクトップ環境が提供するデフォルトのショートカットの代わりに使用したいもの) のキーボードショートカットと、異なるキーボードレイアウトを追加または削除できる インプットメソッド タブ (デスクトップ環境のデフォルトレイアウトマネージャの代わりに実行したいもの) です。\n\n"
    },
    {
      "title": "絵文字入力",
      "level": 3,
      "content": "IBus は絵文字アイコンの入力をサポートしています。Ctrl+. または Ctrl+; と入力すると、入力プロンプトが下線付きの e 文字に変わります。次に、必要な絵文字の記号または名前 (例 :) または face) を入力し、Space を押してレンダリングします。結果に満足したら、Enter を押して送信し、絵文字入力モードを終了するか、もう一度 Space を押してダイアログを開き、目的の絵文字をさらにカスタマイズできます。\n\n詳細については、ibus-emoji(7) を参照してください。\n\n"
    },
    {
      "title": "Unicode 入力",
      "level": 3,
      "content": "IBus は複雑な Unicode 文字の入力をサポートしています。 Ctrl+Shift+u と入力すると、入力プロンプトが下線付きの u 文字に変わります。次に、必要な Unicode 文字のコードを入力し、Space または Enter を押して、レンダリングして送信します。\n\n"
    },
    {
      "title": "トレイアイコンの色",
      "level": 3,
      "content": "デフォルトでは、IBus は濃い青色を使用して、現在アクティブなレイアウトの言語記号を表示します(例:EN)色の値は gsettings schema に保存されているため、変更する場合は次のコマンドを実行できます。\n\n```\n$ gsettings set org.freedesktop.ibus.panel xkb-icon-rgba 'COLOR'\n```\n\n文字列 COLOR は​​、次のガイドラインに準拠している必要があります。\n\n```\nThe RGBA value can be 1. a color name from X11, 2. a hex value in form '#rrggbb' where 'r', 'g' and 'b' are hex digits of the red, green, and blue, 3. a RGB color in form 'rgb(r,g,b)' or 4. a RGBA color in form 'rgba(r,g,b,a)' where 'r', 'g', and 'b' are either integers in the range 0 to 255 or percentage values in the range 0% to 100%, and 'a' is a floating point value in the range 0 to 1 of the alpha.\n```\n\n"
    },
    {
      "title": "レイアウトスイッチャーの表示遅延",
      "level": 3,
      "content": "次の入力方法 ホットキーを押すと、IBus はレイアウトスイッチを示す小さなダイアログを表示します。デフォルトでは、このダイアログはキーを押してから400ミリ秒後に表示されますが、この値はユーザーが変更できます。興味深い選択肢として、ダイアログをすぐに表示するための 0 または負の値(-1 など)があります。ウィンドウをまったく表示せずにレイアウトを切り替える (2つのレイアウトのみを使用し、一方から他方に切り替える場合に便利な場合があります。)\n\n値は gsettings schema に保存されるため、変更する場合は次のコマンドを実行できます。\n\n```\n$ gsettings set org.freedesktop.ibus.general switcher-delay-time 'VALUE'\n```\n\n現在保存されている値を表示するには、次のコマンドを実行します。\n\n```\n$ gsettings get org.freedesktop.ibus.general switcher-delay-time\n```\n\n文字列 'VALUE' は、次のガイドラインに準拠している必要があります。\n\nIME スイッチャーウィンドウを表示するポップアップ遅延ミリ秒を設定します。デフォルトは 400 です。\n\n- 0 = Show the window immediately.\n- 0 < Delay milliseconds.\n- 0 > Do not show the window and switch prev/next engines.\n\n"
    },
    {
      "title": "修飾キーの組み合わせを使用してレイアウトを切り替える",
      "level": 3,
      "content": "何らかの理由で、IBus 設定 GUI では、修飾キーの組み合わせのサブセット(Alt+Shift_R など)をレイアウト切り替えホットキーとして使用できません。ただし、IBus はホットキーを文字列として gsettings schema に保存するため、その文字列を直接編集することで、このような組み合わせを引き続き使用できます。\n\n```\n$ gsettings set org.freedesktop.ibus.general.hotkey triggers \"['VALUE']\"\n```\n\n文字列 'VALUE' は、IBus が認識できる形式で記述された有効な修飾キーの組み合わせである必要があります。例えば AltShift_R など。\n\n"
    },
    {
      "title": "rxvt-unicode",
      "level": 3,
      "content": "rxvt-unicode が IBus で正しく機能するためには、次の行を ~/.Xresources に追加する必要がある場合があります。\n\n```\nURxvt.inputMethod: ibus\nURxvt.preeditType: OverTheSpot\n```\n\n"
    },
    {
      "title": "pyenvが原因でパッケージが欠落している",
      "level": 3,
      "content": "python のバージョンと設定を管理するために pyenv を使用している場合、 ibus の依存関係が設定されたグローバルな python バージョンにインストールされないことがあります。これは、グローバルバージョンがシステムで管理されているもの (ibusが依存する依存関係、例えば gi がインストールされるもの) ではない場合に起こり得ます。その結果、ibus のセットアップが起動しているが機能しない (システムトレイに ibus があるが、環境設定が開けない、など) ことがあります。この問題を確認する一つの方法は、ibus-setupを実行してみて、依存関係の欠如のエラーが発生するかどうかを確認することです。\n\nこの問題を修正するには、pyenv グローバルバージョンをシステムバージョンに変更します。:\n\n```\npyenv global system\n```\n\n"
    },
    {
      "title": "再起動後に設定が削除される",
      "level": 3,
      "content": "再起動後に設定が一貫して削除されている (入力メソッドが元に戻されている) 場合は、プリロードされるように設定されているエンジンと、それらがロードされる順序を確認します:\n\n```\n$ gsettings get org.freedesktop.ibus.general preload-engines\n['xkb:us::eng']\n$ gsettings get org.freedesktop.ibus.general engines-order\n['xkb:us::eng', 'anthy']\n```\n\nこの場合に anthy が確実に読み込まれるようにするには、org.freedesktop.ibus.preload-engines リストに追加します。\n\n```\n$ gsettings set org.freedesktop.ibus.general preload-engines \"['xkb:us::eng', 'anthy']\"\n```\n\n変更はすぐに反映され、再起動後も保持されます。\n\n"
    },
    {
      "title": "Ibus IME のパッケージはキーボードのネイティブ文字セットのみを入力します",
      "level": 3,
      "content": "考えられる修正は、GTK_IM_MODULE 環境変数 を ibus ではなく xim に設定することです。\n\n```\n/etc/environment\n```\n\n```\nGTK_IM_MODULE=xim\nQT_IM_MODULE=ibus\nXMODIFIERS=@im=ibus\n```\n\n"
    },
    {
      "title": "キーを押し続けると \"固着\" する",
      "level": 3,
      "content": "特定のゲーム、特に Proton 経由で実行されるゲームでは、キーを数秒間押し続けると、そのキーが再度押されて離されるまで \"固着\" (押されたものとして押され続ける) することがあります。限られたテスト [1] では、IBus デーモンを kill するだけでこの問題が解決することがわかりました。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- GitHub リポジトリ\n\n"
    }
  ]
}