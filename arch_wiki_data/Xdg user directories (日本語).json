{
  "title": "Xdg user directories (日本語)",
  "url": "https://wiki.archlinux.org/title/Xdg_user_directories_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- 環境変数\n- デフォルトアプリケーション\n- XDG Base Directory サポート\n- xdg-menu\n\nfreedesktop.org より:\n\nほとんどのファイルマネージャは、XDG ユーザーディレクトリを特別なアイコンで表示します。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 デフォルトディレクトリの作成\n- 3 カスタムディレクトリの作成\n- 4 設定されているディレクトリを確認\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "xdg-user-dirs をインストールしてください。\n\n"
    },
    {
      "title": "デフォルトディレクトリの作成",
      "level": 2,
      "content": "以下を実行することで、ローカライズされたデフォルトユーザディレクトリの完全なスイートを $HOME ディレクトリ内に自動で作成することができます:\n\n```\n$ xdg-user-dirs-update\n```\n\nこのコマンドを実行すると、以下のことも自動的に行われます:\n\n- ローカルの ~/.config/user-dirs.dirs 設定ファイルの作成: これは、アカウント固有のホームディレクトリを探索し使用するためにアプリケーションによって使用されます。\n- ローカルの ~/.config/user-dirs.locale 設定ファイルの作成: これは、使用中のロケールに合わせて言語を設定するために使用されます。\n\nxdg-user-dirs-update.service ユーザサービスもデフォルトでインストールされ有効化されます。このサービスは、ログインセッションの開始時に上記のコマンドを実行して、ディレクトリを最新に保ちます。\n\n"
    },
    {
      "title": "カスタムディレクトリの作成",
      "level": 2,
      "content": "ローカルの ~/.config/user-dirs.dirs とグローバルの /etc/xdg/user-dirs.defaults どちらの設定ファイルも次のような環境変数を使ってユーザーディレクトリを指定しています: XDG_DIRNAME_DIR=\"$HOME/directory_name\"。設定ファイルのサンプルは以下のようになります (どれもテンプレートのディレクトリです):\n\n```\n~/.config/user-dirs.dirs\n```\n\n```\nXDG_DESKTOP_DIR=\"$HOME/Desktop\"\nXDG_DOCUMENTS_DIR=\"$HOME/Documents\"\nXDG_DOWNLOAD_DIR=\"$HOME/Downloads\"\nXDG_MUSIC_DIR=\"$HOME/Music\"\nXDG_PICTURES_DIR=\"$HOME/Pictures\"\nXDG_PUBLICSHARE_DIR=\"$HOME/Public\"\nXDG_TEMPLATES_DIR=\"$HOME/Templates\"\nXDG_VIDEOS_DIR=\"$HOME/Videos\"\n```\n\nxdg-user-dirs は、適当なユーザーディレクトリを記述しているローカルの設定ファイルを読み込むため、カスタムフォルダを指定することが可能です。例えば ~/.config/user-dirs.dirs の XDG_DOWNLOAD_DIR 変数のカスタムフォルダを $HOME/Internet にすれば、どのアプリケーションもこの変数でこのディレクトリを使用します。\n\nまた、コマンドラインを使ってカスタムフォルダを指定することもできます。例えば以下のコマンドは上述のように設定ファイルを編集したのと同じになります:\n\n```\n$ xdg-user-dirs-update --set DOWNLOAD ~/Internet\n```\n\n"
    },
    {
      "title": "設定されているディレクトリを確認",
      "level": 2,
      "content": "一度設定されれば、xdg-user-dirs で任意のユーザディレクトリを表示することができます。例えば、以下のコマンドは Templates ディレクトリの場所を表示します (もちろん、ローカル設定ファイル内の XDG_TEMPLATES_DIR 変数の値と対応します):\n\n```\n$ xdg-user-dir TEMPLATES\n```\n\n```\neval echo \\${XDG_${1}_DIR:-$HOME}\n```\n\nこれはすなわち、xdg-user-dir によって、サニタイズされていない入力からの任意コード実行が容易になってしまうことを意味します。この酷い実装が上流で修正されない限り、ハードコードされた引数や厳格に検査された引数だけを用いて xdg-user-dir を使用するべきです。\n\n"
    }
  ]
}