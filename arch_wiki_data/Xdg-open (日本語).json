{
  "title": "Xdg-open (日本語)",
  "url": "https://wiki.archlinux.org/title/Xdg-open_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "xdg-utils は XDG MIME Applications を管理するための公式のユーティリティを提供しています。\n\n- xdg-desktop-menu(1) - デスクトップメニュー項目のインストールする\n- xdg-desktop-icon(1) - デスクトップエントリ を各ユーザーのデスクトップにコピーする\n- xdg-email(1) - ユーザが設定しているメールクライアントを通じて、件名やその他の情報も埋めつつメールを作成する\n- xdg-icon-resource(1) - アイコンリソースをインスールする\n- xdg-mime(1) - MIME タイプとそれに結びついているアプリケーションなどを検索する\n- xdg-open(1) - ファイルやURIをユーザーが設定しているアプリケーションで開く\n- xdg-screensaver(1) - スクリーンセーバを有効化、無効化、サスペンドさせる\n- xdg-settings(1) - デフォルトのウェブブラウザや URL ハンドラを設定、取得する\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 使い方 2.1 環境変数 2.2 xdg-mime 2.3 xdg-open 2.4 xdg-settings\n- 3 ヒントとテクニック 3.1 URL スキームハンドラー\n\n- 2.1 環境変数\n- 2.2 xdg-mime\n- 2.3 xdg-open\n- 2.4 xdg-settings\n\n- 3.1 URL スキームハンドラー\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "xdg-utils を インストール してください。\n\n"
    },
    {
      "title": "環境変数",
      "level": 3,
      "content": "xdg-utils は、該当する場合、提供される特殊なプログラムを呼び出すことにより、デスクトップ環境 との統合を試みます。現在の環境の評価は次のとおりです [1]:\n\n- 標準化された XDG_CURRENT_DESKTOP 環境変数が認識されたデスクトップ環境に設定されている場合、対応する値が使用されます。\n- KDE の KDE_FULL_SESSION のような古典的なフォールバックや環境固有の変数が存在する場合、対応する値が使用されます。\n- レガシーな DESKTOP_SESSION 環境変数が、認識されているデスクトップ環境に設定されている場合、対応する値が使われます。\n\nこのプロセスの間、一致するものがあれば、DE 変数は検出されたデスクトップ環境の正規化された値で内部的に上書きされます。したがって、DE はレガシー環境変数であり、xdg-utils の内部状態変数でもあります。例として、XDG_CURRENT_DESKTOP が KDE の場合、xdg-utils は内部的に DE を kde に設定します。一致するものが見つからない場合、既存の XDG_CURRENT_DESKTOP=KDE の値が使用され、XDG_CURRENT_DESKTOP=KDE は XDG_CURRENT_DESKTOP が設定されていないのと等しく、DE=kde となります。この実装の詳細は、デスクトップ環境が検出された場合、事前に設定された DE は無視される という結果をもたらしますので、注目に値します。\n\nxdg-utils が認識する変数の値は次のとおりです:\n\nTable content:\nデスクトップ環境 | XDG_CURRENT_DESKTOP | DE | DESKTOP_SESSION\n– | X-Generic1 | generic | –\nCinnamon | Cinnamon, X-Cinnamon | cinnamon | –\nDeepin | Deepin, DEEPIN, deepin1 | deepin | –\nEnlightenment | ENLIGHTENMENT1 | enlightenment | –\nGNOME | GNOME2 | gnome | gnome\nGNOME Flashback | GNOME-Flashback, GNOME-Flashback:GNOME2 | gnome | gnome\nKDE Plasma | KDE | kde | –\nLXDE | LXDE | lxde | LXDE\nLXQt | LXQt | lxqt | –\nMATE | MATE | mate | mate\nXfce | XFCE | xfce | xfce, xfce4, Xfce Session\n\n1. これは freedesktop.org に登録された環境ではありません。\n1. GNOME Classic モードを含む GNOME のバリエーションは、xdg-utils によってすべて同じものとみなされます。\n\nこれは、xdg-utils によって提供されるスクリプトが 検出 できるもののリストにすぎないことに注意してください。スクリプトは、次の条件下でも、環境に依存しない一般的なアクションを実行します:\n\n- 汎用ルーチンがXDG_CURRENT_DESKTOP=X-Generic または DE=generic で要求された。\n- 環境検出に失敗。関連する環境変数はすべて認識されないか未設定で、古典的なフォールバックでは何もわからなかった。\n- 環境固有のアクションは実行されましたが、プログラムが見つからないなどの理由で失敗しました。\n\n"
    },
    {
      "title": "xdg-mime",
      "level": 3,
      "content": "xdg-mime(1) を参照してください。\n\nファイルの MIME タイプを確認するには:\n\n```\n$ xdg-mime query filetype photo.jpeg\nimage/jpeg\n```\n\nMIME タイプについてデフォルトのアプリケーションを確認するには:\n\n```\n$ xdg-mime query default image/jpeg\ngimp.desktop\n```\n\nMIME タイプについてデフォルトのアプリケーションを設定するには:\n\n```\n$ xdg-mime default feh.desktop image/jpeg\n```\n\nMIME タイプのデフォルトアプリケーションをデバッグするには:\n\n```\n$ env XDG_UTILS_DEBUG_LEVEL=10  xdg-mime query default text/html\nChecking /home/user/.config/mimeapps.list\nChecking /home/user/.local/share/applications/defaults.list and /home/user/.local/share/applications/mimeinfo.cache\nChecking /usr/local/share/applications/defaults.list and /usr/local/share/applications/mimeinfo.cache\nChecking /usr/share/applications/defaults.list and /usr/share/applications/mimeinfo.cache\nqutebrowser.desktop\n```\n\nファイルの MIME タイプを決定する必要がある場合、xdg-mime はデスクトップ環境に適したプログラムを使用しようとします:\n\nTable content:\nデスクトップ環境 | プログラム | パッケージ\nCinnamon | gio | glib2\nGNOME\nGNOME Flashback\nLXDE\nMATE\nXfce\nDeepin | – | –\nEnlightenment\nLXQt\nKDE Plasma | kmimetypefinder | kde-cli-tools\n\n一般的なケースでは、xdg-mime は次のことを行います:\n\n- 存在する場合は mimetype に委譲します。 perl-file-mimeinfo パッケージをインストールする必要があります。\n- 存在する場合は file に委任します。\n\n"
    },
    {
      "title": "xdg-open",
      "level": 3,
      "content": "xdg-open は、 XDG MIME Applications を実装しており多くのプログラムで利用されている リソースオープナー です。使い方は xdg-open(1) を参照して下さい。\n\nxdg-open は、それぞれのデスクトップ環境のネイティブのデフォルトアプリケーションツールを使うようになっており、デスクトップ環境からは独立したツールになっています。\n\nデスクトップ環境が検出されなかった場合は、MIME タイプの検出は XDG 標準では実装されていない file を使うようになります。XDG MIME Applications をデスクトップ環境以外で xdg-open を使いたい場合は、 perl-file-mimeinfo やこれをサポートする リソースオープナー をインストールする必要があります。\n\nxdg-open(1) は多くのアプリケーションで使用される リソースオープナー であり、システムのデスクトップ環境と可能な限り統合しながら XDG MIME アプリケーション標準を実装します。\n\nデスクトップ環境が検出された場合、その提供されたハンドラーが呼び出されます [2]:\n\nTable content:\nデスクトップ環境 | プログラム | パッケージ\nCinnamon | gio | glib2\nGNOME\nGNOME Flashback\nMATE\nDeepin | dde-open | deepin-api\nEnlightenment | enlightenment_open | enlightenment\nKDE Plasma | kde-open1 | kde-cli-tools\nLXDE | pcmanfm | pcmanfm\nLXQt | – | –\nXfce | exo-open2 | exo\n\n1. もし KDE_SESSION_VERSION が設定されていない場合、konqueror の kfmclient が代わりに使われます。KDE Plasma はどのような状況でもこの変数を設定する必要があります。\n1. glib2 の gio も試されます。\n\n一般的なケースでは、xdg-open は次のようになります。\n\n- リソースに関連付けられたデフォルトのデスクトップエントリを xdg-mime に問い合わせ、デスクトップエントリを解析し、そのコマンドを実行する。\n- もし存在すれば、run-mailcap に委譲します。run-mailcapAUR パッケージが インストール されている必要があります。\n- もし存在すれば、mimeopen に委譲します。perl-file-mimeinfo パッケージが インストール されている必要があります。\n\nxdg-mime は XDG MIME Applications 標準を実装するために perl-file-mimeinfo パッケージに依存しているため、デスクトップ環境を使用していない場合は、perl-file-mimeinfo、を インストール または別の リソースオープナー を検討してください。\n\n"
    },
    {
      "title": "xdg-settings",
      "level": 3,
      "content": "xdg-settings(1) を参照して下さい。\n\n全てのウェブ MIME タイプを1つのアプリケーションで開くように設定するには:\n\n```\n$ xdg-settings set default-web-browser firefox.desktop\n```\n\nURL スキームを開くデフォルトのアプリケーションを設定するには:\n\n```\n$ xdg-settings set default-url-scheme-handler irc xchat.desktop\n```\n\n"
    },
    {
      "title": "URL スキームハンドラー",
      "level": 3,
      "content": "URL スキームのデフォルトのアプリケーションを設定するには、x-scheme-handler/* MIME タイプのデフォルトのアプリケーションを変更する必要があるかもしれません。\n\n```\n$ xdg-mime default firefox.desktop x-scheme-handler/https x-scheme-handler/http\n```\n\n"
    }
  ]
}