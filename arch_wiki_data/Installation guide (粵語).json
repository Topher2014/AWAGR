{
  "title": "Installation guide (粵語)",
  "url": "https://wiki.archlinux.org/title/Installation_guide_(%E7%B2%B5%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "呢頁係一個透過官方安裝鏡像整出嚟嘅安裝媒介啟動嘅 live 系統安裝 Arch Linux 嘅教學。隻媒介有無障礙功能（Install Arch Linux with accessibility options）。你可以去 Category:Installation process 睇埋其他安裝方法。\n\n裝之前，麻煩睇睇 FAQ。你都可以讀 Help:Reading 以便理解文中嘅慣例字眼。喺某啲情況下，範例程式碼可能包含佔位符（用 italics 格式化），需要手動替換。\n\n詳情可參考相關嘅 ArchWiki 文章或各程式嘅 文檔。如需互動式幫助，可到 IRC channel 同 論壇。\n\nArch Linux 應該能夠喺任何 x86-64 相容、最少有 512 MiB RAM 嘅機器度執行，但係個 live 系統需要更多嘅記憶。[1] 一個基本嘅安裝需要少過 2 GiB 嘅容量。由於裝嗰陣需要喺遠端軟件存儲庫度攞啲軟體包，因此本教學當你上到網。\n\n"
    },
    {
      "title": "擺安裝鏡像",
      "level": 3,
      "content": "去下載頁，並依足你想點開部機，攞啲 ISO 檔或 netboot 鏡像同對應嘅 GnuPG 簽章。\n\n"
    },
    {
      "title": "驗證簽章",
      "level": 3,
      "content": "建議去驗下個簽章先至好用個鏡像，由其係好易畀人攔截再俾惡意鏡像嘅 HTTP 鏡像源單撈，以防範未然。\n\n喺裝咗 GnuPG 嘅系統度，單撈 PGP 簽章（喺單撈版嘅 Checksums 下面）去 ISO 嗰度嘅目錄，然後驗證下：\n\n```\n$ gpg --keyserver-options auto-key-retrieve --verify archlinux-version-x86_64.iso.sig\n```\n\n或者喺一部裝咗 Arch Linux 嘅機度行：\n\n```\n$ pacman-key -v archlinux-version-x86_64.iso.sig\n```\n\n- 唔喺上文（archlinux.org）下載嘅簽章可以畀人偽造。喺咁嘅情況下，確保用嚟解碼嘅公鑰可以畀另一個金鑰簽名。行 gpg 會畀你公鑰嘅指紋。\n- 你都可以確保公鑰同簽署 ISO 嘅Arch Linux 開發人員嘅指紋一樣，嚟驗證簽章。詳情：w:zh:公開金鑰加密\n\n"
    },
    {
      "title": "準備安裝媒介",
      "level": 3,
      "content": "你可以用 USB 隨身碟、光碟或者有 PXE 嘅網路將個鏡像聲畀目標設備。跟實對應嘅文章去準備媒介。\n\n"
    },
    {
      "title": "開 live 系統",
      "level": 3,
      "content": "1. 將而家開機嘅裝置指定為準備好嘅驅動器。通常你要喺 POST 嗰陣按照螢幕上提示撳個掣先得。你可以參考主機板嘅手冊去瞭解詳情，一目了然。\n1. 見到媒介嘅開機引導程式選單就揀 Arch Linux install medium 再撳 Enter，進入安裝環境。 Tip: 個鏡像喺 UEFI 嗰陣用 systemd-boot，而喺 BIOS 嗰陣用 syslinux 引導。讀 README.bootparams 去攞啟動選項列表。\n1. 你會喺第一個 virtual console 登入做 root，跟住入去 Zsh。\n\n如果想要轉去另一個終端——好似裝嗰陣用 Lynx 嚟睇呢版，撳 Alt+arrow（快捷鍵）。你可以用 mcedit(1)，nano 同 vim 嚟改設定檔。（媒介包含嘅軟體包）\n\n"
    },
    {
      "title": "設定鍵盤配置",
      "level": 3,
      "content": "預設鍵盤配置係 US。想要睇哂全部配罝嘅話，行：\n\n```\n# ls /usr/share/kbd/keymaps/**/*.map.gz\n```\n\n你可以加一個相對嘅檔案名稱到 loadkeys(1)，以更改配置。例如你想要 German 鍵盤配置：\n\n```\n# loadkeys de-latin1\n```\n\n終端字體 喺 /usr/share/kbd/consolefonts/，可以用 setfont(8)。\n\n"
    },
    {
      "title": "確認啟動模式",
      "level": 3,
      "content": "列哂 efivars 目錄就可以確認啟動模式：\n\n```\n# ls /sys/firmware/efi/efivars\n```\n\n如果成功行咗嘅話，系統模式就係 UEFI。如果目錄唔喺度，系統模式應該係 BIOS（或 CSM）。如果你想切換模式，可以參考主機板嘅手冊。\n\n"
    },
    {
      "title": "連上網絡",
      "level": 3,
      "content": "按以下指示連上網：\n\n- 確認你嘅網路介面已被列出同啟動，可以用 ip-link(8)：# ip link\n- 對於無線網路呢，睇下 rfkill 有冇禁用咗網路卡。\n- 連上網絡： 乙太網路——接入網線。 Wi-Fi——用 iwctl 認證無線網路。 流動寬頻數據機——用 mmcli 連到流動網絡。\n- 設定你嘅連線： DHCP：動態 IP 位址和 DNS 伺服器分配 (由 systemd-networkd 同 systemd-resolved 提供) 應該自動工作，包括有線、WLAN 同 WWAN 介面。 靜態 IP 位址：麻煩睇返 Network configuration#Static IP address。\n- 你個以用 ping 嚟驗下個連線：# ping archlinux.org\n\n```\n# ip link\n```\n\n- 乙太網路——接入網線。\n- Wi-Fi——用 iwctl 認證無線網路。\n- 流動寬頻數據機——用 mmcli 連到流動網絡。\n\n- DHCP：動態 IP 位址和 DNS 伺服器分配 (由 systemd-networkd 同 systemd-resolved 提供) 應該自動工作，包括有線、WLAN 同 WWAN 介面。\n- 靜態 IP 位址：麻煩睇返 Network configuration#Static IP address。\n\n```\n# ping archlinux.org\n```\n\n"
    },
    {
      "title": "更新系統時間",
      "level": 3,
      "content": "行 timedatectl(1) 去肯定系統時間幾準確﹕\n\n```\n# timedatectl set-ntp true\n```\n\n行 timedatectl status 就可以查下時間同步服務嘅狀態。\n\n"
    },
    {
      "title": "分割硬碟",
      "level": 3,
      "content": "識別之後，個 live 系統會分配啲硬碟做設備文件，好似 /dev/sda、/dev/nvme0n1 或 /dev/mmcblk0。你可以用 lsblk 或 fdisk 去辨認佢哋。\n\n```\n# fdisk -l\n```\n\n你可以唔理 rom、 loop 同 airoot結尾嘅結果。\n\n以下嘅 分割區 係 必須嘅﹕\n\n- 根目錄 /\n- UEFI 開機用：EFI 系統分區\n\n如果想用 LVM、系統加密或 RAID，而家嗱嗱臨整埋。\n\n用 fdisk 或 parted 去更改分割區表。\n\n```\n# fdisk /dev/the_disk_to_be_partitioned\n```\n\n"
    },
    {
      "title": "分割區示例",
      "level": 4,
      "content": "Table content:\n掛載點 | 分割區 | 分割區類型 | 建議大細\n[SWAP] | /dev/swap_partition | Linux swap | 大過 512 MiB\n/mnt | /dev/root_partition | Linux | 剩低嘅位\n\nTable content:\n掛載點 | 分割區 | 分割區類型 | 建議大細\n/mnt/boot 或 /mnt/efi | /dev/efi_system_partition | EFI system partition | 最細 260 MiB\n[SWAP] | /dev/swap_partition | Linux swap | 多過 512 MiB\n/mnt | /dev/root_partition | Linux x86-64 root (/) | 剩低嘅位\n\n睇埋 Partitioning#Example layouts。\n\n- 喺支援嘅檔案系統上可以用 swap file 設定 Swap 空間。\n- 如果想要用於啟動嘅硬碟有咗 EFI 系統分區，用返原有嗰個。\n\n"
    },
    {
      "title": "格式化分割",
      "level": 3,
      "content": "分區一旦建立咗喇，就要起適當嘅檔案系統。例﹕喺 /dev/root_partition 起一個 Ext4 嘅檔案系統，行：\n\n```\n# mkfs.ext4 /dev/root_partition\n```\n\n如果你為 swap 整咗個分區，用 mkswap(8) 初始化：\n\n```\n# mkswap /dev/swap_partition\n```\n\n詳請﹕File systems#Create a file system\n\n"
    },
    {
      "title": "掛載檔案系統",
      "level": 3,
      "content": "掛載檔案系統到 /mnt。例如根分區係/dev/root_partition：\n\n```\n# mount /dev/root_partition /mnt\n```\n\n用 mkdir(1) 整埋剩低嘅掛載點，包括/mnt/efi，再掛載佢哋。\n\n如果你有一個 swap 分區，用 swapon(8) 啟動佢：\n\n```\n# swapon /dev/swap_partition\n```\n\ngenfstab(8) 之後會偵測到掛載咗嘅檔案系統 swap 空間。\n\n"
    },
    {
      "title": "揀鏡像",
      "level": 3,
      "content": "畀你裝嘅軟體包一定要係 軟件伺服器度下載，啲伺服器喺 /etc/pacman.d/mirrorlist 度定義咗。喺個 live 系統，上咗網喇， reflector 會揀廿個用 HTTPS 、最新嘅伺服器列表，再以速度順序。[2]\n\n伺服器喺個列表度愈高，佢就會愈優先。你可以睇下份檔案，先知自己滿唔滿意。如果唔滿意，編輯份檔案直至你滿意為至，將離你最近嘅伺服器搬到檔案嘅最高嗰度。你可能要考慮下其他因素架。\n\n始終呢份嘢遲啲都會畀 pacstrap 覆製到新系統，所以而家整唔會嘥哂啲時間嘅。\n\n"
    },
    {
      "title": "裝必需嘅軟件",
      "level": 3,
      "content": "用 pacstrap(8) 嚟裝個 base 軟體包， Linux 內核 用普通韌體（firmware）﹕\n\n```\n# pacstrap /mnt base linux linux-firmware\n```\n\n- 你可以唔用 linux 而用你鐘意嘅 內核 取而代之，或者若果你喺個容器度裝就可以完完全全唔裝個。\n- 如果裝喺部虛擬機或容器，你可以唔裝韌體。\n\nbase 冇所有 live 有嘅工具，所以可能需要裝第啲架撐先至有一個五臟俱全、用到嘅系統，如﹕\n\n- 將會用到嘅檔案系統嘅使用者空間架撐，\n- 存取 RAID 或 LVM 分區嘅架撐，\n- 為其他裝置特製嘅普通韌體而唔係 linux-firmware，\n- 網路連線所需嘅嘢，\n- 一個文字編輯器，\n- 喺 man 同 info 度攞文檔嘅軟體包，好似 man-db、man-pages 同 texinfo 噉。\n\n要去裝其他嘢嘅話，將佢哋嘅名加到上面嗰個 pacstrap 命令（並以空間分間）或喺 chroot 咗嗰陣用 pacman。你可以喺 packages.x86_64 揾到所有喺 live 系統用到嘅軟體包。\n\n"
    },
    {
      "title": "Fstab",
      "level": 3,
      "content": "整個 fstab 檔（用 -U 或 -L 令到個檔案以 UUID 或檔案系統標籤（LABEL）嚟定義）：\n\n```\n# genfstab -U /mnt >> /mnt/etc/fstab\n```\n\n檢查下個 /mnt/etc/fstab 檔，如果有誤，編輯份檔。\n\n"
    },
    {
      "title": "Chroot",
      "level": 3,
      "content": "Change root 到個新系統：\n\n```\n# arch-chroot /mnt\n```\n\n"
    },
    {
      "title": "時區",
      "level": 3,
      "content": "設定時區：\n\n```\n# ln -sf /usr/share/zoneinfo/Region/City /etc/localtime\n```\n\n行 hwclock(8) 去整 /etc/adjtime：\n\n```\n# hwclock --systohc\n```\n\n呢個命令假定硬件時鐘為 UTC。詳睇：System time#Time standard\n\n"
    },
    {
      "title": "在地化",
      "level": 3,
      "content": "編輯 /etc/locale.gen：取消註釋 en_US.UTF-8 UTF-8 同其他需要嘅 locale。行下面嘅命令去生成：\n\n```\n# locale-gen\n```\n\n建立 locale.conf(5)，再設定 LANG 變數：\n\n```\n/etc/locale.conf\n```\n\n```\nLANG=en_US.UTF-8\n```\n\n如果你設定咗鍵盤配置，編輯 vconsole.conf(5) 嚟保留更改：\n\n```\n/etc/vconsole.conf\n```\n\n```\nKEYMAP=de-latin1\n```\n\n"
    },
    {
      "title": "網路設定",
      "level": 3,
      "content": "建立 hostname 檔：\n\n```\n/etc/hostname\n```\n\n```\nmyhostname\n```\n\n加對應項目到 hosts(5)：\n\n```\n/etc/hosts\n```\n\n```\n127.0.0.1\tlocalhost\n::1\t\tlocalhost\n127.0.1.1\tmyhostname.localdomain\tmyhostname\n```\n\n如果系統有個永久性 IP 位址，唔該用佢嚟代替 127.0.1.1。\n\n為啱啱裝好嘅環境完成網路設定，好似裝下恰當嘅網路管理軟件。\n\n"
    },
    {
      "title": "Initramfs",
      "level": 3,
      "content": "通常你冇需整個新嘅 initramfs，因為 pacstrap 裝緊內核嗰陣已經行咗 mkinitcpio。\n\n為咗 LVM、系統加密或 RAID，更改 mkinitcpio.conf(5) 再整過 initramfs：\n\n```\n# mkinitcpio -P\n```\n\n"
    },
    {
      "title": "Root 密碼",
      "level": 3,
      "content": "設定 root 密碼：\n\n```\n# passwd\n```\n\n"
    },
    {
      "title": "開機引導程式",
      "level": 3,
      "content": "揀同裝個（同 Linux 相容嘅）boot loader（即開機引導程式）。如果你有個 Intel 或 AMD CPU，啟用埋 microcode 更新。\n\n"
    },
    {
      "title": "重開",
      "level": 2,
      "content": "行 exit 或撳 Ctrl+d 嚟離開 chroot。\n\n你可以用 umount -R /mnt 嚟自行卸載全部分區：噉就可以揾哂任何「繁忙」分區，再用 fuser(1) 令原因水落石出。\n\n最尾行 reboot 重開部電腦：systemd 會自動卸載所有掛載緊嘅分區。記住要移除個安裝媒介，再用 root 簽到新系統。\n\n"
    },
    {
      "title": "裝完喇",
      "level": 2,
      "content": "你可以睇下 General recommendations 以瞭解系統管理同裝完嘅指南（好係係整好一個圖像用家介面、聲同或觸控板噉）。\n\n睇埋 List of applications ，揾下你可能鐘意嘅應用程式。\n\n"
    }
  ]
}