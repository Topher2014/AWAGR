{
  "title": "Upgrading iOS (日本語)",
  "url": "https://wiki.archlinux.org/title/Upgrading_iOS_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "この記事では iTunes を使わずに iDevice の iOS のバージョンをアップデートする方法を説明しています。jailbreak された 6.x デバイスを iOS 7.1 (残念ながら、jailbreak されていません) にアップグレードすることにより、iPad 3 (GSM または \"AT & T\") でテスト済みです。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 イントロダクション\n- 2 必須要件\n- 3 全手順 3.1 ファームウェアファイル 3.2 バックアップ 3.3 新しいファームウェアのインストール 3.4 リストア 3.5 仕上げ\n\n- 3.1 ファームウェアファイル\n- 3.2 バックアップ\n- 3.3 新しいファームウェアのインストール\n- 3.4 リストア\n- 3.5 仕上げ\n\n"
    },
    {
      "title": "イントロダクション",
      "level": 2,
      "content": "iPod/iPad/iPhone は libimobiledevice プロジェクトによってサポートされています。libimobiledevice パッケージにはデータや設定をバックアップ・リストアするための idevicebackup2 など多数のツールが含まれています。\n\nファームウェアのアップデートでは全てのデータが消去されるため、まずはアプリとデータをバックアップする必要があります。\n\n"
    },
    {
      "title": "必須要件",
      "level": 2,
      "content": "ハードウェア:\n\n- iDevice (iPad 3 GSM でテスト済み)\n- USB ケーブル\n- 念の為、十分なバッテリー (30% でテスト済み、終わった時も 30% のままでした)\n\nパッケージ:\n\n- libimobiledevice\n- libirecovery (下を参照)\n- idevicerestore (libirecovery に依存) (下を参照)\n- usbmuxd (1.0.9-1 ではパッチが必要です、下を参照)\n\nリカバリモードの iDevice にアクセスするには権限が必要になります。全てを root で実行するのが気に食わない場合は、udev ルールを作成します:\n\n```\n/etc/udev/rules.d/42-ipad-recovery.rules\n```\n\n```\n# iPad 3 GSM in Recovery Mode, Apple, Inc. Apple Mobile Device [Recovery Mode]\nSUBSYSTEM==\"usb\", ATTRS{idVendor}==\"05ac\", ATTRS{idProduct}==\"1281\", TAG+=\"uaccess\"\n```\n\nidProduct は lsusb で確認してください。\n\nlibirecovery を /tmp/i にビルド・インストールします (コミット 3687ea11271b79fb2643c8f041490544c17c5e58 でテスト、iOS をアップデートした後パッケージは不要になります):\n\n```\ngit clone https://github.com/libimobiledevice/libirecovery.git\ncd libirecovery\n./autogen.sh --prefix=/tmp/i/fs\nmake && make install\n```\n\nidevicerestore をビルド・インストール (コミット 9bc7a528d6ff42211f8d19ffa8ab2c2d371ea8d0 でテスト):\n\n```\ngit clone https://github.com/libimobiledevice/idevicerestore.git\ncd idevicerestore\nPKG_CONFIG_LIBDIR=/usr/lib/pkgconfig:/tmp/i/fs/lib/pkgconfig ../autogen.sh --prefix=/tmp/i/fs\nmake && make install\n```\n\n受信バッファが満杯になったときの接続リセットを修正するパッチのあてられた usbmuxd をインストールします (ベースは 1.0.9-1)。https://github.com/Lekensteyn/aur/tree/master/usbmuxd からファイルを取得して次のコマンドでインストール:\n\n```\nmakepkg -i\n```\n\n"
    },
    {
      "title": "全手順",
      "level": 2,
      "content": "iDevice のアップグレードは以下の手順によります:\n\n- ファームウェアファイルの取得。\n- バックアップの作成。\n- 新しいファームウェアのインストール。\n- バックアップのリストア。\n\n"
    },
    {
      "title": "ファームウェアファイル",
      "level": 3,
      "content": "インストールする前に Apple がアップデートに署名することを求めるので、基本的に、インストールできるファームウェアのバージョンは最新のものだけです。さらに、そのためにアップデート中にインターネット接続が利用できる状態になっている必要があります。\n\nファームウェアのアップデートは \"IPSW\" ファイルとして提供され http://ipswdownloader.com/ で見ることができます。このウェブサイトで、デバイス・モデル・バージョンを選択すれば、一意でないダウンロード URL がわかります。http://appldnld.apple.com/iOS7.1/031-4615.20140310.HJvGp/iPad3,3_7.1_11D167_Restore.ipsw のような感じです (iPad 3 (GSM) 7.1)。このファイルはとても大きいので注意してください (例のバージョンでは 1.33 GiB)。\n\n"
    },
    {
      "title": "バックアップ",
      "level": 3,
      "content": "デバイスが既に接続されているとして ~/ibackup にバックアップを保存したい場合:\n\n```\nidevicebackup2 backup --full ~/ibackup/\n```\n\nこのバックアップには設定 (Wi-Fi, Apple ID など) とメディア (写真と動画)、アプリ設定が含まれます。アプリそのものはバックアップに含まれないので注意してください。アプリは App Store から手動でインストールすることができます。\n\n"
    },
    {
      "title": "新しいファームウェアのインストール",
      "level": 3,
      "content": "実際のファームウェアのインストールには約8分かかります。インストールの中で、SHSH ブロブが Apple のサーバーから取得されます。この署名がないと、ファームウェアのインストールはできません。\n\n```\n/tmp/i/fs/bin/idevicerestore -e iPad3,3_7.1_11D167_Restore.ipsw\n```\n\n出力 (\"COMMENT\" はインラインコメントを、<snip> は行の省略を示しています):\n\n```\nFound device in Recovery mode\n<snip>\nAbout to send filesystem...\nConnected to ASR\nValidating the filesystem\nFilesystem validated\nSending filesystem now...\n[==================================================] 100.0%\nDone sending filesystem\nRestoring image (14)\n[==================================================] 100.0%\nChecking filesystems (16)\nChecking filesystems (16)\nAbout to send KernelCache...\n<snip>\nSending Baseband TSS request...\nRequest URL set to https://gs.apple.com/TSS/controller?action=2\nSending TSS request attempt 1... response successfully received\nReceived Baseband SHSH blobs\n[==================================================] 100.0%\nSending BasebandData now...\nDone sending BasebandData\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\nFlashing NOR (19)\n    COMMENT: フリーズしてるように見えるかもしれませんが、しばらく待ってください\nUpdating Baseband completed.\nMounting filesystems (17)\nUnknown operation (49)\nUnknown operation (25)\nUnknown operation (51)\nWaiting for NAND (29)\nWaiting for NAND (29)\nGot status message\nStatus: Restore Finished\nCleaning up...\nDONE\n```\n\nファームウェアのアップデートが完了すると、デバイスは勝手に再起動して多数の言語でこんにちはと表示されます。続けてデバイスの設定を行なって \"新しいデバイスとして設定\" (もしくはそれに類似するテキスト), \"iCloud から復元\", \"iTunes から復元\" という選択肢が表示されるところまで進めます。ここで \"iTunes から復元\" を選んで次の手順に進んで下さい。\n\n"
    },
    {
      "title": "リストア",
      "level": 3,
      "content": "デバイスが既に接続済みであらかじめ ~/ibackup にバックアップを作成したとします。ファクトリーリセットを行った後は (もしくはファームウェアのアップデートの後) 次のコマンドを実行してください:\n\n```\nidevicebackup2 restore --reboot --system --settings ~/ibackup/\n```\n\n"
    },
    {
      "title": "仕上げ",
      "level": 3,
      "content": "アップデートが終わっても App Store からアプリをインストールする必要があります。新しい機能の設定を確認してプライバシーやセキュリティに何か問題がないかチェックしましょう。\n\n"
    }
  ]
}