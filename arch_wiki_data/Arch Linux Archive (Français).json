{
  "title": "Arch Linux Archive (Français)",
  "url": "https://wiki.archlinux.org/title/Arch_Linux_Archive_(Fran%C3%A7ais)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Articles apparentés\n\n- Downgrading packages (Français)\n\nL'Arch Linux Archive (alias ALA), anciennement connue sous le nom de Arch Linux Rollback Machine (alias ARM), stocke les instantanés des dépôts officiels, les images iso et les archives d'amorçage «bootstrap» dans le temps.\n\nVous pouvez l'utiliser pour :\n\n- rétrograder à une version précédente d'un paquet (la dernière version est cassée, je veux la précédente)\n- Restaurer tous vos paquets à un moment précis (mon système est cassé, je veux revenir 2 mois en arrière)\n- Trouver une version précédente d'une image ISO\n\nLes paquets ne sont conservés que pendant quelques années, après quoi ils sont déplacés vers les Archives Arch Linux Historiques sur archive.org.\n\n"
    },
    {
      "title": "Localisation",
      "level": 2,
      "content": "L'archive d'Arch Linux est disponible sur https://archive.archlinux.org/ et ses miroirs à travers le monde.\n\nLe code source est également disponible pour la création de votre propre miroir.\n\n"
    },
    {
      "title": "Architecture",
      "level": 2,
      "content": "L'Archive se présente comme suit:\n\n```\n├── iso\n├── packages\n└── repos\n```\n\n"
    },
    {
      "title": "/repos",
      "level": 3,
      "content": "Le répertoire repos contient des instantanés quotidiens des dépôts officiels organisés selon les dates:\n\n```\nrepos\n├── 2013\n│   ├── 08\n│   │   └── 31\n│   │       ├── community\n│   │       ├── community-staging\n│   │       ├── community-testing\n│   │       ├── core\n│   │       ├── extra\n│   │       ├── gnome-unstable\n│   │       ├── kde-unstable\n│   │       ├── lastsync\n│   │       ├── multilib\n│   │       ├── multilib-staging\n│   │       ├── multilib-testing\n│   │       ├── pool\n│   │       ├── staging\n│   │       └── testing\n│   ├── 09\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │   ├── 21\n│   │   └── 22\n│   ├── 10\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 11\n│   └── 12\n├── 2014\n│   ├── 01\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 02\n│   ├── 03\n│   ├── ...\n│   └── 09\n│       ├── 01\n│       ├── ...\n│       └── 28\n├── last\n├── month\n└── week\n```\n\nNote : Les 3 derniers répertoires spéciaux (last, week et month) qui renvoient respectivement au dernier dépôt synchronisé, au dernier lundi et au premier du mois en cours.\n\n"
    },
    {
      "title": "/packages",
      "level": 3,
      "content": "Le répertoire packages contient toutes les versions de chaque paquet avec leur signature. Un répertoire par paquet et les répertoires de paquets sont regroupés par leur première lettre:\n\n```\n├── packages\n│   ├── a\n│   │   ├── awesome\n│   │   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst\n│   │   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst.sig\n│   │   │   ├── awesome-4.3-3-x86_64.pkg.tar.zst\n│   │   │   ├── awesome-4.3-3-x86_64.pkg.tar.zst.sig\n│   │   │   ├── ...\n│   │   │\n│   │   ├── ...\n│   │   ├── awstats\n│   │   └── axel\n│   │   \n│   ├── b\n│   ├── ...\n│   └── z\n```\n\nVous pouvez utiliser le répertoire .all pour accéder à tous les paquets par leur nom. En un mot, toutes les versions de tous les paquets sont présentes dans un seul répertoire.\n\n```\n├── packages\n│   ├── .all\n│   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst\n│   │   ├── ...\n│   │   ├── zsh-5.8-1-x86_64.pkg.tar.zst\n│   │   ├── zsh-5.8.1-1-x86_64.pkg.tar.zst\n│   │   └── ...\n```\n\nVous pouvez télécharger la liste complète des paquets (il y a plus de cent mille paquets) sous forme d'index compressé : index.0.xz.\n\n```\n$ curl https://archive.archlinux.org/packages/.all/index.0.xz | unxz\n```\n\n```\n0ad-a23.1-2-x86_64\n0ad-a23.1-3-x86_64\n...\nzziplib-0.13.69-1-x86_64\nzziplib-0.13.70-1-x86_64\n```\n\n"
    },
    {
      "title": "/isos",
      "level": 3,
      "content": "Le répertoire iso contient des images ISO officielles et des archives d'amorçage triés par date de sortie.\n\n```\n├── 2014.09.03\n├── 2014.10.01\n├── 2014.11.01\n├── 2014.12.01\n├── 2015.07.01\n├── 2015.08.01\n├── 2015.09.01\n└── 2017.04.01\n    ├── arch\n    ├── archlinux-2017.04.01-x86_64.iso\n    ├── archlinux-2017.04.01-x86_64.iso.sig\n    ├── archlinux-2017.04.01-x86_64.iso.torrent\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz.sig\n    ├── md5sums.txt\n    └── sha1sums.txt\n```\n\n"
    },
    {
      "title": "Comment rétrograder un paquet",
      "level": 3,
      "content": "Trouvez le paquet que vous voulez sous /packages et laissez pacman le récupérer pour l'installer. Par exemple :\n\n```\n# pacman -U https://archive.archlinux.org/packages/path/packagename.pkg.tar.xz\n```\n\nEn laissant pacman le récupérer, le fichier détaché .sig du paquet sera automatiquement téléchargé et vérifié selon les paramètres de /etc/pacman.conf.\n\nVous pouvez également télécharger et installer le paquet manuellement en utilisant pacman -U.\n\nConsultez également Downgrading packages (Français)#Automatisation pour des outils qui simplifient le processus.\n\n"
    },
    {
      "title": "Comment restaurer tous les paquets à une date spécifique",
      "level": 3,
      "content": "Pour restaurer tous les paquets à leur version à une date spécifique, disons le 30 mars 2014, vous devez diriger pacman vers cette date, en éditant votre /etc/pacman.conf et utiliser la configuration serveur suivante :\n\n```\n/etc/pacman.conf\n```\n\n```\n[core]\nSigLevel = PackageRequired\nServeur=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n\n[extra]\nSigLevel = PackageRequired\nServeur=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nou en remplaçant votre /etc/pacman.d/mirrorlist par le contenu suivant :\n\n```\n/etc/pacman.d/mirrorlist\n```\n\n```\n##                                                                              \n## Liste des miroirs du dépôt d'Arch Linux                                             \n### Généré le 2042-01-01                                                      \n##\nServeur=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nNote: **devez** \n\nEnsuite, mettez à jour la base de données et forcez le «downgrade» :\n\n```\n# pacman -Syyuu\n```\n\nSi vous obtenez des erreurs se plaignant de paquets corrompus/invalides à cause de la signature PGP, essayez d'abord de mettre à jour séparément archlinux-keyring et ca-certificates. Vous pouvez également décider de désactiver temporairement la vérification de la signature désactiver la vérification des signatures.\n\n"
    },
    {
      "title": "Archive historique",
      "level": 2,
      "content": "La maintenance des archives d'Arch Linux nécessite une quantité importante de ressources, c'est pourquoi les anciens paquets sont nettoyés de temps en temps.\n\nAvant de les supprimer, les anciens paquets sont téléchargés sur une collection dédiée \"Arch Linux Historical Archive\" sur archive.org.\n\nL'archive historique ne fournit pas un moyen d'accéder à un \"instantané\" des paquets Arch à un moment donné dans le temps. Cependant, il y a une redirection sur archive.archlinux.org pour que les téléchargements d'anciens paquets soient redirigés vers l'archive historique sur archive.org. Il ne devrait pas y avoir d'impact visible du côté des utilisateurs, à l'exception du fait que archive.org est généralement assez lent pour les téléchargements.\n\n"
    },
    {
      "title": "Trouver des paquets dans l'archive historique",
      "level": 3,
      "content": "La collection Arch Linux Historical Archive possède un index de tous les paquets : https://archive.org/details/archlinuxarchive.\n\nIl est également possible d'accéder directement à un paquet par son identifiant. Le modèle général pour les identifiants est archlinux_pkg_sanitized_package_name.\n\nPour obtenir le nom de paquet assaini («sanitized»), il suffit de remplacer tout caractère @, + ou . dans le nom du paquet par un caractère de soulignement _.\n\nPar exemple, l'identifiant de lucene++ est archlinux_pkg_lucene__.\n\nVous pouvez alors accéder à la page de détails d'un paquet via son identifiant, par exemple : https://archive.org/details/archlinux_pkg_lucene__.\n\nIl est également possible d'effectuer des recherches avec le client Python archive.org :\n\n```\n$ ia search subject:\"archlinux package\" subject:'mysql'\n```\n\n```\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql\"}\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql-svn\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-db-mysql\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-mysql\"}\n{\"identifier\": \"archlinux_pkg_libgda-mysql\"}\n```\n\n"
    },
    {
      "title": "Téléchargement de paquets depuis l'archive historique",
      "level": 3,
      "content": "Toutes les versions disponibles des paquets (et leur signature) sont accessibles via la page de téléchargement d'un paquet : https://archive.org/download/archlinux_pkg_lucene__.\n\nPour télécharger, vérifier et installer un paquet en utilisant pacman :\n\n```\n# pacman -U https://archive.org/download/archlinux_pkg_cjdns/cjdns-20.5-1-x86_64.pkg.tar.zst\n```\n\nLa vérification du paquet est contrôlée par l'option RemoteFileSigLevel de pacman. Notez que si vous utilisez pacman, vous devez déterminer vous-même les dépendances.\n\nIl est également possible d'utiliser le client Python archive.org.\n\nTélécharger une version spécifique d'un paquet :\n\n```\n$ ia download archlinux_pkg_cjdns cjdns-20.5-1-x86_64.pkg.tar.zst{,.sig}\n```\n\nTélécharger toutes les versions x86_64 d'un paquet, avec les signatures :\n\n```\n$ ia download archlinux_pkg_cjdns --glob=\"*x86_64.pkg.tar.*\"\n```\n\n"
    },
    {
      "title": "Historique",
      "level": 2,
      "content": "- L'ARM originale (Archlinux Rollback Machine) a été fermé le 2013-08-18. [1]\n- Elle a été par la suite hébergée sur seblu.net depuis 2013-08-31.\n- Nouvelle URL et fermeture de l'ancienne hiérarchie ARM le 2015-10-13. Un nouveau logiciel, agetpkg-gitAUR a été introduit.\n- Déplacement vers archive.archlinux.org le 2015-12-19. [2]\n- Anciens paquets de 2013-2016 téléchargés sur archive.org le 2018-06-05.\n\n"
    }
  ]
}