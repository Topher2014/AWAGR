{
  "title": "Advanced Linux Sound Architecture/Configuration examples (Português)",
  "url": "https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture/Configuration_examples_(Portugu%C3%AAs)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Este artigo deve servir como um guia para configurações mais avançadas do ALSA. A configuração fica armazenada em /etc/asound.conf como mencionado no artigo principal. Nenhuma das configurações abaixo tem a garantia de funcionar.\n\n"
    },
    {
      "title": "Upmixagem de fontes stereo para 7.1 usando dmix enquanto fontes saturadas não ficam upmixadas",
      "level": 2,
      "content": "```\n# 2008-11-15\n#\n# Esse .asoundrc vai permitir o seguinte:\n#\n# - upmix com arquivos stereo para alto-falantes 7.1.\n# - reproduzir sons em 7.1 real, em alto-falantes 7.1,\n# - permitir a reprodução de ambas fontes stereo(upmixado) e surround(7.1) ao mesmo tempo\n# - usar o 6º e 7º canal (alto-falantes laterais) como uma placa de som separada, i,e, para fones de ouvido\n#   (Isso é chamado de saída \"alternativa\" ao longo deste arquivo, nomes de dispositivos prefixados com 'a')\n# - reproduz fontes mono em stereo (como skype & ekiga) na saída alternativa\n#\n# Certifique-se de ter \"8 Channels\" e NÃO \"6 Channels\" selecionado no alsamixer!\n#\n# Por favor tente os seguintes comandos, para se certificar que tudo está funcionado como deveria.\n#\n# Testar upmix stereo:       speaker-test -c2 -Ddefault -twav\n# Testar surround(5.1):      speaker-test -c6 -Dplug:dmix6 -twav\n# Testar surround(7.1):      speaker-test -c6 -Dplug:dmix8 -twav\n# Testar saída alternativa:  speaker-test -c2 -Daduplex -twav\n# Testar upmix mono:         speaker-test -c1 -Dmonoduplex -twav\n#\n#\n# Ele pode não funcionar sem uma configuração manual para todas as placas. Se não funcionar para você, leia\n# os comentários ao longo deste arquivo.\n# A base deste arquivo foi escrito por wishie de #alsa e, então, modificado com as informações de várias fontes\n# por squisher. Svenstaro modificou-o para suporte a saída 7.1.\n\n# Defina a placa de som para usar\npcm.snd_card {\n    type hw\n    card 0\n    device 0\n}\n\n# dmix de 8 canal - saída de qualquer áudio, para todos os 8 alto-faltantes\npcm.dmix8 {\n    type dmix\n    ipc_key 1024\n    ipc_key_add_uid false\n    ipc_perm 0660\n    slave {\n        pcm \"snd_card\"\n        rate 48000\n        channels 8\n        period_time 0\n        period_size 1024\n        buffer_time 0\n        buffer_size 5120\n    }\n\n# Algumas placas, como as variantes \"nforce\" exigem que o seguinte seja descomentado.\n# Ele roteia o áudio para os alto-falantes corretos.\n#    bindings {\n#        0 0\n#        1 1\n#        2 4\n#        3 5\n#        4 2\n#        5 3\n#        6 6\n#        7 7\n#    }\n}\n\n# upmixing - duplica dados stereo para todos os 8 canais\npcm.ch71dup {\n    type route\n    slave.pcm dmix8\n    slave.channels 8\n    ttable.0.0 1\n    ttable.1.1 1\n    ttable.0.2 1\n    ttable.1.3 1\n    ttable.0.4 0.5\n    ttable.1.4 0.5\n    ttable.0.5 0.5\n    ttable.1.5 0.5\n    ttable.0.6 1\n    ttable.1.7 1\n}\n\n# isso cria uma placa de som de seis canais\n# e emite para o oitavo canal\n# i.e. para uso de mplayer, tive que definir em ~/.mplayer/config:\n#   ao=alsa:device=dmix6\n#   channels=6\npcm.dmix6 {\n    type route\n    slave.pcm dmix8\n    slave.channels 8\n    ttable.0.0 1\n    ttable.1.1 1\n    ttable.2.2 1\n    ttable.3.3 1\n    ttable.4.4 1\n    ttable.5.5 1\n    ttable.6.6 1\n    ttable.7.7 1\n}\n\n# compartilha o microfone, i.e. porque virtualbox pega-o por padrão\npcm.microphone {\n    type dsnoop\n    ipc_key 1027\n    slave {\n        pcm \"snd_card\"\n    }\n}\n\n# taxa de conversão, necessário para i.e. wine\npcm.2chplug {\n    type plug\n    slave.pcm \"ch71dup\"\n}\npcm.a2chplug {\n    type plug\n    slave.pcm \"dmix8\"\n}\n\n# roteia o canal para a alternativa\n# saída de 2 canais que se torna o 7º e 8º canal\n# na placa de som real\n#pcm.alt2ch {\n#    type route\n#    slave.pcm \"a2chplug\"\n#    slave.channels 8\n#    ttable.0.6    1\n#    ttable.1.7    1\n#}\n\n# skype e ekiga são apenas mono, então roteia canal esquerdo para o canal direito\n# nota: isso roteia 2 canais para a alternativa\npcm.mono_playback {\n    type route\n    slave.pcm \"a2chplug\"\n    slave.channels 8\n    # Envia canal 0 do Skype para os alto-falantes L e R no volume máximo\n    #ttable.0.6    1\n    #ttable.0.7    1\n}\n\n# dispositivo \"full-duplex\" para uso com aoss\npcm.duplex {\n    type asym\n    playback.pcm \"2chplug\"\n    capture.pcm \"microphone\"\n}\n\n#pcm.aduplex {\n#    type asym\n#    playback.pcm \"alt2ch\"\n#    capture.pcm \"microphone\"\n#}\n\npcm.monoduplex {\n    type asym\n    playback.pcm \"mono_playback\"\n    capture.pcm \"microphone\"\n}\n\n# para aoss\npcm.dsp0 \"duplex\"\nctl.mixer0 \"duplex\"\n\n# softvol gerencia volume no alsa\n# i.e. wine gosta disso\npcm.mainvol {\n    type softvol\n    slave.pcm \"duplex\"\n    control {\n        name \"2ch-Upmix Master\"\n        card 0\n    }\n}\n\n#pcm.!default \"mainvol\"\n\n# define o dispositivo padrão de acordo com o ambiente\n# variável ALSA_DEFAULT_PCM e padrão para mainvol\npcm.!default {\n    @func refer\n    name { @func concat \n           strings [ \"pcm.\"\n                     { @func getenv\n                       vars [ ALSA_DEFAULT_PCM ]\n                       default \"mainvol\"\n                     }\n           ]\n         }\n}\n\n# descomente o seguinte se você deseja ser capaz de controlar\n# o dispositivo mixador também por meio de variáveis de ambiente\n#ctl.!default {\n#    @func refer\n#    name { @func concat \n#           strings [ \"ctl.\"\n#                     { @func getenv\n#                       vars [ ALSA_DEFAULT_CTL\n#                              ALSA_DEFAULT_PCM\n#                       ]\n#                       default \"duplex\"\n#                     }\n#           ]\n#         }\n#}\n```\n\n"
    },
    {
      "title": "Surround51 incl. stereo de upmix & dmix, troca L/R, alto-falante em posição ruim na sala",
      "level": 2,
      "content": "Prática ruim, mas funciona bem para a quase tudo sem personalização adicional per-programa/arquivo:\n\n```\npcm.!default {\n    type route\n## encaminha para mixer pcm definido abaixo\n    slave.pcm dmix51\n    slave.channels 6\n\n## \"Canais Nativos\" stereo, troca esquerda/direita\n    ttable.0.1 1\n    ttable.1.0 1\n## esquerda/direita original comentada\n#    ttable.0.0 1\n#    ttable.1.1 1\n\n## rota \"surround nativo\" de forma que ele ainda funcione, mas com sinal\n## mais fraco (+ troca RL/RF), porque meus alto-falantes traseiros são\n## mais aleatórios do que realmente atrás de mim\n    ttable.2.3 0.7\n    ttable.3.2 0.7\n    ttable.4.4 0.7\n    ttable.5.5 0.7\n\n## stereo => \"upmix\" de quatro alto-falantes para alto-falantes \"traseiros\" + troca L/R\n    ttable.0.3 1\n    ttable.1.2 1\n\n## stereo L+R => junta ao Centro & Subwoofer 50%/50%\n    ttable.0.4 0.5\n    ttable.1.4 0.5\n    ttable.0.5 0.5\n    ttable.1.5 0.5\n## para testar: \"$ speaker-test -c6 -twav\" e: \"$ speaker-test -c2 -twav\"\n}\n\npcm.dmix51 {\n\ttype dmix\n\tipc_key 1024\n# deixe múltiplos usuários compartilhar\n\tipc_key_add_uid false \n# permissões IPC (octal, padrão 0600)\n# acho que alterar isso corrigiu algo - mas não tenho certeza do quê.\n\tipc_perm 0660 # \n\tslave {\n## isso é específico para meu hda_intel. Geralmente hd:0 já está bom; Para localizar: $ aplay -L \n\t\tpcm surround51 \n# essa taxa faz minha placa de som crepitar\n#\t\trate 44100\n# essa taxa evita flash o firefox de reproduzir som, mas eu não preciso disso\n       rate 48000\n       channels 6\n## Quaisquer outros valores nas 4 linhas abaixo parecem fazer minha placa de som crepitar também\n       period_time 0\n       period_size 1024\n       buffer_time 0\n       buffer_size 4096\n\t}\n}\n```\n\n"
    }
  ]
}