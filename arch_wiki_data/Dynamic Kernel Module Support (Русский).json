{
  "title": "Dynamic Kernel Module Support (Русский)",
  "url": "https://wiki.archlinux.org/title/Dynamic_Kernel_Module_Support_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Из Википедии:\n\nЭто означает, что пользователь может не ждать, пока какая-то компания, проект или сопроводитель пакета выпустит новую версию модуля. После введения хуков pacman пересборка модулей осуществляется автоматически во время обновления ядра.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установите пакет dkms и заголовочные файлы требуемого ядра/ядер. Например, для ядра по умолчанию linux соответствует linux-headers. Другие ядра имеют собственные пакеты с заголовочными файлами.\n\nЗначительное число модулей, не включенных в ядро, имеют DKMS вариант; некоторые из них размещаются в официальных репозиториях, но большинство из них можно найти только в AUR.\n\n"
    },
    {
      "title": "Обновления",
      "level": 2,
      "content": "Обычно пересборка модулей DKMS во время обновления ядра выполняется бесшовно, но что-то может пойти не так. Следует обратить особое внимание на вывод pacman! Это, в частности, относится к тем системам, которым требуется модуль DKMS для успешной загрузки и/или если вы используете DKMS с ядром не из официальных репозиториев.\n\nДля того, чтобы следовать изменениям в ядре, исправить ошибки или добавить необходимый функционал, подумайте об обновлении соответствующего пакета DKMS перед перезагрузкой.\n\n"
    },
    {
      "title": "Использование",
      "level": 2,
      "content": "Использование DKMS вручную.\n\nАвтозавершение по Tab будет доступно после выполнения команды:\n\n```\n# source /usr/share/bash-completion/completions/dkms\n```\n\n"
    },
    {
      "title": "Список модулей",
      "level": 3,
      "content": "Чтобы увидеть текущее состояние модулей, версий и ядер внутри дерева, выполните:\n\n```\n# dkms status\n```\n\n"
    },
    {
      "title": "Пересборка модулей",
      "level": 3,
      "content": "Пересборка всех модулей для текущего ядра:\n\n```\n# dkms autoinstall\n```\n\nили для конкретного ядра:\n\n```\n# dkms autoinstall -k 3.16.4-1-ARCH\n```\n\nСборка конкретного модуля для текущего ядра:\n\n```\n# dkms install -m nvidia -v 334.21\n```\n\nили просто:\n\n```\n# dkms install nvidia/334.21\n```\n\nСборка модуля для всех ядер:\n\n```\n# dkms install nvidia/334.21 --all\n```\n\n"
    },
    {
      "title": "Удаление модулей",
      "level": 3,
      "content": "Удаление модуля (старые автоматически не удаляются):\n\n```\n# dkms remove -m nvidia -v 331.49 --all\n```\n\nили просто:\n\n```\n# dkms remove nvidia/331.49 --all\n```\n\nЕсли пакет dkms удален, то теряется информация о предыдущих файлах сборки модуля. В этом случае, перейдите в директорию /usr/lib/modules/kernel_release и /var/lib/dkms/package_name и удалите все файлы и каталоги, которые больше не используются.\n\n"
    },
    {
      "title": "Создание DKMS пакета",
      "level": 2,
      "content": "Смотрите руководство.\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Linux Journal: Exploring Dynamic Kernel Module Support\n\n"
    }
  ]
}