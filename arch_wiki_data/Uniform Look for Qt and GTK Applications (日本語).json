{
  "title": "Uniform Look for Qt and GTK Applications (日本語)",
  "url": "https://wiki.archlinux.org/title/Uniform_Look_for_Qt_and_GTK_Applications_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- GTK\n- Qt\n\nQt と GTK ベースのプログラムは異なるウィジェットツールキットを使ってグラフィカルユーザーインターフェースを表示しています。それぞれにデフォルトで異なるテーマ・スタイル・アイコンセットが存在するため、\"ルックアンドフィール\"は著しく乖離してしまいます。この記事ではデスクトップエクスペリエンスを統合するために Qt と GTK のアプリケーションの外観を似たようにする方法を説明しています。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 概要\n- 2 Qt と GTK 両方のためのスタイル 2.1 GTK プログラム向けの元は Qt ベースだったテーマ 2.1.1 Breeze 2.2 Qt プログラム向けの元は GTK ベースだったテーマ 2.2.1 Adwaita 2.2.2 Kvantum に移植された GTK テーマ 2.2.2.1 テーマ設定\n- 3 テーマエンジン 3.1 QGtk3Style 3.2 QGtkStyle 3.3 QAdwaitaDecorations 3.4 QWhiteSurGtkDecorations\n- 4 ヒントとテクニック 4.1 Qt アプリで GTK のアイコンテーマを使う 4.2 KDE Plasma で GTK3 アプリケーションにタイトルバーとフレームを追加する 4.3 KDE Plasma での GTK アプリのサブピクセルレンダリングを改善 4.4 KDE Plasma での一貫性のあるファイルダイアログ 4.4.1 アプリケーション固有の設定\n- 5 トラブルシューティング 5.1 GTK アプリでテーマが使えない 5.2 システムをアップグレードすると SVG (Breeze) アイコンが GTK アプリで使用されない 5.3 GTK アプリが KDE システム設定を完全には使用しない 5.4 kde-gtk-config の \"システム設定 > アプリケーションスタイル > GTK\" メニューが無い 5.5 Dolphin のテーマが Nautilus と良くマッチしない 5.6 KDE Plasma の XDG Desktop Portal が使用されない 5.7 Qt5: kvantum is not available as a style in the Qt settings app\n\n- 2.1 GTK プログラム向けの元は Qt ベースだったテーマ 2.1.1 Breeze\n- 2.2 Qt プログラム向けの元は GTK ベースだったテーマ 2.2.1 Adwaita 2.2.2 Kvantum に移植された GTK テーマ 2.2.2.1 テーマ設定\n\n- 2.1.1 Breeze\n\n- 2.2.1 Adwaita\n- 2.2.2 Kvantum に移植された GTK テーマ 2.2.2.1 テーマ設定\n\n- 2.2.2.1 テーマ設定\n\n- 3.1 QGtk3Style\n- 3.2 QGtkStyle\n- 3.3 QAdwaitaDecorations\n- 3.4 QWhiteSurGtkDecorations\n\n- 4.1 Qt アプリで GTK のアイコンテーマを使う\n- 4.2 KDE Plasma で GTK3 アプリケーションにタイトルバーとフレームを追加する\n- 4.3 KDE Plasma での GTK アプリのサブピクセルレンダリングを改善\n- 4.4 KDE Plasma での一貫性のあるファイルダイアログ 4.4.1 アプリケーション固有の設定\n\n- 4.4.1 アプリケーション固有の設定\n\n- 5.1 GTK アプリでテーマが使えない\n- 5.2 システムをアップグレードすると SVG (Breeze) アイコンが GTK アプリで使用されない\n- 5.3 GTK アプリが KDE システム設定を完全には使用しない\n- 5.4 kde-gtk-config の \"システム設定 > アプリケーションスタイル > GTK\" メニューが無い\n- 5.5 Dolphin のテーマが Nautilus と良くマッチしない\n- 5.6 KDE Plasma の XDG Desktop Portal が使用されない\n- 5.7 Qt5: kvantum is not available as a style in the Qt settings app\n\n"
    },
    {
      "title": "概要",
      "level": 2,
      "content": "2つのツールキットで同じような見た目を表示するには以下を修正する必要が出てきます:\n\n- テーマ: アプリケーションやウィジェットセットなどの外観のカスタマイズ。テーマは通常、スタイル・アイコンテーマ・カラーテーマから成ります。\n- スタイル: ウィジェットセットのグラフィカルレイアウトと外観。\n- アイコンテーマ: グローバルアイコンのセット。\n- カーソルテーマ: スタイルと合わせて使われるグローバルカラーのセット。\n\n外観の統一のために取れる方法は様々です:\n\n- 下で説明しているツールを使って GTK と Qt のスタイルを別個に修正し、同じような見た目のテーマ (スタイル・カラー・アイコン・カーソル・フォント) を選択する。\n- 特殊なテーマエンジンを使って、他のグラフィカルツールキットの見た目をメインのツールキットに合うように仲介させる。\n\n"
    },
    {
      "title": "Qt と GTK 両方のためのスタイル",
      "level": 2,
      "content": "統合のために、Qt と GTK 両方で記述・提供されているウィジェットスタイルのセットが存在し、全ての主要なバージョンが含まれています。このようなスタイルを使うことで、アプリケーションが使っているツールキットに関係なく全てのアプリケーションの見た目を一つにすることが可能です。\n\n"
    },
    {
      "title": "GTK プログラム向けの元は Qt ベースだったテーマ",
      "level": 3,
      "content": "もともと Qt 環境用に作られたテーマだったが、後に GTK に移植されたテーマがあります。\n\n"
    },
    {
      "title": "Breeze",
      "level": 4,
      "content": "Breeze は KDE Plasma のデフォルトの Qt スタイルであり、breeze パッケージでインストールできます。GTK 2 と GTK 3 のテーマは breeze-gtk パッケージでインストールできます。\n\nパッケージをインストールしたら、GTK の設定ツールを使って GTK のテーマを変更してください。\n\nKDE Plasma を使用している場合、kde-gtk-config をインストールし、ログインし直して KDE システム設定 > 外観 > アプリケーションスタイル > GNOME/GTK のアプリケーションスタイルを設定… を開いてください。KDE システム設定におけるフォント、アイコン、カーソル、そしてウィジェットのスタイルセットは、自動的に GTK の設定に適用されます。GTK テーマだけは、前述のモジュールを使って手動で設定する必要があります。\n\n"
    },
    {
      "title": "Qt プログラム向けの元は GTK ベースだったテーマ",
      "level": 3,
      "content": "もともと GTK 環境用に作られたテーマだったが、後に Qt に移植されたテーマがあります。\n\n"
    },
    {
      "title": "Adwaita",
      "level": 4,
      "content": "Table content:\nこの記事またはセクションは情報が古くなっています。 理由: Adwaita-qt プロジェクトはメンテナンスされておらず、もはや活発に開発されていません。[1] (Discuss)\n\nAdwaita はデフォルトの GNOME テーマです。GTK 3 バージョンは gtk3 パッケージに含まれています。一方、GTK 2 バージョンは gnome-themes-extra にあります。adwaita-qt は Adwaita テーマの Qt 移植です。GTK 2 テーマを模倣する #QGtkStyle とは異なり、adwaita-qt は GTK 3 Adwaita に見えるように作られたネイティブな Qt スタイルを提供します。Qt 4、5、そして 6 のバージョンはそれぞれパッケージ adwaita-qt4AUR、adwaita-qt5-gitAUR、そして adwaita-qt6-gitAUR でインストールできます。\n\nQt スタイルをデフォルトとして設定するには:\n\n- Qt 5 の場合、環境変数 QT_STYLE_OVERRIDE=adwaita を設定することで有効化できます。あるいは、qt5ct パッケージを使用してください。より詳細な手順は、Qt#KDE Plasma 以外の環境での Qt 5/6 アプリケーションの設定 を参照してください。\n- Qt 4 の場合、Qt Configuration (qtconfig-qt4) で有効化できます。Appearance > GUI Style で adwaita を選択してください。あるいは、/etc/xdg/Trolltech.conf (システム全体) か ~/.config/Trolltech.conf (ユーザ固有) を編集してください:\n\n```\n~/.config/Trolltech.conf\n```\n\n```\n...\n[Qt]\nstyle=adwaita\n...\n```\n\n"
    },
    {
      "title": "Kvantum に移植された GTK テーマ",
      "level": 4,
      "content": "Kvantum (kvantum) は、Adapta、Arc、Ambiance、Libadwaita、そして Materia などいくつかの人気な GTK テーマのバージョンを含む、様々な組み込みスタイルが同梱されている Qt6 用の SVG ベースのスタイルカスタマイザーです。その他のテーマは KDE Store で入手可能です。Qt5 に関しては、さらに kvantum-qt5 パッケージも必要です。\n\nKvantum は、Qt プラットフォームのテーマとしてではなく、Qt スタイルとして機能します。Kvantum をすべての Qt アプリケーションに対して設定するには、Qt6 に対しては qt6ct で、Qt5 に対しては qt5ct で設定してください。あるいは、環境変数 QT_STYLE_OVERRIDE=kvantum を使うこともできます。\n\n(KvLibadwaita などの) Kvantum のテーマバリアントを設定するには、設定ファイルを編集してください:\n\n```\n/etc/xdg/Kvantum/kvantum.kvconfig (あるいは ~/.config/Kvantum/kvantum.kvconfig)\n```\n\n```\n...\ntheme=KvLibadwaita\n...\n```\n\nまたは、kvantummanager GUI を使用してください。\n\n"
    },
    {
      "title": "テーマエンジン",
      "level": 2,
      "content": "テーマエンジンは、1つあるいは複数のツールキット間でテーマ (アイコンは除く) を翻訳する薄いレイヤー API と考えることができます。これらのエンジンはプロセスに余分なコードを追加するため、この種の解決方法がネイティブのスタイルを使うのと比べ最適なのかどうかは議論の余地があります。\n\n"
    },
    {
      "title": "QGtk3Style",
      "level": 3,
      "content": "これは、バージョン 5.7.0 以降の qt5-base [2] と qt6-base に組み込まれているプラットフォームテーマです。現在の GTK3 スタイルに合わせて Qt5 と Qt6 のアプリケーションの外観も設定することができます。これは環境変数 QT_QPA_PLATFORMTHEME=gtk3 を設定することで有効化できます。Adwaita を使用している場合は、#QAdwaitaDecorations と一緒に使用することで外観を完全にすることができます。\n\n"
    },
    {
      "title": "QGtkStyle",
      "level": 3,
      "content": "この Qt スタイルは GTK 2 を使って全てのコンポーネントをレンダリングすることで、GNOME やそれと似たような GTK ベースの環境とブレンドします。Qt 4.5 から、このスタイルは Qt に含まれています。gtk2 をインストール・設定する必要があります。\n\nQGtkStyle は Cinnamon、GNOME、そして Xfce におけるデフォルトの Qt4 スタイルです。また Cinnamon、GNOME、MATE、LXDE、そして Xfce におけるデフォルトの Qt5 スタイルでもあります。他の環境では:\n\n- Qt4 の場合、Qt Configuration (qtconfig-qt4) で有効にすることができます。Appearance > GUI Style から GTK を選択してください。もしくは、/etc/xdg/Trolltech.conf (システム全体) あるいは ~/.config/Trolltech.conf (ユーザー個別) ファイルを編集してください:\n\n```\n~/.config/Trolltech.conf\n```\n\n```\n...\n[Qt]\nstyle=GTK+\n...\n```\n\n- Qt 5 の場合、qt5-stylepluginsAUR をインストールし、次の環境変数を設定することで有効にできます: QT_QPA_PLATFORMTHEME=gtk2\n\n- Qt 6 の場合、qt6gtk2AUR をインストールして qt6ct で qt6gtk2 を選択するか、あるいは 次の環境変数を設定することで有効化できます: QT_QPA_PLATFORMTHEME=gtk2\n\n完全な統合のために、設定された GTK テーマが GTK 2 と GTK 3 の両方をサポートしていることを確認してください。GTK2 を使用するように Qt を設定したあとにテーマのレンダリングの一貫性が失われてしまった場合、gtk-theme-switch2AUR をインストールしテーマを選択してください。優先テーマが /usr/share/themes にインストールされていることも確認するべきでしょう。アクティブな GTK 2 テーマは $XDG_DATA_HOME/themes ディレクトリからスキャンされないからです。\n\n"
    },
    {
      "title": "QAdwaitaDecorations",
      "level": 3,
      "content": "QAdwaitaDecorations は、Wayland に対して Adwaita ライクなクライアントサイド装飾を実装する Qt の装飾プラグインです。これは qadwaitadecorations-qt5AUR と qadwaitadecorations-qt6AUR でインストールできます。インストール後、QT_WAYLAND_DECORATION=adwaita 環境変数を設定してください。\n\n"
    },
    {
      "title": "QWhiteSurGtkDecorations",
      "level": 3,
      "content": "QWhiteSurGtkDecorations は、Wayland で WhiteSur-gtk のようなクライアントサイド装飾を実装する Qt 装飾プラグインです。qwhitesurgtkdecorations-qt5AUR と qwhitesurgtkdecorations-qt6AUR でインストールできます。インストール後に、QT_WAYLAND_DECORATION=whitesur-gtk 環境変数を設定してください。\n\n"
    },
    {
      "title": "Qt アプリで GTK のアイコンテーマを使う",
      "level": 3,
      "content": "Plasma を使っている場合は、kde-gtk-config を実行して、KDE システム設定 > アプリケーションスタイル > GTK でアイコンテーマを選択してください。\n\nGNOME を使っている場合は、dconf-editor を実行して、org > gnome > desktop > interface にある icon-theme キーをあなたの好みのアイコンテーマに変更してください。\n\nデスクトップ環境 を使っていない場合、例えば i3-wm で最小限のシステムを動かしているのなら、dconf-editor をインストールして、上記の説明に従ってアイコンテーマを設定してください。 また、プロファイルの DESKTOP_SESSION の値も設定する必要があるかもしれません。望ましい結果を得るために可能な方法については 環境変数#変数の定義 を参照してください。\n\n```\n$ awk -F= '/icon-theme/ {print $2}' ~/.gtkrc-2.0\n```\n\n"
    },
    {
      "title": "KDE Plasma で GTK3 アプリケーションにタイトルバーとフレームを追加する",
      "level": 3,
      "content": "GNOME/GTK アプリケーションを KDE/Plasma タイトルバーとフレームで表示するには、GTK#クライアントサイドデコレーションで説明されているようにクライアントサイドの装飾を無効にします。\n\n"
    },
    {
      "title": "KDE Plasma での GTK アプリのサブピクセルレンダリングを改善",
      "level": 3,
      "content": "こちらを参照 フォント設定#LCD フィルター\n\n"
    },
    {
      "title": "KDE Plasma での一貫性のあるファイルダイアログ",
      "level": 3,
      "content": "Table content:\nこの記事またはセクションの正確性には問題があります。 理由: GTK は GTK_USE_PORTAL=1 を GDK_DEBUG=portals に置き換えたようです。 https://gitlab.gnome.org/GNOME/gtk/-/blob/636827800525770715bba96671edb2fc0234ccc2/NEWS#L34 (議論: トーク:Qt と GTK アプリケーションの外観の統合#)\n\n同じファイルダイアログを表示させるために、XDG デスクトップ ポータル を使うことができます。\n\nxdg-desktop-portal と xdg-desktop-portal-kde をインストールし、環境変数 GTK_USE_PORTAL=1 を設定してください。\n\n現在、全ての GTK アプリケーションが KDE ファイルダイアログを正しくサポートしているわけではないことに注意してください。\n\nElectron を使用するアプリケーションは、最低でも Electron 14 を使用していて (#19159 を参照)、この機能を適切に実装している必要があります。\n\nVSCode には問題を修正するためのプルリクエストがあります。#126113 を参照してください。\n\nGIMP は portal の使用をまだ実装していません。バグレポートを参照してください。\n\n```\n$ awk -F\\\" '/<bookmark href=\"file/ {print $2}' < $HOME/.local/share/user-places.xbel > $HOME/.config/gtk-3.0/bookmarks\n```\n\nあるいは、bookmarksync-gitAUR をそのような目的で使用することができます。これを使用すると、ブックマークを編集したり、両方向へ同期させたりできます。\n\n"
    },
    {
      "title": "アプリケーション固有の設定",
      "level": 4,
      "content": "環境変数による方法に加えて、一部の GTK アプリケーションには XDG ポータルを強制的に使用させるための独自の設定が存在します:\n\n- Firefox — Firefox#XDG Desktop Portal との統合 を参照\n\n"
    },
    {
      "title": "GTK アプリでテーマが使えない",
      "level": 3,
      "content": "設定したスタイルやテーマエンジンが GTK アプリケーションで表示されない場合は、おそらく GTK の設定ファイルが何らかの理由でロードされていません。次を実行することでシステムが設定ファイルをどこにあると期待しているか確認できます:\n\n```\n$ export | grep gtk\n```\n\n通常、期待されるファイルは GTK1 は ~/.gtkrc、GTK 2.x は ~/.gtkrc2.0 または ~/.gtkrc2.0-kde です。\n\n"
    },
    {
      "title": "システムをアップグレードすると SVG (Breeze) アイコンが GTK アプリで使用されない",
      "level": 3,
      "content": "次のコマンドを実行してみてください:\n\n```\n# gdk-pixbuf-query-loaders --update-cache\n```\n\n"
    },
    {
      "title": "GTK アプリが KDE システム設定を完全には使用しない",
      "level": 3,
      "content": "GTK アプリで Plasma 設定をさらに統合するには、gnome-settings-daemon、gsettings-desktop-schemas、および gsettings-qt をインストールする必要があるかもしれません。これにより、GTK に適切な Qt バインディングが提供されます。\n\n"
    },
    {
      "title": "kde-gtk-config の \"システム設定 > アプリケーションスタイル > GTK\" メニューが無い",
      "level": 3,
      "content": "kde-gtk-config が壊れてシステム設定から \"アプリケーションスタイル > GTK\" メニューが無くなった場合、lxappearance や nwg-look のような GTK 設定ツールを選ぶと GTK 2 と GTK 3 のスタイルを構成できるようになります。 lxappearance は LXDE プロジェクト由来ですが、デスクトップに依存していません (つまり、LXDE デスクトップの他のパーツを必要としません)。nwg-look は GTK3 設定エディタであり、wlroots ベースの Wayland 環境で適切に動作するように設計されています。nwg-look のルックアンドフィールは LXAppearance による影響を強く受けていますが、いくつかの不便さからユーザを開放することを意図しています。\n\n"
    },
    {
      "title": "Dolphin のテーマが Nautilus と良くマッチしない",
      "level": 3,
      "content": "フォルダビューの背景色がシステムのテーマと合わない のセクションで、変な色使いの対処法を確認してください。\n\n"
    },
    {
      "title": "KDE Plasma の XDG Desktop Portal が使用されない",
      "level": 3,
      "content": "XDG デスクトップ ポータル#デスクトップ環境を強制する 章に書かれてあることに従い、XDG_CURRENT_DESKTOP=KDE 環境変数を設定してください。\n\n"
    },
    {
      "title": "Qt5: kvantum is not available as a style in the Qt settings app",
      "level": 3,
      "content": "kvantum-qt5 がインストールされていることを確認してください。\n\n"
    }
  ]
}