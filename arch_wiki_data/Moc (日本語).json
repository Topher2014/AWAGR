{
  "title": "Moc (日本語)",
  "url": "https://wiki.archlinux.org/title/Moc_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Music On Console は MPD に似た軽量の音楽プレーヤーですが、それとは異なり、MOC にはインターフェイスが付属しており、そのサーバーはリモートアクセスをサポートしていません。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 PulseAudio\n- 2 フロントエンド\n- 3 設定 3.1 PulseAudio を使う 3.2 ナビゲーション 3.3 systemd サービスファイル 3.4 テーマ\n- 4 使用方法\n- 5 scrobbling\n- 6 トラブルシューティング 6.1 MOC が起動しない 6.2 変な文字が表示される 6.3 FATAL_ERROR: Layout1 is malformed 6.4 MOC が開始される前に接続されていないと Bluetooth が機能しない\n- 7 参照\n\n- 1.1 PulseAudio\n\n- 3.1 PulseAudio を使う\n- 3.2 ナビゲーション\n- 3.3 systemd サービスファイル\n- 3.4 テーマ\n\n- 6.1 MOC が起動しない\n- 6.2 変な文字が表示される\n- 6.3 FATAL_ERROR: Layout1 is malformed\n- 6.4 MOC が開始される前に接続されていないと Bluetooth が機能しない\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "moc パッケージを インストール してください。\n\n"
    },
    {
      "title": "PulseAudio",
      "level": 3,
      "content": "PulseAudio のサポートが必要な場合 moc-pulseAUR または moc-pulse-svnAUR をインストールしてください。また、PulseAudio ドライバーを使用するには、PulseAudio を使う に移動してください。\n\n"
    },
    {
      "title": "フロントエンド",
      "level": 2,
      "content": "- mocicon — MOC を制御する GTK パネルアプレット\n\n- eXo — MOC の Qt フロントエンド、scrobbling をサポート\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "パッケージにはサンプル設定ファイルが含まれており、/usr/share/doc/moc/ にあります。mocp を最初に実行したときにローカルの ~/.moc/ ディレクトリが作成されます。設定したいときは、サンプルをコピーして適宜編集を加えてください。\n\nテーマは /usr/share/moc/themes に保存されており、~/.moc/config で設定が可能です。詳しくは /usr/share/moc/themes/example_theme を参照。\n\nキーバインドのカスタマイズについては、/usr/share/doc/moc/keymap.example を見てください。\n\nOSS v4.1 で Moc を使いたい場合、OSS#MOC を参照。\n\n"
    },
    {
      "title": "PulseAudio を使う",
      "level": 3,
      "content": "moc-pulseAUR か moc-pulse-svnAUR をインストールした上で、SoundDriver 変数を設定し PULSEAUDIO: を先頭にします。\n\n```\nSoundDriver = PULSEAUDIO:JACK:ALSA:OSS\n```\n\nこれにより PulseAudio が優先的に使用され、使用できない場合に他のドライバーが読み込まれるようになります。\n\n"
    },
    {
      "title": "ナビゲーション",
      "level": 3,
      "content": "方向キーでディレクトリを変更したい場合は ~/.moc/config の以下の行をアンコメントしてください:\n\n```\nKeymap = keymap\n```\n\nそして ~/.moc/keymap を以下のように編集:\n\n```\ngo    = ENTER RIGHT\ngo_up = U LEFT\n#seek_forward  = RIGHT\n#seek_backward = LEFT\n```\n\nナビゲーションやデタッチを高速化するには、~/.moc/config に以下の設定をします:\n\n```\nReadTags = no\nShowTime = no\nTagsCacheSize = 0\n```\n\n"
    },
    {
      "title": "systemd サービスファイル",
      "level": 3,
      "content": "ユーザーごとにサービスを 有効化 してください。\n\n```\n/etc/systemd/system/moc@.service\n```\n\n```\n[Unit]\nDescription=MOC server\nConditionPathExists=/usr/bin/mocp\nAfter=network.target sound.target\n\n[Service]\nRemainAfterExit=yes\nUser=%I\nExecStart=/usr/bin/mocp -S\nExecStop=/usr/bin/mocp -x\nWorkingDirectory=/home/%I/\n\n[Install]\nWantedBy=multi-user.target\n```\n\n"
    },
    {
      "title": "テーマ",
      "level": 3,
      "content": "プレーヤー GUI にはいくつかのテーマが用意されています。利用可能なテーマをリストして設定するには、ホットキー T を使用します。 永続的に設定するには、設定ファイル ~/.moc/config を使用します。\n\n```\nTheme = laras_theme\n```\n\nテーマの例は /usr/share/moc/themes/ にあります。mocp-themes-gitAUR をインストールするとさらに多くのテーマが追加されます。\n\nテーマは単なるテキストファイルなので、新しいテーマを簡単に作成できます。ユーザー定義のテーマは ~/.moc/themes/ に 置いて下さい。\n\nテーマファイルの例:\n\n```\nbackground                     = white black\nframe                          = white black\nwindow_title                   = white black\ndirectory                      = white black\nselected_directory             = white black reverse\nplaylist                       = white black\nselected_playlist              = white black reverse\nfile                           = white black\nselected_file                  = white black reverse\nselected_info                  = white black reverse\nmarked_file                    = white black bold\nmarked_selected_file           = white black reverse\ninfo                           = white black\nmarked_info                    = white black bold\nmarked_selected_info           = white black reverse\nstatus                         = white black\ntitle                          = white black bold\nstate                          = white black\ncurrent_time                   = white black bold\ntime_left                      = white black bold\ntotal_time                     = white black bold\ntime_total_frames              = white black\nsound_parameters               = white black bold\nlegend                         = white black\ndisabled                       = white black\nenabled                        = white black bold\nempty_mixer_bar                = white black\nfilled_mixer_bar               = white black reverse\nempty_time_bar                 = white black\nfilled_time_bar                = white black reverse\nentry                          = white black\nentry_title                    = white black\nerror                          = white black bold\nmessage                        = white black\nplist_time                     = white black\n```\n\n"
    },
    {
      "title": "使用方法",
      "level": 2,
      "content": "mocp を実行してサーバーとインターフェイスを起動します。便利なデフォルトのショートカット (詳細については h を押してください):\n\nTable content:\nトラックの再生を開始もしくはディレクトリに入る | Enter\nトラックを停止 | Space または p\n次のトラックを再生 | n\n前のトラックを再生 | b\n5秒進める | ]\n5秒戻す | [\nプレイリストのブラウジングからファイルシステムのブラウジングに切替 (逆も同じ) | Tab\nトラックをプレイリストに追加 | a\nフォルダを再帰的にプレイリストに追加 | Shift+a\nトラックをプレイリストから削除 | d\nプレイリストをクリア | Shift+c\nボリュームを 1% 増加 | >\nボリュームを 1% 減少 | <\nボリュームを 5% 増加 | . (ドット)\nボリュームを 5% 減少 | , (カンマ)\nボリュームを 10% に変更 | Alt+1\nボリュームを 20% に変更 | Alt+2\nサーバーから MOC をデタッチ | q\n終了 | Shift+q\n\nサーバーをシャットダウンするには、mocp -x コマンドを実行します。\n\n"
    },
    {
      "title": "scrobbling",
      "level": 2,
      "content": "mocp-scrobblerAUR は MOC の Last.fm/Libre.fm scrobbler であり、再生中の通知・デーモン化・キャッシュをサポートしています。Python 3 に依存しています。\n\nサンプルファイルをユーザーの設定ディレクトリにコピーしてください:\n\n```\n$ mkdir ~/.mocpscrob/\n$ cp /usr/share/doc/mocp-scrobbler/config.example  ~/.mocpscrob/config\n```\n\n~/.mocpscrob/config を編集してログイン名とパスワードを追加してください。パスワード変数は password_md5 を最初に実行したときに置き換えられます。元の値を MD5 アルゴリズムでハッシュ化した値になります。パスワードを変更する場合、新しいパスワードをもう一度入力してください。それで password_md5 も置き換えられます。\n\nトラックを scrobble するには、mocp の前に mocp-scrobbler をデーモンとして起動してください。以下の エイリアス が使えます:\n\n```\nalias mocp='/usr/bin/mocp-scrobbler.py -d; mocp'\n```\n\n2016年1月に last.fm はパスワードの要件を更新しており、新しいパスワードでは次の文字列のなかのどれか1文字を必ず含まなければなりません: !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~ または空白。新しい基準を満たさないパスワードを mocpscrob の設定で指定すると認証エラーが発生します。パスワードを変更して ~/.mocpscrob/config を更新することで問題は解決します。\n\n"
    },
    {
      "title": "MOC が起動しない",
      "level": 3,
      "content": "MOC が起動しない場合、おそらく ~/.moc/ の中に何か問題があります。修正を加えるか、フォルダ全体を削除してください。\n\n"
    },
    {
      "title": "変な文字が表示される",
      "level": 3,
      "content": "通常の線 (縦線など) の代わりに moc に変な文字列が表示される場合、MOC と互換性がないフォントセットを使っている可能性があります。適当なフォントに変更するか、.moc/config を編集して ASCII で線を表示するようにしてください:\n\n```\nASCIILines = no\n```\n\n"
    },
    {
      "title": "FATAL_ERROR: Layout1 is malformed",
      "level": 3,
      "content": "MOC がこのエラーでクラッシュする場合、以下のどちらかの行を .moc/config に追加してみてください:\n\n```\nLayout1 = directory(0,0,50%,100%): playlist(50%,0,100%,100%)\n```\n\nまたは\n\n```\nLayout1 = directory(0,0,50%,100%): playlist(50%,0,FILL,100%)\n```\n\noriginal report や Debian bugs を参照。\n\n"
    },
    {
      "title": "MOC が開始される前に接続されていないと Bluetooth が機能しない",
      "level": 3,
      "content": "pipewire を使用する場合、MOC はデフォルトで JACK に設定されますが、これがこの問題の原因であると考えられます。設定ファイル内の次の値を変更することで、単に jack から ALSA に変更するだけでこの問題を解決できます。\n\nDefault value:\n\nJACK:OSS:ALSA\n\nNew value:\n\nALSA:OSS:JACK\n\nMOC は最初に動作するオーディオドライバーを選択するため、ALSA が最初に選択されます。これにより Bluetooth の問題が解決されるはずです。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- 公式ドキュメント\n\n"
    }
  ]
}