{
  "title": "Mouse acceleration (日本語)",
  "url": "https://wiki.archlinux.org/title/Mouse_acceleration_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- マウスボタン\n- マウスのポーリングレート\n\nマウスのアクセラレーションを設定する方法は使用しているウィンドウプロトコル (Xorg または Wayland) によって異なります。\n\n- Xorg ではマウスのアクセラレーションを設定する方法は複数あります:\n\n- xorg の設定ファイルを編集する。\n- xorg-xset と xorg-xinput パッケージにはそれぞれ xset と xinput が入っています。\n- ほとんどのデスクトップ環境にはマウスを設定するための設定 GUI が備わっています。\n\n- Wayland を使用している場合、libinput でマウスイベントを制御できます。libinput による設定を反映させるのはコンポジタの仕事です。全てのコンポジタで共通の設定方法はまだ存在しません [1]。\n- GNOME は独自にマウスのアクセラレーションを管理します。dconf-editor をインストールして org/gnome/desktop/peripherals/mouse/acceleration-profile の値を設定することで \"adaptive\" と \"flat\" プロファイルを選択できます。また、gnome-tweaks を使って org/gnome/desktop/peripherals/mouse/acceleration-profile を編集することも可能です。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 libinput を使用する場合のマウスの速度 1.1 速度を変更する 1.2 永続的な設定\n- 2 マウスのアクセラレーションを設定する 2.1 xorg 設定 2.2 xinput を使う 2.3 設定サンプル\n- 3 マウスのアクセラレーションの無効化 3.1 libinput を使う 3.2 KDE Plasma のマウス設定から\n\n- 1.1 速度を変更する\n- 1.2 永続的な設定\n\n- 2.1 xorg 設定\n- 2.2 xinput を使う\n- 2.3 設定サンプル\n\n- 3.1 libinput を使う\n- 3.2 KDE Plasma のマウス設定から\n\n"
    },
    {
      "title": "libinput を使用する場合のマウスの速度",
      "level": 2,
      "content": "adaptive ポインターアクセラレーションプロファイルを使用している場合、libinput は DPI と Acceleration Speed パラメータに基づいてマウスのアクセラレーションを計算します [2]。libinput は evdev によって報告された解像度を使用します [3]。xset m によるフィードバック設定は無視されます。flat ポインターアクセラレーションプロファイルを使用している場合、ポインターの速度に関係なくアクセラレーションは一定になります。デバイスと画面上のポインタが1対1で移動します。\n\n"
    },
    {
      "title": "速度を変更する",
      "level": 3,
      "content": "xinput list でデバイスの id を確認して以下のコマンドでアクセラレーション速度を設定してください。アクセラレーション速度は [-1,1] の範囲で指定する必要があります。アクセラレーション速度の値によってどのように変化するのか こちらの図 で確認することができます。\n\n```\n$ xinput --set-prop <device id> 'libinput Accel Speed' <acceleration factor>\n```\n\n以下のコマンドで変更結果を確認できます:\n\n```\n$ xinput --list-props <device id>\n```\n\n"
    },
    {
      "title": "永続的な設定",
      "level": 3,
      "content": "libinput は設定オプションを保存せず、設定の管理は呼び出し側に任せています。Wayland ではデスクトップ環境によって設定が適用されます。X では xf86-input-libinput が xorg の設定ファイルを読み込んでオプションを適用します [4]。X で設定を永続化するには以下のようなファイルを作成してください:\n\n```\n/etc/X11/xorg.conf.d/99-libinput-custom-config.conf\n```\n\n```\nSection \"InputClass\"\n  Identifier \"<something to identify this snippet>\"\n  MatchDriver \"libinput\"\n  MatchProduct \"<substring of the device name>\"\n  Option \"AccelSpeed\" \"<e.g. 0.3>\"\nEndSection\n```\n\n他のオプションについては libinput(4) を参照。\n\n"
    },
    {
      "title": "xorg 設定",
      "level": 3,
      "content": "詳しくは xorg.conf(5) を見て下さい。例:\n\n```\n/etc/X11/xorg.conf.d/50-mouse-acceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tMatchIsPointer \"yes\"\n# set the following to 1 1 0 respectively to disable acceleration.\n\tOption \"AccelerationNumerator\" \"2\"\n\tOption \"AccelerationDenominator\" \"1\"\n\tOption \"AccelerationThreshold\" \"4\"\nEndSection\n```\n\n```\n/etc/X11/xorg.conf.d/50-mouse-deceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tMatchIsPointer \"yes\"\n# some curved deceleration\n#\tOption \"AdaptiveDeceleration\" \"2\"\n# linear deceleration (mouse speed reduction)\n\tOption \"ConstantDeceleration\" \"2\"\nEndSection\n```\n\nclass セクションの中で \"MatchProduct\", \"MatchVendor\" などの match を使うことで、特定のハードウェアだけに設定を適用することもできます。lsusb を実行することで match で使用できるプロダクト名とメーカーを確認できます:\n\n```\n$ lsusb -v | grep -e idProduct -e idVendor\n```\n\nデバイスがわからない場合、xinput list を実行してみてください。Logitech Unifying Recceiver を使用しているデバイスは同一の USB 接続を共有するため、lsusb を使用してもマウスは認識されません。\n\n"
    },
    {
      "title": "xinput を使う",
      "level": 3,
      "content": "まず、接続されているデバイスのリストを得ます (バーチャルポインタは無視します):\n\n```\n$ xinput list\n```\n\nID を覚えておいてください。ID が変わってしまう場合、コマンドでフルネームを使うこともできます。\n\n利用できるプロパティと現在の値のリストを得ます\n\n```\n$ xinput list-props 9\n```\n\n9 は使いたいデバイスの ID です。もしくは名前を使います\n\n```\n$ xinput list-props 'Bobs mouse brand'\n```\n\nBobs mouse brand は xinput list によって表示されたマウスの名前にしてください\n\n例として、Constant Deceleration プロパティを 2 にするには:\n\n```\n$ xinput list-props 9\n```\n\n```\nDevice 'mouse brand':\n       Device Enabled (121):   1\n       Device Accel Profile (240):     0\n       Device Accel Constant Deceleration (241):       1.000000\n       Device Accel Adaptive Deceleration (243):       1.000000\n       Device Accel Velocity Scaling (244):    10.000000\n```\n\n```\n$ xinput --set-prop 'mouse brand' 'Device Accel Constant Deceleration' 2\n```\n\n設定を永続的にするには、xorg の設定（上記）をするか xprofile にコマンドを加えます。後者はディスプレイマネージャにおけるマウスの速度には影響がありません。\n\n"
    },
    {
      "title": "設定サンプル",
      "level": 3,
      "content": "あなたの期待通りのマウス設定をするには複数の方法を使わなくてはいけないかもしれません。一般的なオプティカルマウスを設定のサンプルです:\n\nまず、デフォルトの移動速度を3倍遅くします。\n\n```\n$ xinput --set-prop 9 'Device Accel Constant Deceleration' 3 &\n```\n\nそれから、アクセラレーションを有効にして6ユニット動いた後、3倍速くします。\n\n```\n$ xset mouse 3 6 &\n```\n\n結果に満足したら、コマンドを ~/.xinitrc に保存します。\n\n"
    },
    {
      "title": "マウスのアクセラレーションの無効化",
      "level": 2,
      "content": "マウスのアクセラレーションは最近の X サーバーのバージョンでは劇的に変わりました、xset を使ってアクセラレーションを無効化することは今までのようにはできませんし推奨されません。最近の PointerAcceleration での変更は ここ で読むことができます。\n\nマウスアクセラレーションを無効化すると物理的なマウスの動きを画面上のマウスの動きに変えるときに線形関数が使われるようになります。マウスの速度設定は線形関数の傾きを制御します。\n\n全てのアクセラレーション/デクラレーションを無効化するには、次のファイルを作ります:\n\n```\n/etc/X11/xorg.conf.d/50-mouse-acceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tMatchIsPointer \"yes\"\n\tOption \"AccelerationProfile\" \"-1\"\n\tOption \"AccelerationScheme\" \"none\"\n\tOption \"AccelSpeed\" \"-1\"\nEndSection\n```\n\nそして X を再起動してください。\n\n"
    },
    {
      "title": "libinput を使う",
      "level": 3,
      "content": "libinput-1.1.0-1 と xf86-input-libinput-0.15.0-1 から物理的なマウスの移動と仮想上のマウスの移動を1対1でマッピングするフラットアクセラレーションプロファイルを使用することができます。有効化するには以下のファイルを作成してください:\n\n```\n/etc/X11/xorg.conf.d/50-mouse-acceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tDriver \"libinput\"\n\tMatchIsPointer \"yes\"\n\tOption \"AccelProfile\" \"flat\"\nEndSection\n```\n\n特定の条件下では (たとえば、Plasma 5.13 でマウスの Pointer Speed 値が異なる場合)、X を使用していても、デスクトップ環境がこれらの設定ファイルを一部をオーバーライドしようとする可能性があることに注意してください。\n\n別のオプションは次のコマンドです:\n\n```\n$ xinput --set-prop device-id 'libinput Accel Profile Enabled' 0, 1\n```\n\nこれは X を再起動する必要はありませんが、永続的ではありません。自動起動 を使用して自動的に実行するように設定することもできます。\n\nアクセラレーションが無効になっていることを確認するには、以下のコマンドを実行してください:\n\n```\n$ xinput list-props {1..50} 2>/dev/null | fgrep 'libinput Accel Profile Enabled ('\n```\n\nプロファイルが 0, 1 となっているはずです。\n\n"
    },
    {
      "title": "KDE Plasma のマウス設定から",
      "level": 3,
      "content": "KDE Plasma は、システム設定からのマウスアクセラレーションの無効化をサポートしています。システム設定を開き、Input Devices > Mouse > Acceleration Profile Flat を選択します。\n\n- Xorg の KDE Plasma マウス設定からマウス加速設定を変更しようとしても、xf86-input-libinput の バグが原因で機能しません。このバグの回避策として #libinput を使う メソッドを使用してください。\n\n"
    }
  ]
}