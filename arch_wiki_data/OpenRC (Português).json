{
  "title": "OpenRC (Português)",
  "url": "https://wiki.archlinux.org/title/OpenRC_(Portugu%C3%AAs)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Artigos relacionados\n\n- init\n\nO OpenRC é um gerenciador de serviços mantido pelos desenvolvedores do Gentoo. O OpenRC é baseado em dependências e trabalha com o programa init fornecido pelo sistema, normalmente SysVinit.\n\n"
    },
    {
      "title": "Instalação",
      "level": 2,
      "content": "O OpenRC e os pacotes acompanhantes estão disponíveis no AUR. Para obter detalhes sobre os componentes init, consulte Init.\n\nInstale o pacote openrcAUR ou openrc-gitAUR[link quebrado: package not found]. A partir da versão 0.25, o OpenRC fornece seu próprio init em /usr/bin/openrc-init. Opcionalmente, você pode usar outras inits de, por exemplo, busybox. Observe que quando openrc-init é usado, deve ser emparelhado com openrc-shutdown, e não o shutdown ou reboot comandos de outros pacotes, caso contrário, você encontrará erros.\n\nUm conjunto básico de arquivos de serviço está disponível no pacote openrc-arch-services-gitAUR. Outros pacotes podem ter arquivos de serviço fornecidos fora deste pacote; é recomendável uma pesquisa no AUR.\n\nPara manter a compatibilidade com o initscripts-forkAUR, arquivos de configuração são instalados em /etc/openrc/.\n\n"
    },
    {
      "title": "Inicializando",
      "level": 3,
      "content": "Para inicializar com OpenRC, defina o {ic|init}} opção nos parâmetros do kernel. Para usar o init integrado do OpenRC, defina init=/usr/bin/openrc-init. Para usar o SysVinit, defina init=/usr/bin/init-openrc. Observe que ao usar openrc-init, o /etc/inittab o arquivo não é usado.\n\n"
    },
    {
      "title": "Configuração",
      "level": 2,
      "content": "O diretório /etc/openrc/conf.d, e o arquivo /etc/openrc/rc.d é usado para a configuração.\n\nPara obter informações gerais sobre a configuração do OpenRC, consulte:\n\n- OpenRC manuals\n- Gentoo:OpenRC.\n\nPara obter instruções ao migrar do systemd, veja Init#Configuração.\n\n"
    },
    {
      "title": "Serviços",
      "level": 3,
      "content": "Os serviços OpenRC são ativados pela emissão rc-update add service_name runlevel como root. Recomenda-se habilitar pelo menos os seguintes serviços:\n\nTable content:\nNome do serviço | Runlevel | Descrição\nudev | sysinit | Conexão automática do dispositivo\nalsa | padrão | ALSA estado\nacpid | padrão | eventos ACPI\ndbus | padrão | Messagem dbus\ndcron | padrão | Scheduling\nsyslog-ng | padrão | Sistema de logs\n\nSe necessário, crie serviços para cada getty desejado criando links simbólicos para /etc/openrc/init.d/getty. Por exemplo: para o /dev/tty1:\n\n```\n# ln -s /etc/openrc/init.d/agetty{,.tty1}\n# rc-update add agetty.tty1 default\n```\n\nVeja também Gentoo:Systemd#Native services.\n\n"
    },
    {
      "title": "Rede",
      "level": 3,
      "content": "A rede é configurada por meio de newnet. [2] Modifique o arquivo /etc/openrc/conf.d/network; tanto o comando ip (iproute2) e o ifconfig (net-tools) são suportados. Abaixo está um exemplo de configuração usando ip.\n\n```\nip_eth0=\"192.168.1.2/24\"\ndefaultiproute=\"via 192.168.1.1\"\nifup_eth0=\"ip link set \\$int mtu 1500\"\n```\n\nO serviço de rede é adicionado ao nível de execução de inicialização por padrão, então nenhuma ação adicional é necessária. Veja Network configuration para informações gerais de rede.\n\n"
    },
    {
      "title": "Logs de inicialização",
      "level": 3,
      "content": "Para habilitar o log de inicialização, descomente a linha rc_logger=\"YES\" em /etc/openrc/rc.conf. Quando habilitado, os logs de inicialização são armazenados em /var/log/rc.log.\n\n"
    },
    {
      "title": "Hostname",
      "level": 3,
      "content": "OpenRC define o nome do host de /etc/openrc/conf.d/hostname. O arquivo tem a seguinte aparência:\n\n```\n# Defina como o nome do host desta máquina\nhostname=\"meunomedohost\"\n```\n\n"
    },
    {
      "title": "Módulos do kernel",
      "level": 3,
      "content": "OpenRC usa /etc/openrc/conf.d/modules ao invés de /etc/modules-load.d. Por exemplo:\n\n```\n/etc/openrc/conf.d/modules\n```\n\n```\n# Você deve consultar a documentação e configuração do seu kernel\n# para obter uma lista de módulos e suas opções.\n\nmodules=\"vboxdrv acpi_cpufreq\"\n```\n\n"
    },
    {
      "title": "Locale",
      "level": 3,
      "content": "O layout do teclado pode ser configurado via /etc/openrc/conf.d/keymaps e /etc/openrc/conf.d/consolefont. Você também pode definir as configurações por meio do arquivo /etc/locale.conf, que é obtido via /etc/profile.d/locale.sh.\n\nVeja Gentoo:Localization/Guide#Keyboard layout for the console e Locale para mais detalhes.\n\n"
    },
    {
      "title": "Uso",
      "level": 2,
      "content": "Esta seção traça um paralelo entre systemd e outro sistema de init.\n\nVocê pode omitir o .service e a extensão .target, especialmente se estiver editando temporariamente os parâmetros do kernel.\n\nTable content:\nSystemD | SysVinit | OpenRC | Descrição\nsystemctl list-units | rc.d list | rc-status | Listar o status dos serviços em execução\nsystemctl --failed |  | rc-status --crashed | Verificar serviços com falha\nsystemctl --all |  | rc-update -v show | Exibir todos os serviços disponíveis.\nsystemctl (start, stop, restart, status) daemon.service | rc.d (start, stop, restart) daemon | rc-service daemon (start, stop, restart, status) | Mude o estado do serviço.\nsystemctl (enable, disable) daemon.service | chkconfig daemon (on, off) | rc-update (add, del) daemon | Ative ou desative o serviço.\nsystemctl daemon-reload | chkconfig daemon --add |  | Crie ou modifique a configuração.\n\n"
    },
    {
      "title": "Inicialização silenciosa",
      "level": 3,
      "content": "Para ocultar mensagens de inicialização do OpenRC, você pode editar o /etc/inittab e adcionar --quiet para cada comando openrc. Para mais informações, verifique com $ openrc -h.\n\n"
    },
    {
      "title": "Erro ao desmontar /tmp",
      "level": 3,
      "content": "Ao desligar o sistema, você pode receber uma mensagem de erro como\n\n```\n* Unmounting /tmp ...\n* in use but fuser finds nothing [ !! ]\n```\n\nIsso pode ser corrigido adicionando\n\n```\nno_umounts=\"/tmp\"\n```\n\nao /etc/openrc/conf.d/localmount\n\n"
    },
    {
      "title": "Desativar IPv6 não funciona",
      "level": 3,
      "content": "Uma opção é adicionar:\n\n```\n# Desativar ipv6\nnet.ipv6.conf.all.disable_ipv6 = 1\n```\n\nem um arquivo com uma extensão .conf debaixo do /etc/openrc/sysctl.d\n\n"
    },
    {
      "title": "Durante o desligamento, remontando a raiz como falha somente leitura",
      "level": 3,
      "content": "Se acontecer o acima, edite o arquivo /etc/openrc/init.d/mount-ro e coloque:\n\n```\ntelinit u\n```\n\napós a seguinte linha:\n\n```\n# Libere todas as gravações pendentes no disco agora\nsync; sync\n```\n\n"
    },
    {
      "title": "/etc/sysctl.conf não encontrado",
      "level": 3,
      "content": "Por padrão, sysctl --system é chamado para carregar a configuração do sysctl. Isso inclui o arquivo /etc/sysctl.conf, que foi removido do Arch. [3]\n\nPara evitar um erro de arquivo ausente, crie o arquivo:\n\n```\n# touch /etc/sysctl.conf\n```\n\n"
    },
    {
      "title": "opentmpfiles-setup falhou ao iniciar",
      "level": 3,
      "content": "Ao inicializar o openrc, você pode ver linhas como estas:\n\n```\n* Setting up tmpfiles.d entries ...\nchattr: Operation not supported while setting flags on /var/log/journal\nchattr: No such file or directory while trying to stat /var/log/journal/%m\nchattr: Operation not supported while setting flags on /var/log/journal/remote\n[ !! ]\nERROR: opentmpfiles-setup failed to start\n```\n\nIsso é causado por /usr/lib/tmpfiles.d/journal-nocow.conf usando opções que são válidas apenas se o journal estiver em um sistema de arquivos btrfs.\n\nVeja https://github.com/OpenRC/opentmpfiles/issues/2 para detalhes.\n\nUma solução alternativa é criar um /etc/tmpfiles.d/journal-nocow.conf vazio para substituir as configurações.\n\n"
    },
    {
      "title": "Revertendo para o systemd",
      "level": 2,
      "content": "Reverter para o systemd deve ser simples na maioria dos casos. É essencialmente a reversão da migração para OpenRC, com cuidado no seguinte:\n\n- Remoção ou edição do parâmetro init= na linha de comando do kernel\n- Substituição de quaisquer pacotes feitos para o OpenRC ou outros sistemas sem o systemd para seus pacotes equivalentes (por exemplo, substituição do dbus-nosystemdAUR[link quebrado: package not found] para o dbus)\n\n"
    },
    {
      "title": "Veja também",
      "level": 2,
      "content": "- Wikipedia:OpenRC\n- Gentoo:OpenRC\n- Forum thread about OpenRC in Arch\n- Blog: OpenRC on Arch Linux[link inativo 2024-03-03 ⓘ]\n- Manjaro wiki\n\n"
    }
  ]
}