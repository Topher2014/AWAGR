{
  "title": "Keyboard backlight (Português)",
  "url": "https://wiki.archlinux.org/title/Keyboard_backlight_(Portugu%C3%AAs)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Existem vários métodos para controlar o nível de brilho da luz de fundo do teclado.\n\n"
    },
    {
      "title": "Qualquer fornecedor",
      "level": 2,
      "content": "Há várias formas de gerenciar o nível de brilho e diferentes ferramentas auxiliares para realizar isso, tal como brightnessctl ou lightAUR.\n\nO pseudossistema de arquivos sys expõe uma interface à luz de fundo do teclado. O atual nível de brilho pode ser obtido lendo /sys/class/leds/tpacpi::kbd_backlight/brightness. Por exemplo, para obter o nível máximo de brilho:\n\n```\n$ cat /sys/class/leds/tpacpi::kbd_backlight/max_brightness\n```\n\nPara definir o brilho para 1:\n\n```\n# echo 1 > /sys/class/leds/tpacpi::kbd_backlight/brightness\n```\n\nAo usar brightnessctl você pode obter uma lista de controles de brilho disponíveis com brightnessctl --list, então para mostrar as informações de luz de fundo do kbd:\n\n```\n$ brightnessctl --device='tpacpi::kbd_backlight' info\n```\n\nIsso mostrará o valor atual absoluto e relativo e o valor absoluto máximo. Para definir um valor diferente:\n\n```\n$ brightnessctl --device='tpacpi::kbd_backlight' set 1\n```\n\n"
    },
    {
      "title": "D-Bus",
      "level": 3,
      "content": "Você pode controlar a luz de fundo do teclado do seu computador através da interface D-Bus. Os benefícios de usá-lo são que nenhuma modificação nos arquivos do dispositivo é necessária e é independente do fornecedor.\n\nA seguir está um exemplo de implementação no Python 3. Instale os pacotes upower e python-dbus e coloque o seguinte script em /usr/local/bin/ e torne-o executável. Você pode mapear seus atalhos de teclado para executar /usr/local/bin/kb-light.py + x e /usr/local/bin/kb-light.py - x para aumentar e diminuir o nível de luz de fundo do teclado até x quantidades.\n\n```\n/usr/local/bin/kb-light.py\n```\n\n```\n#!/usr/bin/env python3\n\nimport dbus\nimport sys\n\ndef kb_light_set(delta):\n    bus = dbus.SystemBus()\n    kbd_backlight_proxy = bus.get_object('org.freedesktop.UPower', '/org/freedesktop/UPower/KbdBacklight')\n    kbd_backlight = dbus.Interface(kbd_backlight_proxy, 'org.freedesktop.UPower.KbdBacklight')\n\n    current = kbd_backlight.GetBrightness()\n    maximum = kbd_backlight.GetMaxBrightness()\n    new = max(0, min(current + delta, maximum))\n\n    if 0 <= new <= maximum:\n        current = new\n        kbd_backlight.SetBrightness(current)\n\n    # Return current backlight level percentage\n    return 100 * current / maximum\n\nif __name__ ==  '__main__':\n    if len(sys.argv) == 2 or len(sys.argv) == 3:\n        if sys.argv[1] == \"--up\" or sys.argv[1] == \"+\":\n            if len(sys.argv) == 3:\n                print(kb_light_set(int(sys.argv[2])))\n            else:\n                print(kb_light_set(17))\n        elif sys.argv[1] == \"--down\" or sys.argv[1] == \"-\":\n            if len(sys.argv) == 3:\n                print(kb_light_set(-int(sys.argv[2])))\n            else:\n                print(kb_light_set(-17))\n        else:\n            print(\"Unknown argument:\", sys.argv[1])\n    else:\n        print(\"Script takes one or two argument.\", len(sys.argv) - 1, \"arguments provided.\")\n```\n\nAlternativamente, o seguinte bash de uma linha irá definir a luz de fundo para o valor especificado no argumento:\n\n```\nsetKeyboardLight () {\n    dbus-send --system --type=method_call  --dest=\"org.freedesktop.UPower\" \"/org/freedesktop/UPower/KbdBacklight\" \"org.freedesktop.UPower.KbdBacklight.SetBrightness\" int32:$1 \n}\n```\n\n"
    },
    {
      "title": "No GNOME",
      "level": 4,
      "content": "O seguinte pode ser executado a partir de um terminal ou mapeado para combinações de teclas\n\n```\n$ gdbus call --session --dest org.gnome.SettingsDaemon.Power --object-path /org/gnome/SettingsDaemon/Power --method org.gnome.SettingsDaemon.Power.Keyboard.StepUp\n$ gdbus call --session --dest org.gnome.SettingsDaemon.Power --object-path /org/gnome/SettingsDaemon/Power --method org.gnome.SettingsDaemon.Power.Keyboard.StepDown\n```\n\n"
    },
    {
      "title": "No MATE",
      "level": 4,
      "content": "No caso de você usar o ambiente MATE, você pode se cansar com a luz de fundo do teclado com iluminação repetida durante o login, desbloqueando a tela ou acendendo a tela apagada. A configuração a seguir evita acender automaticamente a iluminação durante qualquer ação. Os únicos gatilhos restantes conectando o adaptador e à nova inicialização. Depois disso, você pode controlar a luz de fundo do teclado apenas através de teclas de atalho (por exemplo, ThinkPad Fn + barra de espaço).\n\nPara evitar a iluminação automática, edite o arquivo /usr/share/dbus-1/system.d/org.freedesktop.UPower.conf da seguinte maneira (duas ocorrências de \"negar\"):\n\n```\n/usr/share/dbus-1/system.d/org.freedesktop.UPower.conf\n```\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?> <!-- -*- XML -*- -->\n\n<!DOCTYPE busconfig PUBLIC\n \"-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN\"\n \"http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd\">\n<busconfig>\n  <!-- Only root can own the service -->\n  <policy user=\"root\">\n    <allow own=\"org.freedesktop.UPower\"/>\n  </policy>\n  <policy context=\"default\">\n\n    <allow send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.DBus.Introspectable\"/>\n\n    <allow send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.DBus.Peer\"/>\n    <allow send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.DBus.Properties\"/>\n    <allow send_destination=\"org.freedesktop.UPower.Device\"\n           send_interface=\"org.freedesktop.DBus.Properties\"/>\n    <deny  send_destination=\"org.freedesktop.UPower.KbdBacklight\"\n           send_interface=\"org.freedesktop.DBus.Properties\"/>\n    <allow send_destination=\"org.freedesktop.UPower.Wakeups\"\n           send_interface=\"org.freedesktop.DBus.Properties\"/>\n\n    <allow send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.UPower\"/>\n    <allow send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.UPower.Device\"/>\n    <deny  send_destination=\"org.freedesktop.UPower\"\n           send_interface=\"org.freedesktop.UPower.KbdBacklight\"/>\n    <allow send_destination=\"org.freedesktop.UPower\"\n\t   send_interface=\"org.freedesktop.UPower.Wakeups\"/>\n  </policy>\n</busconfig>\n```\n\n"
    }
  ]
}