{
  "title": "PC Engines (Polski)",
  "url": "https://wiki.archlinux.org/title/PC_Engines_(Polski)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "PC Engines jest szwajcarskim producentem sprzętu dla wbudowanych urządzeń x86.\n\n"
    },
    {
      "title": "apu2c4",
      "level": 2,
      "content": "Ten artykuł opisuje jak zainstalować Arch Linuxa na dysku SSD używając karty SD lub pamięci USB.\n\n"
    },
    {
      "title": "Sprzęt",
      "level": 3,
      "content": "CPU: Seria AMD Embedded G GX-412TC, 1 GHz czterordzeniowy Jaguar 64 bit\n\nRAM: 4GB DRAM z obsługą ECC\n\nZłóż urządzenie z ostrożnością i przeczytaj poradnik dotyczący systemu chłodzenia!\n\n"
    },
    {
      "title": "Przygotowania do instalacji",
      "level": 3,
      "content": "- Potrzebujesz szeregowego (RS-232) połączenie do APU, aby nim sterować.\n- Dodaj twojego użytkownika do grupy uucp.\n- Zainstaluj picocom lub coś podobnego. Zobacz Working with the serial console#Making Connections.\n- Pobierz i zweryfikuj obraz instalacyjny.\n\n"
    },
    {
      "title": "Uruchom system",
      "level": 3,
      "content": "Aby wyświetlić BIOS, użyj tego polecenia:\n\n```\n$ LANG=C picocom --baud 115200 /dev/ttyUSB0\n```\n\nW przypadku gdy twoje urządzenie nie uruchamia obrazu z karty SD ani z pamięci USB, naciśnij klawisz F10 podczas uruchomiania, aby wyświetlić menu rozruchowe. Następnie zamknij picocom za pomocą Ctrl+a Ctrl+q\n\nPodłącz się do GRUBa z Archiso:\n\n```\n$ LANG=C picocom --baud 38400 /dev/ttyUSB0\n```\n\nWejdź w tryb CLI poprzez naciśnięcie Tab i dodaj następujący parametr jądra do wiesza poleceń:\n\n```\nconsole=ttyS0,115200\n```\n\nNaciśnij Enter.\n\nTeraz zamknij picocom i połącz się ponownie za pomocą pierwszego polecenia, aby zmienić prędkość transmisji na 115200. Następnie musisz poczekać przez około 30 sekund, po czym wyświetli się kolorowa powłoka uruchomieniowa (ang. boot prompt).\n\n"
    },
    {
      "title": "Zainstaluj system",
      "level": 3,
      "content": "Najbardziej komfortowym sposobem instalowania Archa jest uruchomienie serwera SSH i skorzystanie z poradnika instalacyjnego.\n\nMożesz potrzebować nowego adresu IP. Da się to zrobić używając dhclient oraz włączając sshd.service.\n\nJeden z możliwych układów dysku SSD może wyglądać następująco:\n\n```\n/dev/sda1           2048   264191   262144  128M 83 Linux\n /dev/sda2         264192 25430015 25165824   12G 83 Linux\n /dev/sda3       25430016 31277231  5847216  2.8G 82 Linux swap / Solaris\n```\n\nDobrym pomysłem jest używanie układu MBR z GRUBem:\n\n```\n# grub-install --target=i386-pc /dev/sda\n# grub-mkconfig -o /boot/grub/grub.cfg\n```\n\nJeżeli używasz Syslinux, upewnij się, aby przekazać opcję console do menu rozruchowego:\n\n```\n/boot/syslinux/syslinux.cfg\n```\n\n```\nLABEL arch\n    MENU LABEL Arch Linux\n    LINUX ../vmlinuz-linux\n    APPEND root=UUID=1ef5a2eb-1908-4929-9b91-f6c4183695ac rw console=ttyS0,115200\n    INITRD ../initramfs-linux.img\n```\n\nZobacz także Working with the serial console#Configure console access on the target machine.\n\nPamiętaj, aby usunąć kartę SD bądź pamięć USB po zakończeniu instalacji.\n\n"
    },
    {
      "title": "Sterowanie diodami LED",
      "level": 3,
      "content": "Podczas gdy istnieją dwa mainlinowe sterowniki (leds-apu oraz pcengines-apuv2), które mogą sterować LEDami na różnych modelach APU, jeżeli używasz mainlinowe oprogramowanie PC Engines, zalecane jest, aby pozwolić ACPI na kontrolę diod. W połączeniu z modułem ledtrig_netdev, diody APU mogą być sterowane poprzez następujące wpisy sysfs:\n\n```\n/sys/class/leds/apu2:green:led1\n/sys/class/leds/apu2:green:led2\n/sys/class/leds/apu2:green:led3\n```\n\n"
    },
    {
      "title": "Obsługa modułów",
      "level": 4,
      "content": "Należy ręcznie wczytać ledtrig_netdev. Możesz również umieścić leds_apu oraz pcengines-apuv2 na czarnej liście modułów.\n\n"
    },
    {
      "title": "Przykładowa konfiguracja",
      "level": 4,
      "content": "Typowym przypadkiem użycia jest wykorzystywanie APU jako bezprzewodowego routera. W tym przypadku jedna karta sieciowa (wan0) jest podłączona do upstreamu, do dostawcy usług internetowych, a pozostałe karty sieciowe (przewodowe i bezprzewodowe) są zmostkowane (br0) ze sobą jako sieć lokalna. Typowa konfiguracja diod używając wyzwalacza netdev może wyglądać następująco:\n\n```\nLED1: wskaźnik zasilania\nLED2: wskaźnik ruchu sieciowego do dostawcy usług\nLED3: wskaźnik ruchu w sieci lokalnej (br0)\n```\n\nAby używać tej konfiguracji:\n\n```\necho \"1\" > /sys/class/leds/apu2:green:led1/brightness\necho \"netdev\" > /sys/class/leds/apu2:green:led2/trigger\necho \"wan0\" > /sys/class/leds/apu2:green:led2/device_name\necho \"1\" > /sys/class/leds/apu2:green:led2/tx\necho \"1\" > /sys/class/leds/apu2:green:led2/rx\necho \"netdev\" >  /sys/class/leds/apu2:green:led3/trigger\necho \"br0\" >  /sys/class/leds/apu2:green:led3/device_name\necho \"1\" >  /sys/class/leds/apu2:green:led3/tx\necho \"1\" >  /sys/class/leds/apu2:green:led3/rx\n```\n\n- Zobacz jakie wyzwalacze są obsługiwane przez aktualnie załadowany moduł: cat /sys/class/leds/apu2:green:led1/trigger.\n- Dodatkowe moduły wyzwalaczy są dostępne tutaj: /lib/modules/$(uname -r)/kernel/drivers/leds/trigger.\n\n"
    },
    {
      "title": "Trwała konfiguracja",
      "level": 4,
      "content": "Możesz użyć automatycznego wczytywanie modułów oraz tmpfiles.d (z Systemd), aby zachować tą konfigurację po ponownym uruchomieniu.\n\n```\n/etc/modules-load.d/ledtrig-netdev.conf\n```\n\n```\nledtrig_netdev\n```\n\n```\n/etc/tmpfiles.d/leds.conf\n```\n\n```\n# Zasilanie\nw /sys/class/leds/apu2:green:led1/brightness - - - - 1\n# Aktywność portu WAN\nw /sys/class/leds/apu2:green:led2/trigger - - - - netdev\nw /sys/class/leds/apu2:green:led2/device_name - - - - wan0\nw /sys/class/leds/apu2:green:led2/tx - - - - 1\nw /sys/class/leds/apu2:green:led2/rx - - - - 1\n# Aktywność sieci LAN\nw /sys/class/leds/apu2:green:led3/trigger - - - - netdev\nw /sys/class/leds/apu2:green:led3/device_name - - - - br0\nw /sys/class/leds/apu2:green:led3/tx - - - - 1\nw /sys/class/leds/apu2:green:led3/rx - - - - 1\n```\n\n"
    },
    {
      "title": "Oprogramowanie układowe",
      "level": 2,
      "content": "Urządzenia APUx używają coreboot zamiast UEFI. Aby zaktualizować oprogramowanie układowe na urządzeniach APU2/3/4/5 użyj flashrom:\n\n```\n# flashrom --programmer internal --read stary.rom --output odczyt-starego.txt\n# flashrom --programmer internal --write nowy.rom --output zapis-nowego.txt\n# systemctl poweroff\n```\n\nNastępnie odłącz i podłącz ponownie. Jeżeli pełne ponowne uruchomienie jest niemożliwe (np. oprogramowanie jest aktualizowane zdalnie), możliwe są pewne obejścia:\n\n- Flashowanie oprogramowania APUx\n- Pobieranie oprogramowania APUx\n\n"
    }
  ]
}