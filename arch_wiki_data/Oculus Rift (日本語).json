{
  "title": "Oculus Rift (日本語)",
  "url": "https://wiki.archlinux.org/title/Oculus_Rift_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Oculus Rift は Oculus VR によって開発されているバーチャルリアリティヘッドマウントディスプレイです。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 ハードウェア 1.2 SDK 1.3 ビデオモード 1.3.1 手動で xrandr を使う\n- 2 動作するアプリケーション\n- 3 トラブルシューティング 3.1 DK2 カメラによってカーネルログが埋まってしまう 3.2 サスペンド/復帰後にカメラの挙動がおかしい 3.3 古いアプリケーションで読み込みが遅延する 3.4 xrandr 実行時に Oculus DK1 がモニターとして認識されなかったり切断中と表示される\n\n- 1.1 ハードウェア\n- 1.2 SDK\n- 1.3 ビデオモード 1.3.1 手動で xrandr を使う\n\n- 1.3.1 手動で xrandr を使う\n\n- 3.1 DK2 カメラによってカーネルログが埋まってしまう\n- 3.2 サスペンド/復帰後にカメラの挙動がおかしい\n- 3.3 古いアプリケーションで読み込みが遅延する\n- 3.4 xrandr 実行時に Oculus DK1 がモニターとして認識されなかったり切断中と表示される\n\n"
    },
    {
      "title": "ハードウェア",
      "level": 3,
      "content": "Oculus Rift のデバイスは HDMI によってセカンダリディスプレイとしてグラフィックカードに接続します。センサーとして使うには USB でも接続します。oculus-udevAUR パッケージが適当な udev ルールを設定します。\n\n完全に利用するには input と video グループにユーザーを追加する必要があります。plugdev グループは必要なくなりました (モードは 0666 に設定されます)。\n\n"
    },
    {
      "title": "SDK",
      "level": 3,
      "content": "公式の Oculus Rift SDK はAUR のパッケージ oculus-rift-sdkAUR[リンク切れ: パッケージが存在しません] からインストールすることができます。CMake ビルドの対応などの修正が加えられたバージョンは oculus-rift-sdk-jherico-gitAUR でインストールすることが可能です。\n\nパッケージは X セッションが起動した時に oculusd デーモンが実行されるように設定します。パッケージをインストールして X を再起動すれば自動的にバックグラウンドで実行されます。\n\n"
    },
    {
      "title": "ビデオモード",
      "level": 3,
      "content": "Rift を適切に機能させるには、特定のビデオモードを使う必要があります。特に、リフレッシュレートが低い通常のモニタと同じビデオモードを使っている場合、ゲームのリフレッシュレートも低くなってしまいます。\n\nRift をプライマリモニタにしないと、同期が正しく動作しません。\n\n"
    },
    {
      "title": "手動で xrandr を使う",
      "level": 4,
      "content": "プライマリディスプレイが DVI-I-2 で DVI-I-3 が Rift の場合、1152x864 が 75Hz をサポートする最大解像度です。使用するには:\n\n```\n$ xrandr --output DVI-I-3 --primary --rotate left --mode 1080x1920 --rate 75 --auto --output DVI-I-2 --mode 1152x864 --rate 75 --auto --same-as DVI-I-3 --scale-from 1920x1080\n```\n\nRift SDK ではセカンダリディスプレイの回転を推奨していませんが、回転しないと多くのプログラムで問題が発生します。以下のコマンドはプライマリディスプレイをディスプレイ全体の拡大版として設定します。パンしたい場合、--scale-from を --panning に変更してください:\n\n```\n$ xrandr --output DVI-I-3 --primary --rotate left --mode 1080x1920 --rate 60 --auto --output DVI-I-2 --mode 1920x1080 --rate 60 --auto --same-as DVI-I-3 --scale-from 1920x1080\n```\n\nxrandr --auto を使用した場合、ディスプレイが乱れることがあります。以下のコマンドを使ってひとつのモニターに戻してください:\n\n```\n$ xrandr --output DVI-I-2 --primary --auto --rotate normal --panning 1920x1080 --scale 1x1 --output DVI-I-3 --off\n```\n\n"
    },
    {
      "title": "動作するアプリケーション",
      "level": 2,
      "content": "バーチャルリアリティ#対応ソフトウェアを参照。\n\n"
    },
    {
      "title": "DK2 カメラによってカーネルログが埋まってしまう",
      "level": 3,
      "content": "カーネルログに以下のようなメッセージが大量に表示される場合:\n\n```\nxhci_hcd 0000:04:00.0: WARN Successful completion on short TX: needs XHCI_TRUST_TX_LENGTH quirk?\n```\n\nUSB 3.0/Hybrid 2.0/3.0 端子で Oculus DK2 Camera に何らかの問題が起こっています。USB 2.0 端子に接続してみてください。\n\n"
    },
    {
      "title": "サスペンド/復帰後にカメラの挙動がおかしい",
      "level": 3,
      "content": "サスペンド・復帰してから Rift を使用すると、カメラが位置トラッキングデータをよこさなくなって、VR プログラムが位置トラッキングできなくなることがあります。`ovrd` プロセスを終了しようとすると、ロックアップして親プロセス (ウィンドウマネージャ) が終了するまでゾンビプロセスになります。復帰後に、DK2 カメラを一度抜いてから再度接続することで問題は解決します。\n\n"
    },
    {
      "title": "古いアプリケーションで読み込みが遅延する",
      "level": 3,
      "content": "何らかの理由で、ovrd の 0.4.4 以下を使用するようにコンパイルされたアプリケーションで ovrd の 0.5.0 以上を使用すると読み込みが遅延します。古いアプリケーションを使用すると、まるで泳いでいるかのような表示になってしまいます。古いバージョンの SDK をインストールすることで解決します。\n\n"
    },
    {
      "title": "xrandr 実行時に Oculus DK1 がモニターとして認識されなかったり切断中と表示される",
      "level": 3,
      "content": "最新の NVIDIA ドライバーではヘッドマウンドディスプレイ (Oculus DK1 など) を標準のモニターとして使用するかどうか指定する AllowHMD オプションが追加されています。NVIDIA はデフォルトで NO に設定しているため、DK1 が切断中と表示されます。以下のコマンドを実行することで解決できます:\n\n```\n# nvidia-xconfig --allow-hmd=yes\n```\n\nもしくは /etc/X11/xorg.conf の Screen セクションに手動で Option \"AllowHMD\" \"yes\" を追加してください。\n\nソース: https://forums.oculus.com/developer/discussion/34407/gnu-linux-plans#Comment_566814\n\n"
    }
  ]
}