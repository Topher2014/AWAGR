{
  "title": "Hddtemp (Русский)",
  "url": "https://wiki.archlinux.org/title/Hddtemp_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Ссылки по теме\n\n- lm sensors (Русский)\n- Conky (Русский)\n\nhddtemp — небольшая утилита (включающая в состав службу), позволяющая узнать температуру жёсткого диска посредством S.M.A.R.T. (для дисков, поддерживающих эту технологию).\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установите пакет hddtemp.\n\n"
    },
    {
      "title": "Использование",
      "level": 2,
      "content": "Hddtemp требует привилегий суперпользователя. Команда hddtemp требует в качестве аргумента как минимум одно имя физического устройства или имена нескольких, разделённые пробелами. Например:\n\n```\n# hddtemp /dev/disk/by-id/wwn-0x60015ee0000b237f /dev/sdX2 ... /dev/sdXn\n```\n\nДля получения дополнительной информации смотрите man-страницу: hddtemp(8).\n\n"
    },
    {
      "title": "Служба",
      "level": 2,
      "content": "Запуск службы позволит получать информацию о температуре по TCP/IP обычному пользователю. Это может быть полезно для использования скриптов или систем мониторинга.\n\nСлужба контролируется hddtemp.service.\n\nЧтобы получить информацию о температуре, подключитесь к серверу со включённой службой, которая прослушивает порт 7634.\n\nС помощью inetutils:\n\n```\n$ telnet localhost 7634\n```\n\nС помощью gnu-netcat:\n\n```\n$ nc localhost 7634\n```\n\nВывод будет примерно следующий:\n\n```\n|/dev/sda|ST3500413AS|32|C||/dev/sdb|ST2000DM001-1CH164|36|C|\n```\n\nУдобочитаемый вариант:\n\n```\n$ nc localhost 7634 |sed 's/|//m' | sed 's/||/ \\n/g' | awk -F'|' '{print $1 \" \" $3 \" \" $4}'\n```\n\n```\n/dev/sda 32 C \n/dev/sdb 36 C\n```\n\n"
    },
    {
      "title": "Изменить предопределённый диск",
      "level": 3,
      "content": "По умолчанию служба hddtemp отслеживает только /dev/sda. Если у вас несколько дисков, то вам потребуется переопределить стандартную конфигурацию мониторинга.\n\nНеобходимо предварительно узнать, какие жёсткие диски поддерживают мониторинг. Для этого можно воспользоваться smartmontools.\n\n```\n# systemctl edit hddtemp.service\n```\n\n```\n[Service]\nExecStart=\nExecStart=/usr/bin/hddtemp --daemon --foreground /dev/disk/by-id/wwn-0x60015ee0000b237f /dev/sdb --listen=127.0.0.1\n```\n\nИзмените названия устройств, которые вы хотите отслеживать.\n\nСохраните изменения и выйдите из текстового редактора. systemd автоматически применит изменения и перезагрузит службу hddtemp.\n\nТакже можно воспользоваться скриптом auto-generate, который определит поддерживаемые жёсткие диски с помощью smartmontools и напечатает результат в стандартный поток вывода.\n\n"
    },
    {
      "title": "Мониторинг",
      "level": 2,
      "content": "Hddtemp может быть встроен в различные системы мониторинга. Conky также собран с поддержкой hddtemp в режиме демона. Просто включите hddtemp.service и добавьте $hddtemp °C в ваш конфигурационный файл conky.\n\n"
    },
    {
      "title": "Твердотельные накопители",
      "level": 2,
      "content": "Для получения значения температуры hddtemp обычно считывает поле 194 данных S.M.A.R.T. жёсткого диска. В SSD накопителях информация о температуре обычно хранится в поле 190. Можно посмотреть этот параметр, выполнив следующие команды:\n\n```\n# smartctl --all /dev/sdx\n```\n\nили\n\n```\n# hddtemp --debug /dev/sdx\n```\n\nгде /dev/sdx — имя диска (воспользуйтесь lsblk для проверки имени).\n\nДругой способ — внести запись в базу данных hddtemp, указав требуемый накопитель с параметрами поля и единицы измерения в /etc/hddtemp.db. Например:\n\n```\n$ echo '\"Samsung SSD 840 EVO 250GB\" 190 C \"Samsung SSD 840 EVO 250GB\"' >> /etc/hddtemp.db\n```\n\n"
    }
  ]
}