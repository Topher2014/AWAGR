{
  "title": "PhpMyAdmin (Русский)",
  "url": "https://wiki.archlinux.org/title/PhpMyAdmin_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "phpMyAdmin — веб-инструмент для управления базами данных MySQL с помощью фронтенда на Apache/PHP.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установите пакет phpmyadmin.\n\n"
    },
    {
      "title": "PHP",
      "level": 3,
      "content": "Убедитесь, что mysql-расширения PHP были включены.\n\nПри необходимости можно также включить extension=bz2 и extension=zip для поддержки сжатия.\n\n"
    },
    {
      "title": "Apache",
      "level": 3,
      "content": "Настройте Apache для использования PHP, как описано в разделе Apache HTTP Server (Русский)#PHP.\n\nСоздайте файл конфигурации Apache:\n\n```\n/etc/httpd/conf/extra/phpmyadmin.conf\n```\n\n```\nAlias /phpmyadmin \"/usr/share/webapps/phpMyAdmin\"\n<Directory \"/usr/share/webapps/phpMyAdmin\">\n    DirectoryIndex index.php\n    AllowOverride All\n    Options FollowSymlinks\n    Require all granted\n</Directory>\n```\n\nИ включите его в /etc/httpd/conf/httpd.conf:\n\n```\n# phpMyAdmin configuration\nInclude conf/extra/phpmyadmin.conf\n```\n\nПосле внесения изменений в конфигурационный файл Apache, перезапустите службу httpd.service.\n\n"
    },
    {
      "title": "Lighttpd",
      "level": 3,
      "content": "Убедитесь, что Lighttpd может обслуживать PHP-файлы и включён mod_alias.\n\nДобавьте в конфигурацию следующее альтернативное имя для PhpMyAdmin:\n\n```\nalias.url = ( \"/phpmyadmin\" => \"/usr/share/webapps/phpMyAdmin/\")\n```\n\n"
    },
    {
      "title": "Nginx",
      "level": 3,
      "content": "Настройте FastCGI и используйте серверные блоки, чтобы упростить управление.\n\nДля более лёгкого доступа к phpMyAdmin можно создать поддомен, например, https://pma.domain.tld:\n\n```\n/etc/nginx/sites-available/pma.domain.tld\n```\n\n```\nserver {\n    server_name pma.domain.tld;\n    ; listen 80; # also listen on http\n    ; listen [::]:80;\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    index index.php;\n    access_log /var/log/nginx/pma.access.log;\n    error_log /var/log/nginx/pma.error.log;\n\n    # Allows limiting access to certain client addresses.\n    ; allow 192.168.1.0/24;\n    ; allow my-ip;\n    ; deny all;\n\n    root /usr/share/webapps/phpMyAdmin;\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    error_page 404 /index.php;\n\n    location ~ \\.php$ {\n        try_files $uri $document_root$fastcgi_script_name =404;\n\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        fastcgi_pass unix:/run/php-fpm/php-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n\n        fastcgi_param HTTP_PROXY \"\";\n        fastcgi_param HTTPS on;\n        fastcgi_request_buffering off;\n   }\n}\n```\n\nИли по подкаталогу, например, https://domain.tld/phpMyAdmin:\n\n```\n/etc/nginx/sites-available/domain.tld\n```\n\n```\nserver {\n    server_name domain.tld;\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    index index.php;\n    access_log /var/log/nginx/domain.tld.access.log;\n    error_log /var/log/nginx/domain.tld.error.log;\n\n    root /srv/http/domain.tld;\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    location /phpMyAdmin {\n        root /usr/share/webapps/phpMyAdmin;\n    }\n\n    # Deny static files\n    location ~ ^/phpMyAdmin/(README|LICENSE|ChangeLog|DCO)$ {\n       deny all;\n    }\n\n    # Deny .md files\n    location ~ ^/phpMyAdmin/(.+\\.md)$ {\n      deny all;\n   }\n\n   # Deny setup directories\n   location ~ ^/phpMyAdmin/(doc|sql|setup)/ {\n      deny all;\n   }\n\n   #FastCGI config for phpMyAdmin\n   location ~ /phpMyAdmin/(.+\\.php)$ {\n      try_files $uri $document_root$fastcgi_script_name =404;\n\n      fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n      fastcgi_pass unix:/run/php-fpm/php-fpm.sock;\n      fastcgi_index index.php;\n      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n      include fastcgi_params;\n\n      fastcgi_param HTTP_PROXY \"\";\n      fastcgi_param HTTPS on;\n      fastcgi_request_buffering off;\n   }\n}\n```\n\n"
    },
    {
      "title": "Настройка",
      "level": 2,
      "content": "Главный файл конфигурации находится в /usr/share/webapps/phpMyAdmin/config.inc.php.\n\n"
    },
    {
      "title": "Определение удаленного сервера MySQL",
      "level": 3,
      "content": "Если MySQL-сервер находится на удалённом хосте, добавьте следующую строку в файл конфигурации:\n\n```\n$cfg['Servers'][$i]['host'] = 'example.com';\n```\n\n"
    },
    {
      "title": "Использование скрипта установки",
      "level": 3,
      "content": "Чтобы разрешить использование сценария установки phpMyAdmin (например, http://localhost/phpmyadmin/setup), убедитесь, что /usr/share/webapps/phpMyAdmin доступен для записи пользователю http:\n\n```\n# mkdir /usr/share/webapps/phpMyAdmin/config\n# chown http:http /usr/share/webapps/phpMyAdmin/config\n# chmod 750 /usr/share/webapps/phpMyAdmin/config\n```\n\n"
    },
    {
      "title": "Добавление парольной фразы blowfish_secret",
      "level": 3,
      "content": "Требуется ввести уникальную строку длиной 32 символа, чтобы полноценно использовать алгоритм blowfish, используемый phpMyAdmin, что исключает сообщение об ошибке \"ERROR: The configuration file now needs a secret passphrase (blowfish_secret)\":\n\n```\n/usr/share/webapps/phpMyAdmin/config.inc.php\n```\n\n```\n$cfg['blowfish_secret'] = '...';\n```\n\n"
    },
    {
      "title": "Включение хранилища настроек",
      "level": 3,
      "content": "Дополнительные параметры, такие как связывание таблиц, отслеживание изменений, создание PDF-файлов и запросы закладок, по умолчанию отключены, что приводит к отображению сообщения \"The phpMyAdmin configuration storage is not completely configured, some extended features have been deactivated\" на домашней странице.\n\nNote: **pma** \n\nВ /usr/share/webapps/phpMyAdmin/config.inc.php, раскомментируйте (удалите символы \"//\") и при необходимости измените их на нужные учетные данные:\n\n```\n/usr/share/webapps/phpMyAdmin/config.inc.php\n```\n\n```\n/* User used to manipulate with storage */\n// $cfg['Servers'][$i]['controlhost'] = 'my-host';\n// $cfg['Servers'][$i]['controlport'] = '3306';\n$cfg['Servers'][$i]['controluser'] = 'pma';\n$cfg['Servers'][$i]['controlpass'] = 'pmapass';\n\n/* Storage database and tables */\n$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';\n$cfg['Servers'][$i]['bookmarktable'] = 'pma__bookmark';\n$cfg['Servers'][$i]['relation'] = 'pma__relation';\n$cfg['Servers'][$i]['table_info'] = 'pma__table_info';\n$cfg['Servers'][$i]['table_coords'] = 'pma__table_coords';\n$cfg['Servers'][$i]['pdf_pages'] = 'pma__pdf_pages';\n$cfg['Servers'][$i]['column_info'] = 'pma__column_info';\n$cfg['Servers'][$i]['history'] = 'pma__history';\n$cfg['Servers'][$i]['table_uiprefs'] = 'pma__table_uiprefs';\n$cfg['Servers'][$i]['tracking'] = 'pma__tracking';\n$cfg['Servers'][$i]['userconfig'] = 'pma__userconfig';\n$cfg['Servers'][$i]['recent'] = 'pma__recent';\n$cfg['Servers'][$i]['favorite'] = 'pma__favorite';\n$cfg['Servers'][$i]['users'] = 'pma__users';\n$cfg['Servers'][$i]['usergroups'] = 'pma__usergroups';\n$cfg['Servers'][$i]['navigationhiding'] = 'pma__navigationhiding';\n$cfg['Servers'][$i]['savedsearches'] = 'pma__savedsearches';\n$cfg['Servers'][$i]['central_columns'] = 'pma__central_columns';\n$cfg['Servers'][$i]['designer_settings'] = 'pma__designer_settings';\n$cfg['Servers'][$i]['export_templates'] = 'pma__export_templates';\n```\n\n"
    },
    {
      "title": "Настройка базы данных",
      "level": 4,
      "content": "Для создания необходимых таблиц доступны два варианта:\n\n- Импортируйте /usr/share/webapps/phpMyAdmin/sql/create_tables.sql, используя PhpMyAdmin.\n- Выполните команду mysql -u root -p < /usr/share/webapps/phpMyAdmin/sql/create_tables.sql в терминале.\n\n"
    },
    {
      "title": "Настройка пользователя базы данных",
      "level": 4,
      "content": "Чтобы применить необходимые разрешения для controluser, выполните следующий запрос:\n\n```\nGRANT USAGE ON mysql.* TO 'pma'@'localhost' IDENTIFIED BY 'pmapass';\nGRANT SELECT (\n    Host, User, Select_priv, Insert_priv, Update_priv, Delete_priv,\n    Create_priv, Drop_priv, Reload_priv, Shutdown_priv, Process_priv,\n    File_priv, Grant_priv, References_priv, Index_priv, Alter_priv,\n    Show_db_priv, Super_priv, Create_tmp_table_priv, Lock_tables_priv,\n    Execute_priv, Repl_slave_priv, Repl_client_priv\n    ) ON mysql.user TO 'pma'@'localhost';\nGRANT SELECT ON mysql.db TO 'pma'@'localhost';\nGRANT SELECT ON mysql.host TO 'pma'@'localhost';\nGRANT SELECT (Host, Db, User, Table_name, Table_priv, Column_priv)\n    ON mysql.tables_priv TO 'pma'@'localhost';\n```\n\nЧтобы использовать функции закладок и отношений, установите следующие разрешения:\n\n```\nGRANT SELECT, INSERT, UPDATE, DELETE ON phpmyadmin.* TO 'pma'@'localhost';\n```\n\nПовторно войдите в систему, чтобы убедиться, что новые функции активированы.\n\n"
    },
    {
      "title": "Включение кеширования шаблонов",
      "level": 3,
      "content": "Добавьте следующую строку в /usr/share/webapps/phpMyAdmin/config.inc.php:\n\n```\n$cfg['TempDir'] = '/tmp/phpmyadmin';\n```\n\n"
    },
    {
      "title": "Удаление каталога конфигурации",
      "level": 3,
      "content": "Удалите временный каталог конфигурации после завершения настройки. Удаление каталога также устранит предупреждение из веб-интерфейса:\n\n```\n# rm -r /usr/share/webapps/phpMyAdmin/config\n```\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Официальный веб-сайт\n\n"
    }
  ]
}