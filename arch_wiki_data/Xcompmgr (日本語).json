{
  "title": "Xcompmgr (日本語)",
  "url": "https://wiki.archlinux.org/title/Xcompmgr_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- Compiz\n- Cairo Compmgr\n\nXcompmgr はシンプルなコンポジットマネージャで、ドロップシャドウを表示したり、transset ユーティリティを使うことで、プリミティブなウィンドウ透過ができます。単独の概念実証として作られており、Xcompmgr は Compiz などのコンポジットマネージャの軽量な代替として使うことができます。\n\n既存のウィンドウマネージャを置き換えないので、エレガントなデスクトップを模索している、軽量なウィンドウマネージャのユーザーにとっては理想的です。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール 1.1 フォークと更新されたバージョン\n- 2 設定 2.1 ウィンドウ透過\n- 3 ヒントとテクニック 3.1 要求に応じて Xcompmgr を起動・停止する 3.2 Xcompmgr の切り替え\n- 4 トラブルシューティング 4.1 Flash が使われているサイトを開いた時に Mozilla Firefox がクラッシュする 4.2 (Openbox などで) ログイン後に背景が一時的にライトグレーになる 4.3 awesome の BadPicture request 4.4 解像度を変更した後に awesome で画面が更新されない\n\n- 1.1 フォークと更新されたバージョン\n\n- 2.1 ウィンドウ透過\n\n- 3.1 要求に応じて Xcompmgr を起動・停止する\n- 3.2 Xcompmgr の切り替え\n\n- 4.1 Flash が使われているサイトを開いた時に Mozilla Firefox がクラッシュする\n- 4.2 (Openbox などで) ログイン後に背景が一時的にライトグレーになる\n- 4.3 awesome の BadPicture request\n- 4.4 解像度を変更した後に awesome で画面が更新されない\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "Xcompmgr をインストールする前に、Xorg を正しくインストール・設定してください。カスタム設定を使っている場合、X サーバーの Composite エクステンションを有効にしてください。\n\nXcompmgr は公式リポジトリの xcompmgr パッケージからインストールできます。透過を行うには公式リポジトリから transset-dfAUR もインストールしてください。\n\n"
    },
    {
      "title": "フォークと更新されたバージョン",
      "level": 3,
      "content": "バグフィックスなどがされた、フォークが複数存在しています:\n\n- xcompmgr-dana — Xcompmgr の最初期のフォークのひとつ。\n\n- Picom — 多くの修正が含まれている Xcompmgr のフォーク。\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "xcompmgr をロードするには、次を実行してください:\n\n```\n$ xcompmgr -c\n```\n\nセッションの起動時にロードするには、次を xprofile に追加してください:\n\n```\nxcompmgr -c &\n```\n\n-c の代わりにドロップシャドウを修正したりフェードを有効にするスイッチを使うことができます。例えば:\n\n```\nxcompmgr -c -C -t-5 -l-5 -r4.2 -o.55 &\n```\n\nオプションの完全な一覧を見るには、次を実行してください:\n\n```\n$ xcompmgr --help\n```\n\n"
    },
    {
      "title": "ウィンドウ透過",
      "level": 3,
      "content": "パフォーマンスの低下のために、実用性は限られていますが、transset-df ユーティリティを使うことで個々のウィンドウの透明度を設定することができます。\n\nプログラムウィンドウの透過を設定するには、プログラムを予め実行して、次を実行してください:\n\n```\n$ transset-df opacity\n```\n\nopacity は 0 から 1 の間の数値に置き換えてください。0 は透明で 1 は不透明です。\n\nコマンドを実行すると、マウスカーソルが十字線になります。ウィンドウをクリックすれば透明度が指定された値に変更されます。例えば、transset-df 0.25 はウィンドウの不透明度を 25% (透明度 75%) に設定します。\n\n"
    },
    {
      "title": "要求に応じて Xcompmgr を起動・停止する",
      "level": 3,
      "content": "このスクリプトを使うことでコンポジットマネージャを簡単に（再）起動・停止できます。\n\n```\n~/.bin/comp\n```\n\n```\n#!/bin/bash\n#\n# Start a composition manager.\n# (xcompmgr in this case)\n\ncomphelp() {\n    echo \"Composition Manager:\"\n    echo \"   (re)start: COMP\"\n    echo \"   stop:      COMP -s\"\n    echo \"   query:     COMP -q\"\n    echo \"              returns 0 if composition manager is running, else 1\"\n    exit\n}\n\ncheckcomp() {\n    pgrep xcompmgr &>/dev/null\n}\n\nstopcomp() {\n    checkcomp && killall xcompmgr\n}\n\nstartcomp() {\n    stopcomp\n    # Example settings only. Replace with your own.\n    xcompmgr -CcfF -I-.015 -O-.03 -D6 -t-1 -l-3 -r4.2 -o.5 &\n    exit\n}\n\ncase \"$1\" in\n    \"\")   startcomp ;;\n    \"-q\") checkcomp ;;\n    \"-s\") stopcomp; exit ;;\n    *)    comphelp ;;\nesac\n```\n\n使いやすいように、このスクリプトを (Xbindkeys などを使って) ホットキーに設定することができます。これで他の作業を邪魔せずに、コンポジットを素早く再起動したり一時的に無効にできます。\n\n"
    },
    {
      "title": "Xcompmgr の切り替え",
      "level": 3,
      "content": "以下のスクリプトをホットキーに割り当てて下さい:\n\n```\n#!/bin/bash\n\nif pgrep xcompmgr &>/dev/null; then\n    echo \"Turning xcompmgr ON\"\n    xcompmgr -c -C -t-5 -l-5 -r4.2 -o.55 &\nelse\n    echo \"Turning xcompmgr OFF\"\n    pkill xcompmgr &\nfi\n\nexit 0\n```\n\n"
    },
    {
      "title": "Flash が使われているサイトを開いた時に Mozilla Firefox がクラッシュする",
      "level": 3,
      "content": "次の行を含む /etc/profile.d/flash.sh という名前の実行可能ファイルを作成することで修正できます:\n\n```\nexport XLIB_SKIP_ARGB_VISUALS=1\n```\n\n"
    },
    {
      "title": "(Openbox などで) ログイン後に背景が一時的にライトグレーになる",
      "level": 3,
      "content": "hsetroot をインストールして xcompmgr の前に hsetroot -solid \"#000000\" (#000000 にはあなたが使いたい色のコードを入力してください) を実行して背景色を設定することで修正できます。\n\n"
    },
    {
      "title": "awesome の BadPicture request",
      "level": 3,
      "content": "awesome で以下のエラーが表示される場合:\n\n```\nerror 163: BadPicture request 149 minor 8 serial 34943\nerror 163: BadPicture request 149 minor 8 serial 34988\nerror 163: BadPicture request 149 minor 8 serial 35033\n```\n\nfeh をインストールしてから awesome を再起動してください。\n\n"
    },
    {
      "title": "解像度を変更した後に awesome で画面が更新されない",
      "level": 3,
      "content": "外部モニターを使っている場合、ディスプレイの解像度が自動的に変更された時に問題が発生することがあります: 画面の一部分が\"動かなくなり\"更新されなくなる現象です。この問題は awesome が feh を使って背景を設定しているだけでなく初期の (Xcompmgr の起動前に実行される) 解像度変更を行っていることが原因です。\n\nこれを修正するには、hsetroot をインストールして .xinitrc で xcompmgr の直前に次の行を追加してください:\n\n```\nhsetroot -solid \"#000066\"\n```\n\n(#000066 はあなたが選んだ色に置き換えられます).\n\n"
    }
  ]
}