{
  "title": "Logrotate (Українська)",
  "url": "https://wiki.archlinux.org/title/Logrotate_(%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Джерело https://github.com/logrotate/logrotate:\n\nЗа замовчуванням ротація logrotate складається з перейменування існуючих файлів журналу з числовим суфіксом, а потім відновлення оригінального порожнього файлу журналу. Наприклад, /var/log/syslog.log є перейменованим /var/log/syslog.log.1. Якщо /var/log/syslog.log.1 вже існує з попередньої ротації, його буде спочатку перейменовано на /var/log/syslog.log.2. (Можна налаштувати кількість резервів для зберігання.)\n\n"
    },
    {
      "title": "Встановлення",
      "level": 2,
      "content": "Logrotate можна встановити за допомогою пакета logrotate.\n\nЗа замовчуванням logrotate запускається щодня за допомогою таймера systemd timer: logrotate.timer.\n\n"
    },
    {
      "title": "Налаштування",
      "level": 2,
      "content": "Основним файлом конфігурації logrotate, який встановлює параметри за замовчуванням, є /etc/logrotate.conf; додаткові конфігураційні файли специфічних програм включено з каталогу /etc/logrotate.d. Значення, встановлені у файлах конфігурації для конкретної програми, замінюють ті самі параметри в основному файлі конфігурації. Перегляньте logrotate.conf(5) для прикладів конфігурації та посилання на доступні директиви.\n\nЩоб перевірити, чи logrotate працює правильно, запустіть його в режимі налагодження, у цьому режимі він не робить нічого, крім виведення налагоджувального виводу:\n\n```\n$ logrotate --debug /etc/logrotate.conf\n```\n\n"
    },
    {
      "title": "Стиснення журналів",
      "level": 3,
      "content": "Logrotate може стискати журнали за допомогою спеціальної команди, наприклад zstd.\n\n```\n/etc/logrotate.conf\n```\n\n```\ncompress\ncompresscmd /usr/bin/zstd\ncompressext .zst\ncompressoptions -T0 --long\nuncompresscmd /usr/bin/unzstd\n```\n\nДивіться logrotate.conf(5) та zstd(1) для більш детальної інформації.\n\n"
    },
    {
      "title": "Використання",
      "level": 2,
      "content": "logrotate зазвичай запускається через службу systemd: logrotate.service.\n\nЩоб запустити logrotate вручну:\n\n```\n# logrotate /etc/logrotate.conf\n```\n\nДля ротації одного файлу журналу:\n\n```\n# logrotate /etc/logrotate.d/mylog\n```\n\nЩоб імітувати запуск файлу конфігурації (сухий запуск):\n\n```\n# logrotate --debug /etc/logrotate.d/mylog\n```\n\nЩоб примусово виконувати ротацію, навіть якщо умови не виконуються, виконайте:\n\n```\n# logrotate -vf /etc/logrotate.d/mylog\n```\n\nДивіться logrotate(8) для більш детальної інформації.\n\n"
    },
    {
      "title": "exim log not rotated",
      "level": 3,
      "content": "Якщо ви встановили змінну olddir у /etc/logrotate.conf,, ви отримаєте таке повідомлення:\n\nerror: failed to rename /var/log/exim/mainlog to /var/log/old/mainlog.1: Permission denied\n\nЩоб виправити це, додайте користувача exim до журналу групи log. Потім змініть групу olddir, як правило, /var/log/old, на log замість стандартної root.\n\n"
    },
    {
      "title": "Перевірка статусу logrotate",
      "level": 3,
      "content": "Ротації Logrotate зазвичай реєструються в /var/lib/logrotate.status (Параметр -s дозволяє вказати інший файл стану):\n\n```\n/var/lib/logrotate.status\n```\n\n```\n\"/var/log/mysql/query.log\" 2016-3-20-5:0:0\n\"/var/log/samba/samba-smbd.log\" 2016-3-21-5:0:0\n\"/var/log/httpd/access_log\" 2016-3-20-5:0:0\n...\n```\n\n"
    },
    {
      "title": "Skipping log because parent directory has insecure permission",
      "level": 3,
      "content": "Налаштуйте, який користувач і яка група має виконувати завдання /etc/logrotate.d/job:\n\n```\nfile-to-be-rotated {\n    su user group\n    rotate 4\n}\n```\n\n"
    },
    {
      "title": "Дивіться також",
      "level": 2,
      "content": "- Gentoo:Logrotate\n- logrotate(8) manual page\n- logrotate.conf(5) manual page\n\n"
    }
  ]
}