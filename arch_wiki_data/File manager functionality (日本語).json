{
  "title": "File manager functionality (日本語)",
  "url": "https://wiki.archlinux.org/title/File_manager_functionality_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- PCManFM\n- Thunar\n- ウィンドウマネージャ\n- デスクトップ環境\n- Udisks\n\nこの記事ではファイルマネージャの機能を拡張するのに必要な追加のソフトウェアパッケージを紹介します。特に Openbox などのウィンドウマネージャを使用する場合に役に立ちます。パスワードを必要としないパーティションやリムーバブルメディアへのアクセスなども可能になります。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 概要\n- 2 追加機能 2.1 マウント 2.1.1 ファイルマネージャデーモン 2.1.2 スタンドアロン 2.2 ネットワーク 2.2.1 Windows アクセス 2.2.2 Apple アクセス 2.2.3 SFTP アクセス 2.3 サムネイルプレビュー 2.3.1 Dolphin と Konqueror 以外のファイルマネージャ 2.3.2 Dolphin と Konqueror (KDE) 2.3.3 PCManFM を使用して、他のファイルタイプのサムネイルを取得する 2.4 圧縮ファイル 2.5 NTFS の読み書きサポート 2.6 デスクトップ通知\n- 3 トラブルシューティング 3.1 ドライブをマウントしようとした際に \"Not Authorized\" 3.2 パーティションやリムーバブルメディアにアクセスするのに必要なパスワード 3.3 ディレクトリがファイルマネージャで開かれない 3.3.1 D-Bus\n\n- 2.1 マウント 2.1.1 ファイルマネージャデーモン 2.1.2 スタンドアロン\n- 2.2 ネットワーク 2.2.1 Windows アクセス 2.2.2 Apple アクセス 2.2.3 SFTP アクセス\n- 2.3 サムネイルプレビュー 2.3.1 Dolphin と Konqueror 以外のファイルマネージャ 2.3.2 Dolphin と Konqueror (KDE) 2.3.3 PCManFM を使用して、他のファイルタイプのサムネイルを取得する\n- 2.4 圧縮ファイル\n- 2.5 NTFS の読み書きサポート\n- 2.6 デスクトップ通知\n\n- 2.1.1 ファイルマネージャデーモン\n- 2.1.2 スタンドアロン\n\n- 2.2.1 Windows アクセス\n- 2.2.2 Apple アクセス\n- 2.2.3 SFTP アクセス\n\n- 2.3.1 Dolphin と Konqueror 以外のファイルマネージャ\n- 2.3.2 Dolphin と Konqueror (KDE)\n- 2.3.3 PCManFM を使用して、他のファイルタイプのサムネイルを取得する\n\n- 3.1 ドライブをマウントしようとした際に \"Not Authorized\"\n- 3.2 パーティションやリムーバブルメディアにアクセスするのに必要なパスワード\n- 3.3 ディレクトリがファイルマネージャで開かれない 3.3.1 D-Bus\n\n- 3.3.1 D-Bus\n\n"
    },
    {
      "title": "概要",
      "level": 2,
      "content": "ファイルマネージャだけでは Xfce や KDE などの完全なデスクトップ環境で使うことができる機能は実現しません。ファイルマネージャが以下のことを行うには追加のソフトウェアパッケージが必要になるからです:\n\n- 他のパーティションの表示とアクセス\n- リムーバブルメディア (例: USB スティック, 光ディスク, デジタルカメラ) の表示・マウント・アクセス\n- 別のオペレーティングシステムとの共有ネットワークの有効化\n- サムネイルの有効化\n- ファイルの圧縮と展開\n- リムーバブルメディアの自動マウント\n\nファイルマネージャが完全なデスクトップ環境の一部としてインストールされた場合、大抵は追加のソフトウェアパッケージも自動的にインストールされるのが基本です。逆に、スタンドアロンのウィンドウマネージャのためにファイルマネージャがインストールされたときは、ウィンドウマネージャそれ自体と同じように、あくまで基本的な機能だけしか揃っていません。ユーザーがどの機能を追加するか決める必要があります。\n\n"
    },
    {
      "title": "追加機能",
      "level": 2,
      "content": "軽量な環境を使っている場合、もしくは軽量な環境を使うつもりの場合、ファイルマネージャの機能を増やすと一般的により多くのメモリを使用することになるので注意してください。udisks も参照。\n\n"
    },
    {
      "title": "マウント",
      "level": 3,
      "content": "- gvfs: GNOME 仮想ファイルシステム (Gnome Virtual File System) はマウントとゴミ箱の機能を提供します。GVFS はマウント機能に udisks2 を利用し、ほとんどのファイルマネージャで推奨されているソリューションです。\n\nGVFS によって使用されるフォルダ:\n\n- /usr/lib/ には gvfsd-* ファイルが含まれます。* は様々なサポートされているファイルシステムのタイプに置き換わります。\n- /usr/share/gvfs/mounts/ には GVFS のマウントルールが含まれています。自分で作成したルールを使いたいときは、~/.gvfs/mounts を作成してください。\n\nカメラやモバイル端末などにアクセスできるようにするには gvfs-* パッケージが必要です。例:\n\n- gvfs-mtp: MTP を使用するメディアプレイヤーやモバイル端末\n- gvfs-gphoto2: PTP を使用するデジタルカメラやモバイル端末\n- gvfs-afc: Apple のモバイル端末\n\n"
    },
    {
      "title": "ファイルマネージャデーモン",
      "level": 4,
      "content": "最初にインストールしているファイルマネージャをデーモンモードで (つまりバックグラウンドプロセスで) 自動的に起動します。例えば、Openbox で PCManFM を使っている場合、以下のコマンドを ~/.config/openbox/autostart ファイルに追加します:\n\n```\npcmanfm -d &\n```\n\nボリューム管理に関してはファイルマネージャ自体の設定も必要になります (例: マウント時に特定のファイルタイプが検出されたときにどのアプリケーションを実行するかなど)。\n\n"
    },
    {
      "title": "スタンドアロン",
      "level": 4,
      "content": "マウントアプリケーションをインストールするという選択肢もあります。マウントアプリケーションを利用する利点は:\n\n- ファイルマネージャを実行するよりもバックグラウンド/デーモンプロセスで実行するのに必要なメモリが少ない\n- ファイルマネージャに縛られないので、自由に追加・削除したり切り替えることが可能\n- マウントするのに gvfs をインストールする必要がない。メモリの使用量が減らせる。ただし、ゴミ箱などの、このパッケージが持つ他の機能も失われる\n\n"
    },
    {
      "title": "ネットワーク",
      "level": 3,
      "content": "- obexftpAUR: Bluetooth デバイスのマウントとファイル転送 (Bluetooth を参照)\n- gvfs-smb: KDE 以外のデスクトップのための Windows ファイル・プリンタ共有 (Samba を参照)\n- kdenetwork-filesharing: KDE のための Windows ファイル・プリンタ共有 (Samba#KDE を参照)\n- sshfs: SSH ファイル転送プロトコルに基づく FUSE クライアント\n\n"
    },
    {
      "title": "Windows アクセス",
      "level": 4,
      "content": "gvfs-smb を使用して Windows/CIFS/Samba ファイル共有にアクセスするには、まずファイルマネージャを開いて、以下をパスに入力してください (<sever name> と <share name> は適切なものに置き換えて下さい):\n\n```\nsmb://<server name>/<share name>\n```\n\n"
    },
    {
      "title": "Apple アクセス",
      "level": 4,
      "content": "AFP のサポートは gvfs に含まれています。AFP ファイルにアクセスするには、まずファイルマネージャを開いて、以下をパスに入力してください (<sever name> と <share name> は適切なものに置き換えて下さい):\n\n```\nafp://<server name>/<share name>\n```\n\n"
    },
    {
      "title": "SFTP アクセス",
      "level": 4,
      "content": "SFTP のサポートは gvfs に含まれています。sftp でフォルダにアクセスするには、ファイルマネージャを開き、パス名に以下を入力し、 user@server_name と folder_name を適当に変えてください。\n\n```\nsftp://user@server_name/folder_name\n```\n\n"
    },
    {
      "title": "サムネイルプレビュー",
      "level": 3,
      "content": "以下で示しているパッケージをインストールしたとしても、ファイルマネージャによってはサムネイルの作成をサポートしていないことがあります。ファイルマネージャのドキュメントを確認してください。\n\n"
    },
    {
      "title": "Dolphin と Konqueror 以外のファイルマネージャ",
      "level": 4,
      "content": "以下のパッケージは PCManFM, SpaceFM, Thunar, xfeAUR など多数のファイルマネージャに適用されます。例外は KDE デスクトップ環境で使用されている Dolphin と Konqueror です。\n\n- tumbler: 画像ファイル。他のファイルタイプのサムネイルを表示するのにもこのパッケージのインストールは必須です。\n- poppler-glib: Adobe の .pdf ファイル\n- ffmpegthumbnailer: 動画ファイル\n- freetype2: フォントファイル\n- libgsf: .odf ファイル\n- raw-thumbnailer: .raw ファイル\n- totem: 動画ファイルとタグ付きの音声ファイル (GNOME Files, Nemo, Caja のみ)\n- evince または atril: .pdf ファイル\n- gnome-epub-thumbnailer: .epub と .mobi ebook ファイル\n- mcomix: .cbr コミックアーカイブ\n- folderpreviewAUR: フォルダのサムネイル\n- F3DAUR: glTF、stl、step、ply、obj、fbx を含む 3D ファイル。\n\n"
    },
    {
      "title": "Dolphin と Konqueror (KDE)",
      "level": 4,
      "content": "Dolphin#ファイルプレビューを参照。\n\n"
    },
    {
      "title": "PCManFM を使用して、他のファイルタイプのサムネイルを取得する",
      "level": 4,
      "content": "Table content:\nこの記事あるいはセクションで使われている用語や表現には問題が存在します。 議論: This section is not specific to PCManFM, it should be rewritten/generalized. (議論: トーク:ファイルマネージャの機能#)\n\nPCManFM は画像のサムネイルをすぐにサポートします。しかし、他のファイルタイプのサムネイルを表示するために、PCManFM は /usr/share/thumbnailers にあるファイルで提供される情報を使用します。サムネイルを提供するパッケージは、通常、対応する .thumbnail ファイルを /usr/share/thumbnailers に追加します。例えば、OpenDocument ファイルのサムネイルを取得するためには、公式リポジトリから libgsf をインストールします。動画ファイルのサムネイルを取得するには、ffmpegthumbnailer というパッケージが必要です。PDF ファイルのサムネイルは、公式リポジトリから evince をインストールすることで、 evince-thumbnailer と対応するファイルが /usr/share/thumbnailers に提供されます。しかし、evince をインストールしたくない場合は、imagemagick の convert コマンドを使用して evince-thumbnailer の機能を再現することも可能です。これは、拡張子が .thumbnailer のファイル (例:imagemagick-pdf.thumbnailer) を /usr/share/thumbnailers に以下の内容で新規作成することで実現できます。\n\n```\n[Thumbnailer Entry]\n  TryExec=convert\n  Exec=convert %i[0] -background \"#FFFFFF\" -flatten -thumbnail %s %o\n  MimeType=application/pdf;application/x-pdf;image/pdf;\n```\n\nこの例に従って、独自の .thumbnail ファイルを作成することにより、カスタムサムネイルを指定できます。 %i は入力ファイル(サムネイルが作成されるファイル)を参照し、%o は出力ファイル(サムネイル画像)を参照し、%s はサムネイルのサイズであることに留意してください。これらのパラメータは、対応するデータに自動的に置き換えられ、PCManFM によってサムネイルプログラムに渡されます。\n\n"
    },
    {
      "title": "圧縮ファイル",
      "level": 3,
      "content": "tarball (.tar や .tar.gz) などの圧縮ファイルをファイルマネージャで展開するには、まず file-roller などの GUI アーカイバをインストールする必要があります。詳しくはアプリケーション一覧#圧縮ツールを見て下さい。zip で圧縮された .zip を利用するには unzip などの追加のパッケージもインストールする必要があります。アーカイバをインストールしたら、ファイルマネージャでファイルを右クリックして圧縮したり展開できます。\n\nアーカイブファイルは、/run/user/$(id -u)/gvfs/ フォルダにマウントされ、ファイル名にはフルパスが含まれ、/ はすべて %252F に : は %253A に置き換えられて自動的にマウントポイントが作られます。\n\nマウントされたアーカイブへのパスの例 /full/path/to/file/name.zip\n\n```\n/run/user/$(id -u)/gvfs/archive:host=file%253A%252F%252F%252Ffull%252Fpath%252Fto%252Ffile%252Fname.zip\n```\n\n"
    },
    {
      "title": "NTFS の読み書きサポート",
      "level": 3,
      "content": "ntfs-3g をインストールしてください。詳しくは NTFS-3G の記事を見て下さい。\n\n"
    },
    {
      "title": "デスクトップ通知",
      "level": 3,
      "content": "ファイルマネージャの中にはデスクトップ通知を利用してマウントやアンマウント、リムーバブルメディアのエジェクトなどのイベントや状態を知らせるものがあります。\n\n"
    },
    {
      "title": "ドライブをマウントしようとした際に \"Not Authorized\"",
      "level": 3,
      "content": "udisks を使用するファイルマネージャには polkit 認証エージェントが必要です。polkit#認証エージェント を見て下さい。\n\n"
    },
    {
      "title": "パーティションやリムーバブルメディアにアクセスするのに必要なパスワード",
      "level": 3,
      "content": "他のパーティションやマウントしたリムーバブルメディアにアクセスするのにパスワードが必要なのは udisks2 のデフォルトのパーミッション設定が原因です。厳密に言えば、パーミッションは root アカウントにだけ設定されており、ユーザーアカウントには設定されていません。この挙動を修正する方法はシンプルです:\n\n1. ユーザーアカウントを storage グループに追加してください。詳しくはユーザーとグループを参照。\n1. #root パスワードがいらない GVFS マウント で示されている polkit ルールを作成。\n\nこれで storage グループのユーザーは、パスワードをきかれることなく、システムデバイスのファイルシステムをマウントすることができるようになります。\n\n"
    },
    {
      "title": "ディレクトリがファイルマネージャで開かれない",
      "level": 3,
      "content": "ディレクトリを開くのに使われるデフォルトアプリケーションが Audacious など、ファイルマネージャではないアプリケーションになってしまうことがあります。デフォルトになる可能性があるアプリケーションは、デスクトップエントリで MIME タイプの inode/directory を扱うことができると指定されているアプリケーションです。どのアプリケーションでディレクトリが開かれるのかは次のコマンドで確認できます:\n\n```\n$ xdg-mime query default inode/directory\n```\n\nファイルマネージャでディレクトリが開かれるようにするには、次のコマンドを実行:\n\n```\n$ xdg-mime default my-file-manager.desktop inode/directory\n```\n\nmy-file-manager.desktop はファイルマネージャのデスクトップエントリに置き換えてください (例: org.gnome.Nautilus.desktop)。\n\n```\n/usr/share/applications/mimeapps.list\n```\n\n```\n[Default Applications]\ninode/directory=my-file-manager.desktop\n```\n\n"
    },
    {
      "title": "D-Bus",
      "level": 4,
      "content": "一部のアプリケーションは、org.freedesktop.FileManager1 D-Bus プロトコルを使用します(例:Firefox) 以下に、このプロトコルをサポートする現在インストールされているサービスのリストを示します。\n\n```\n$ grep -R FileManager1 /usr/share/dbus-1/services\n```\n\n開いているファイルマネージャに、ファイルを $XDG_DATA_HOME/dbus-1/services にコピーします。 さらに、変更がアクティブになる前に、現在 D-Bus サービスを実装しているプログラムを強制終了します。\n\n"
    }
  ]
}