{
  "title": "Bareos (Русский)",
  "url": "https://wiki.archlinux.org/title/Bareos_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.** This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThis article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nBareos (Backup Archiving Recovery Open Sourced) — высоконадежное сетевое кроссплатформенное программное обеспечение для резервного копирования, архивирования и восстановления данных. Bareos, основанный в 2010 году как 100-процентное открытое ответвление проекта Bacula, активно развивается и пополняется многими новыми функциями.\n\nСайт проекта: https://www.bareos.com\n\n"
    },
    {
      "title": "Описание пакетов",
      "level": 2,
      "content": "Table content:\nИмя пакета | Описание\nbareos-commonAUR | Общие файлы для пакетов bareos\nbareos-bconsoleAUR | Admin Tool (CLI)\nbareos-database-commonAUR | Общие абстракции библиотеки и инструменты для баз SQL\nbareos-database-postgresqlAUR | Библиотеки и инструменты для варианта использования базы postgresql\nbareos-database-toolsAUR | CLI инструменты с зависимостями баз данных (dbcheck, bscan)\nbareos-develAUR | Заголовки Devel\nbareos-directorAUR | Director (DIR), главный демон отвечающий за все выполняемые операции (управляет операциями резервного копирования и восстановления, выполняемыми демонами File и Storage.)\nbareos-filedaemonAUR | Файловый демон (устанавливается на клиентской части)\nbareos-storageAUR | Storage Daemon (SD): программное обеспечение, которое выполняет операции чтения и записи на устройствах хранения, используемых для резервного копирования.\nbareos-storage-fifoAUR | Поддержка FIFO для демона хранилища\nbareos-storage-tapeAUR | Поддержка лентовых хранилищ\nbareos-toolsAUR | CLI инструменты (bcopy, bextract, bls, bregeq, bwild)\nbareos-webuiAUR | Webui (веб-интерфейс администрирования Bareos)\n\n"
    },
    {
      "title": "Установка серверной части",
      "level": 2,
      "content": "Для минимальной установки серверной части достаточно установить следующие пакеты:\n\nПакет главного демона (Директора):\n\n```\n# pacman -S bareos-director\n```\n\nПакет предпочитаемой базы данных (допустим MySQL):\n\n```\n# pacman -S bareos-database-mysql\n```\n\nПакет хранилища архивных данных (можно устанавливать на другом сервере или даже на нескольких серверах):\n\n```\n# pacman -S bareos-storage\n```\n\n"
    },
    {
      "title": "Настройка базы данных MySQL",
      "level": 3,
      "content": "Для создания mysql базы данных на localhost и пользователя root выполним:\n\n```\n/usr/lib/bareos/scripts/create_bareos_database --user root --password\n```\n\nСоздание таблиц:\n\n```\n/usr/lib/bareos/scripts/make_bareos_tables --user root --password\n```\n\nСоздадим пользователя bareos и настроим привилегии:\n\n```\n/usr/lib/bareos/scripts/grant_bareos_privileges --user root --password\n```\n\nБудет создана база данных bareos, а также пользователь bareos без пароля (желательно пароль позже установить).\n\nЧтобы bareos-dir начал работать с MySQL, нужно настроить конфигурационный файл с секцией Catalog.\n\nПо умолчанию файл располагается в /etc/bareos/bareos-dir.d/catalog и может иметь произвольное имя с расширением .conf.\n\nПример содержания файла:\n\n```\nCatalog {\n  Name = DatabaseCatalog\n  dbdriver = \"mysql\"\n  dbname = \"bareos\"\n  dbuser = \"bareos\"\n  dbpassword = \"\"\n  }\n```\n\n"
    },
    {
      "title": "Настрока места хранения бекапов Storage (SD)",
      "level": 3,
      "content": "Структура каталога с конфигурационными файлами может иметь следующий вид:\n\n/etc/bareos/bareos-sd.d/device - каталог содержит файлы конфигураций с настройками физический устройств (названия файлов может быть произвольным)\n\nПример файла конфигурации:\n\n```\nDevice {\n   # Название устройства хранения\n   # Директор должен иметь то же Имя и MediaType.\n   Name = archive1\n   Media Type = archive-file\n   # Путь к устройству или папке\n   Archive Device = /archive1/bareos\n   # Разрешить автоматически размечать тома\n   LabelMedia = yes;\n   # Для одновременного доступа при одновременном выполнении нескольких задач\n   Random Access = yes;\n   # Автоматически монтировать устройство\n   AutomaticMount = yes;\n   RemovableMedia = no;\n   AlwaysOpen = no;\n   Maximum Concurrent Jobs = 1\n   Description = \"/archive1\"\n }\n```\n\n/etc/bareos/bareos-sd.d/director - каталог с файлами конфигураций Директора.\n\nПример файла конфигурации:\n\n```\nDirector {\n   # Параметры директора, который может подключаться к Storage\n   Name = bareos_dir\n   # Пароль для подключкния к этому Storage\n   Password = \"\"\n   Description = \"Director, who is permitted to contact this storage daemon.\"\n }\n```\n\n/etc/bareos/bareos-sd.d/messages - каталог с файлами сообщений.\n\nПример файла конфигурации:\n\n```\nMessages {\n   Name = standard\n   Director = bareos_dir = all\n   Description = \"Send all messages to the Director.\"\n }\n```\n\n/etc/bareos/bareos-sd.d/storage - каталог с конфигурационными файлами хранилища.\n\n```\nStorage {\n   Name = storage1\n   # Максимальное количество одновременно выполняющихся Job\n   Maximum Concurrent Jobs = 20\n   # remove comment from \"Plugin Directory\" to load plugins from specified directory.\n   # if \"Plugin Names\" is defined, only the specified plugins will be loaded,\n   # otherwise all storage plugins (*-sd.so) from the \"Plugin Directory\".\n   #\n   # Plugin Directory = \"/usr/lib/bareos/plugins\"\n   # Plugin Names = \"\"\n }\n```\n\nЗапуск демона Storage:\n\n```\nsystemctl start bareos-sd\n```\n\n"
    },
    {
      "title": "Примеры конфигурационных файлов",
      "level": 2,
      "content": "Примеры конфигурационных файлов находятся в /usr/share/bareos/config.\n\n"
    }
  ]
}