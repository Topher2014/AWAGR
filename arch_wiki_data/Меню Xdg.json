{
  "title": "Меню Xdg",
  "url": "https://wiki.archlinux.org/title/%D0%9C%D0%B5%D0%BD%D1%8E_Xdg",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "xdg-menu — это инструмент, генерирующий меню на основе информации из XDG Desktop Menu для следующих оконных менеджеров:\n\n- awesome\n- Blackbox\n- Fluxbox\n- FVWM2\n- IceWM\n- Openbox\n- twm\n- Window Maker\n\nKDE, GNOME, Xfce и Enlightenment уже имеют совместимость с XDG.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установите пакет archlinux-xdg-menu.\n\n"
    },
    {
      "title": "Иерархия меню",
      "level": 2,
      "content": "- Applications (Приложения) Accessibility (Специальные возможности) Accessories (Стандартные) Development (Разработчка) Education (Образование) Games (Игры) Graphics (Графика) Internet (Интернет) Multimedia (Мультимедиа) Office (Офис) Other (Прочее) Science (Наука) System (Система)\n\n- Accessibility (Специальные возможности)\n- Accessories (Стандартные)\n- Development (Разработчка)\n- Education (Образование)\n- Games (Игры)\n- Graphics (Графика)\n- Internet (Интернет)\n- Multimedia (Мультимедиа)\n- Office (Офис)\n- Other (Прочее)\n- Science (Наука)\n- System (Система)\n\n"
    },
    {
      "title": "Настройка",
      "level": 2,
      "content": "Xdg_menu опирается на сведения для генерации меню из трёх источников: root menu (главное меню) или другими словами, шаблон меню XML, как правило передающихся в командной строке, информация и ряд конфигурационных файлов кэшируются, после последнего запуска.\n\n- Вы можете найти несколько шаблонов меню в /etc/xdg/menus.\n- После изменения кода в xdg_menu, чтобы изменить схему, убедитесь, что вы удалили всё в ~/.xdg_menu_cache, иначе вы потратите много времени, пытаясь выяснить, почему ваши изменения в скрипатх Perl не принимаются.\n- Вы можете найти индивидуальные конфигурации приложений в /usr/share/applications.\n\nДругие каталоги файлов конфигурации можно найти в каталоге /usr/share. В большинстве случаев вам не нужно трогать их. Если вы хотите, изменить то, как ваше меню располагается, вы можете изменить шаблон меню. Основные изменения требуют тонкой настройки скрипта perl xdg_menu. Если вы обнаружили, что приложения не отображаются или что они вызывают что-то не то, то вам нужно будет посмотреть в файл .desktop в /usr/share/applications. Проверьте этот файл стандартов.\n\n"
    },
    {
      "title": "Добавление записей рабочего стола из других каталогов",
      "level": 3,
      "content": "По умолчанию, меню XDG будет заполняться приложениями которые устанавливают свои desktop entries в /usr/share/applications. Чтобы добавить в меню приложение, которое устанавливает свои desktop entry в пользовательский каталог, такой как ~/.local/share/applications, отредактируйте файл /etc/xdg/menus/arch-applications.menu и добавьте тэг <AppDir> для соответствующего каталога, смотрите ниже:\n\n```\n/etc/xdg/menus/arch-applications.menu\n```\n\n```\n<Menu>\n\n  <Name>Applications</Name>\n  <Directory>Arch-Applications.directory</Directory>\n  <DefaultAppDirs/>\n  <AppDir>/home/Ваш логин/.local/share/applications</AppDir>\n  <DefaultDirectoryDirs/>\n  <DefaultMergeDirs/>\n  ...\n```\n\n"
    },
    {
      "title": "xdg_menu",
      "level": 3,
      "content": "```\nxdg_menu [--format <format>] [--desktop <desktop>] \n         [--charset <charset>] [--language <language>]  \n\t [--root-menu <root-menu>] [--die-on-error]\n\t [--fullmenu] [--help]\n\t\t \n\tformat - output format\n\t         possible formats: twm, WindowMaker, fvwm2, icewm, ion3\n\t                           blackbox, fluxbox, openbox, \n\t\t\t\t   xfce4, openbox3, openbox3-pipe, awesome\n\t\t\t\t   readable\n\t\t default: WindowMaker\n\t\t\n \tfullmenu  - output a full menu and not only a submenu\n\n\tdesktop - desktop name for NotShowIn and OnlyShowIn\n\t\t default: the same as format\n\t\t\t \n\tcharset - output charset\n\t\t default: <locale>\n\t\t\t \n\tlanguage - output language\n\t\t default: <locale>\n\t\t\t \n\troot-menu - location of root menu file\n\t\t default: /opt/gnome/etc/xdg/menus/applications.menu\n\t\t\t \n\tdie-on-error - abort execution on any error, \n\t\t default: try to continue\n\n\tverbose - print debugging information\n\t\t \n\thelp - print this text\n```\n\n"
    },
    {
      "title": "update-menus",
      "level": 3,
      "content": "update-menus обновляет меню оконных менеджеров на основе данных XDG и может быть настроен на автоматическое обновление.\n\nЭто скрипт-оболочка xdg_menu. Его можно настроить с помощью файла /etc/update-menus.conf.\n\nДля использования установите пакет archlinux-xdg-menu (xdg_menu).\n\nВ файле /etc/update-menus.conf выберите из списка оконные менеджеры, для которых нужно сгенерировать меню. Строки с символом # в начале считаются комментариями и игнорируются.\n\nВсе сгенерированные меню находятся в каталоге /var/cache/xdg-menu/. В разделе #Примеры показано, как настроить использование меню в оконных менеджерах.\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format awesome --root-menu /etc/xdg/menus/arch-applications.menu > ~/.config/awesome/archmenu.lua\n```\n\nЗатем измените rc.lua как показано ниже.\n\n- Добавьте требуемый оператор для вашего нового файла menu.lua.\n- Добавьте запись в свой объект awful.menu для нового меню, которое вызывает xdg-menu.\n\n```\n...\nxdg_menu = require(\"archmenu\")\n...\n\n...\nmymainmenu = awful.menu({ items = { { \"awesome\", myawesomemenu, beautiful.awesome_icon },\n                                    { \"Applications\", xdgmenu },\n                                    { \"open terminal\", terminal }\n                                  }\n                        })\n...\n```\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format icewm --fullmenu --root-menu /etc/xdg/menus/arch-applications.menu >> ~/.icewm/programs\n```\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Раскоментируйте icewm в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- Сделайте символьную ссылку на /var/cache/xdg-menu/icewm/programs в ~/.icewm/programs.\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format fluxbox --root-menu /etc/xdg/menus/arch-applications.menu > ~/.fluxbox/my-menu\n```\n\nИзмените файл меню, чтобы включить сгенерированное меню.\n\nНапример добавьте строку:\n\n```\n[include] (my-menu)\n```\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расскоментируйте fluxbox в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- Измените файл меню, чтобы включить сгенерированное меню.\n\nНапример добавьте строку:\n\n```\n[include] (/var/cache/xdg-menu/fluxbox/boxrc)\n```\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "Сгенерируйте меню\n\n```\n$ xdg_menu --format openbox3 --root-menu /etc/xdg/menus/arch-applications.menu > xdg-menu.xml\n```\n\nи вручную добавьте его в свой menu.xml. Например, положите xdg-menu.xml в menu.xml и добавьте:\n\n```\n<menu id=\"Applications\" />\n```\n\nв root-menu.\n\n"
    },
    {
      "title": "Как pipe menu",
      "level": 4,
      "content": "Использование xdg_open как pipe menu, дает дополнительное преимущество получить меню, которое автоматически обновляется при установке новых приложений.\n\nДобавьте следующее, где-то, внутри вашего menu.xml между вашими тэгами root menu\n\n```\n<menu id=\"applications\" label=\"Applications\" execute=\"xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu\" />\n```\n\nОчень простой пример:\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<openbox_menu xmlns=\"http://openbox.org/3.4/menu\">\n\n<menu id=\"root-menu\" label=\"Openbox 3\">\n  <menu id=\"applications\" label=\"Applications\" execute=\"xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu\" />\n  <separator />\n  <item label=\"Log Out\">\n    <action name=\"Exit\">\n      <prompt>yes</prompt>\n    </action>\n  </item>\n</menu>\n\n</openbox_menu>\n```\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расcкоментируйте openbox в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- измените ваш файл menu.xml, чтобы включить сгенерированное меню.\n\nНапример, добавьте следующее в root-menu:\n\n```\n<menu id=\"xdg-menu\" label=\"XDG Menu\" execute=\"cat /var/cache/xdg-menu/openbox/menu.xml\"/>\n```\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "Используйте\n\n```\n$ xdg_menu --format twm --root-menu /etc/xdg/menus/arch-applications.menu >my-twm-menu\n```\n\nИ добавьте его в twmrc вручную. В случае с производным twm препроцессингом m4, таким как vtwm или ctwm, он может быть включен путём добавления\n\n```\nsinclude(`/PATH/TO/my-twm-menu')\n```\n\nв *twmrc.\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расcкоментируйте twm в /etc/update-menus.conf.\n- Добавьте в файл /etc/X11/twm/system.twmrc меню приложений (добавьте это в defops menu)::\n\n```\n\"apps\"          f.menu \"Applications\"\n```\n\n- Выполните update-menus от имени суперпользователя (root).\n- Выполните twm -f /var/cache/xdg-menu/twm/twmrc.\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "Используйте\n\n```\n$ xdg_menu --format WindowMaker --root-menu /etc/xdg/menus/arch-applications.menu >my-wm-menu\n```\n\nи добавьте\n\n```\n#include \"my-wm-menu\"\n```\n\nв ваш файл меню WindowMaker.\n\nВы можете также использовать WPrefs \"Application Menu Definitions\", и добавить команду XDG в качестве параметра в объект \"Generated Submenu\".\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расcкоментируйте WindowMaker в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- Добавьте\n\n```\n#include \"/var/cache/xdg-menu/WindowMaker/wmrc\"\n```\n\nв ваш файл меню.\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "Сгенерируйте меню\n\n```\n$ xdg_menu --format fvwm2 --root-menu /etc/xdg/menus/arch-applications.menu >fvwm2-menu\n```\n\nИ добавьте его в главное меню:\n\n```\nread fvwm2-menu\n\nAddToMenu MenuFvwmRoot  \"Root Menu\"             Title\n+                       \"&0. XDG Menu\"          Popup xdg_menu\n```\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расcкоментируйте fvwm2 в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- измените ваш файл .fvwm2rc, чтобы включить сгенерированное меню. Например:\n\n```\nAddToMenu MenuFvwmRoot  \"Root Menu\"             Title\n+                       \"&0. XDG Menu\"          Popup xdg_menu\n```\n\n```\nread /var/cache/xdg-menu/fvwm2/fvwm2rc\n```\n\n"
    },
    {
      "title": "С xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format blackbox  --root-menu /etc/xdg/menus/arch-applications.menu >my-menu\n```\n\nИзмените файл меню, чтобы включить сгенерированное меню.\n\nНапример добавьте строку:\n\n```\n[include] (my-menu)\n```\n\n"
    },
    {
      "title": "С update-menus",
      "level": 4,
      "content": "- Расcкоментируйте blackbox в /etc/update-menus.conf.\n- Выполните update-menus от имени суперпользователя (root).\n- Измените файл меню, чтобы включить сгенерированное меню.\n\nНапример добавьте строку:\n\n```\n[include] (/var/cache/xdg-menu/blackbox/boxrc)\n```\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Sawfish#Menus\n- https://github.com/gapan/xdgmenumaker\n\n"
    }
  ]
}