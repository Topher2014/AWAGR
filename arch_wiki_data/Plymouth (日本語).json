{
  "title": "Plymouth (日本語)",
  "url": "https://wiki.archlinux.org/title/Plymouth_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- サイレントブート\n\nPlymouth は Fedora のプロジェクトで、現在 freedesktop.org's official resources に掲載されており、ちらつきのないグラフィカルなブートプロセスを提供します。カーネルモード設定 (KMS) に依存して、できるだけ早い段階でディスプレイのネイティブ解像度を設定し、ログインマネージャに至るまで、綺麗なスプラッシュ画面を提供します。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 準備\n- 2 インストール 2.1 mkinitcpio 2.2 dracut\n- 3 設定 3.1 テーマの変更 3.2 新しいテーマをインストールする 3.3 遅延表示 3.4 Hidpi\n- 4 ヒントとテクニック 4.1 ブートメッセージを表示する 4.2 スムーズな移行 4.3 テーマのプレビュー 4.4 背景画像を変更する 4.5 BGRT イメージがありません 4.6 完全なアニメーションを表示するために起動を遅くする\n- 5 トラブルシューティング 5.1 カーネルパラメータで無効にする 5.2 デバッグ 5.3 パスワードプロンプトが更新されない 5.4 ディスプレイの中央に配置されていない\n- 6 参照\n\n- 2.1 mkinitcpio\n- 2.2 dracut\n\n- 3.1 テーマの変更\n- 3.2 新しいテーマをインストールする\n- 3.3 遅延表示\n- 3.4 Hidpi\n\n- 4.1 ブートメッセージを表示する\n- 4.2 スムーズな移行\n- 4.3 テーマのプレビュー\n- 4.4 背景画像を変更する\n- 4.5 BGRT イメージがありません\n- 4.6 完全なアニメーションを表示するために起動を遅くする\n\n- 5.1 カーネルパラメータで無効にする\n- 5.2 デバッグ\n- 5.3 パスワードプロンプトが更新されない\n- 5.4 ディスプレイの中央に配置されていない\n\n"
    },
    {
      "title": "準備",
      "level": 2,
      "content": "Plymouth は主に KMS を使用してグラフィックスを表示しますが、UEFI システムでは EFI フレームバッファを利用できます。\n\n独自のドライバーを使用しているなどの理由で KMS を使用できない場合、または EFI フレームバッファを使用したくない場合は、ワイドスクリーン解像度で動作する Uvesafb の使用を検討してください。KMS もフレームバッファもない場合、Plymouth はテキスト モードに戻ります。\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "Plymouth の安定版パッケージは plymouth で、開発版は plymouth-gitAUR です。\n\nデフォルトでは、Plymouth はグラフィカルなスプラッシュスクリーンにブートメッセージを表示せず、/var/log/boot.log に記録します。\n\n- スプラッシュ画面を見たい場合は、カーネルパラメータ に splash を追加してください。\n- サイレントブートをしたい場合は、quiet も追加してください。\n- ブートメッセージの記録を無効にしたい場合は、plymouth.nolog も追加してください。\n\n初期ブート時に Plymouth を起動するには、Plymouth を含むイメージを作成するために initramfs ジェネレータを設定しなくてはなりません。\n\n"
    },
    {
      "title": "mkinitcpio",
      "level": 3,
      "content": "plymouth を mkinitcpio.conf の HOOKS 行に追加してください。\n\n```\n/etc/mkinitcpio.conf\n```\n\n```\nHOOKS=(... plymouth ...)\n```\n\n"
    },
    {
      "title": "dracut",
      "level": 3,
      "content": "Plymouth をインストールすると、dracut が自動的にそれを検出し、initramfs イメージに追加します。自動検出が失敗した場合は、dracut 設定に次の行を追加することで、dracut に強制的に Plymouth を追加することができます。\n\n```\n/etc/dracut.conf.d/myflags.conf\n```\n\n```\nadd_dracutmodules+=\" plymouth \"\n```\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "Plymouth は /etc/plymouth/plymouthd.conf ファイルで設定できます。デフォルト値は /usr/share/plymouth/plymouthd.defaults で確認できます。\n\n"
    },
    {
      "title": "テーマの変更",
      "level": 3,
      "content": "Plymouth には以下のテーマが付属しています:\n\n1. BGRT: 利用可能な場合は OEM ロゴを保持する Spinner のバリエーション (BGRT は Boot Graphics Resource Table の略)\n1. Fade-in: 光る星がフェードイン・アウトするシンプルなテーマ。\n1. Glow: ブートプログレスのパイチャートが表示されロゴが浮かび上がるテーマ。\n1. Script: スクリプトサンプルプラグイン (ナイスな Arch ロゴテーマ)\n1. Solar: 青い炎が上がる星と宇宙のテーマ。\n1. Spinner: ロードの歯車が表示されるシンプルなテーマ。\n1. Spinfinity: 画面の中央に無限マークが表示されるシンプルなテーマ。\n1. Tribar: 3色のプログレスバーのテキストモードテーマ。\n1. (Text: 3色のプログレスバーのテキストモードテーマ)\n1. (Details: 古いフォールバックテーマ)\n\nデフォルトでは、bgrt テーマが選択されています。テーマは、構成ファイルを編集して変更できます。例:\n\n```\n/etc/plymouth/plymouthd.conf\n```\n\n```\n[Daemon]\nTheme=fade-in\n```\n\nまたは次のコマンドで:\n\n```\n# plymouth-set-default-theme -R theme\n```\n\nテーマが変更されるたびに、initrd を再構築する必要があります。-R オプションにより、確実に再構築されます (そうでない場合は、手動で initramfs を再生成 して下さい。)\n\n"
    },
    {
      "title": "新しいテーマをインストールする",
      "level": 3,
      "content": "他のテーマは AUR からインストールできます。[1]、または, plymouth-kcm は、KDE ​​Plasma の設定への統合を提供し、AUR では利用できないテーマを提供します。\n\n次のコマンドを使用すると、現在インストールされているすべてのテーマを一覧表示できます。\n\n```\n$ plymouth-set-default-theme -l\n```\n\nもしくは:\n\n```\n$ ls /usr/share/plymouth/themes\n```\n\n```\nbgrt  details  fade-in  glow  script  solar  spinfinity  spinner  text  tribar\n```\n\n"
    },
    {
      "title": "遅延表示",
      "level": 3,
      "content": "Plymouth には、スプラッシュスクリーンを遅らせる設定オプションがあります。\n\n```\n/etc/plymouth/plymouthd.conf\n```\n\n```\n[Daemon]\nShowDelay=5\n```\n\n起動が速いシステムでは、DM またはログインプロンプトの準備が整う前にスプラッシュテーマがちらつくだけの場合があります。ShowDelay を起動時間より長い間隔 (秒単位) に設定すると、このちらつきを防ぎ、空白の画面のみを表示できます。デフォルトは 0 秒であるため、起動中の早い段階でスプラッシュを確認するためにこれを別の値に変更する必要はありません。\n\n"
    },
    {
      "title": "Hidpi",
      "level": 3,
      "content": "plymouthd.conf を編集\n\n```\n/etc/plymouth/plymouthd.conf\n```\n\n```\nDeviceScale=an-integer-scaling-factor\n```\n\n編集が終わったら initrd を再構築します。\n\n"
    },
    {
      "title": "ブートメッセージを表示する",
      "level": 3,
      "content": "ブート中に Esc キーを押すとブートメッセージに切り替えることができます。\n\n"
    },
    {
      "title": "スムーズな移行",
      "level": 3,
      "content": "GDM は、すぐに使える スムーズな移行 をサポートします。\n\n他のディスプレイマネージャーの場合は、次の display-manager.service の ドロップインスニペット を使用すると、ほぼスムーズに移行できます。\n\n```\n/etc/systemd/system/display-manager.service.d/plymouth.conf\n```\n\n```\n[Unit]\nConflicts=plymouth-quit.service\nAfter=plymouth-quit.service rc-local.service plymouth-start.service systemd-user-sessions.service\nOnFailure=plymouth-quit.service\n\n[Service]\nExecStartPre=-/usr/bin/plymouth deactivate\nExecStartPost=-/usr/bin/sleep 30\nExecStartPost=-/usr/bin/plymouth quit --retain-splash\n```\n\n"
    },
    {
      "title": "テーマのプレビュー",
      "level": 3,
      "content": "initrd を再構築しなくてもテーマをプレビューできます。Ctrl+Alt+F6 を押してテキスト端末に切り替え、root としてログインして次のように入力します。\n\n```\n# plymouthd\n# plymouth --show-splash\n```\n\nプレビューを終了するには、もう一度 Ctrl+Alt+F6 を押して、次のように入力します。\n\n```\n# plymouth --quit\n```\n\n"
    },
    {
      "title": "背景画像を変更する",
      "level": 3,
      "content": "2 ステップベースのテーマ (スピナーや bgrt など) の背景画像を追加できます。希望の画像を /usr/share/plymouth/themes/spinner/background-tile.png に配置するだけです。テーマを変更したら、忘れずに initrd を再生成してください。\n\n"
    },
    {
      "title": "BGRT イメージがありません",
      "level": 3,
      "content": "BGRT テーマを使用しているが、UEFI がベンダーロゴを提供していない場合は、フォールバック画像を /usr/share/plymouth/themes/spinner/bgrt-fallback.png に配置して表示できます。その代わり。\n\nあるいは、ファームウェアのバックグラウンドを維持するには、次のように設定します。:\n\n```\n/etc/plymouth/plymouthd.conf\n```\n\n```\nUseFirmwareBackground=true\n```\n\n"
    },
    {
      "title": "完全なアニメーションを表示するために起動を遅くする",
      "level": 3,
      "content": "起動時間が非常に速いシステムでは、アニメーションの全体を表示したい場合、ExecStartPre=/usr/bin/sleep 5 を含む ドロップインスニペット で plymouth-quit.service に遅延を追加する必要があるかもしれません。this reddit post を参照してください。\n\n"
    },
    {
      "title": "カーネルパラメータで無効にする",
      "level": 3,
      "content": "起動中に問題が発生した場合は、次の カーネルパラメータ を使用して Plymouth を一時的に無効にすることができます。\n\n```\nplymouth.enable=0 disablehooks=plymouth\n```\n\n"
    },
    {
      "title": "デバッグ",
      "level": 3,
      "content": "デバッグ出力を /var/log/plymouth-debug.log に書き込むには、次のカーネルパラメータを追加します。\n\n```\nplymouth.debug\n```\n\n"
    },
    {
      "title": "パスワードプロンプトが更新されない",
      "level": 3,
      "content": "Mkinitcpio で udev フックの代わりに systemd を使用すると、Plymouth スクリプト経由で処理するテーマでパスワードプロンプトが更新されないことがあります。\n\n開発バージョン plymouth-gitAUR に切り替えるか、mkinitcpio#通常のフック の代替品を使用してみてください。\n\n"
    },
    {
      "title": "ディスプレイの中央に配置されていない",
      "level": 3,
      "content": "特定のテーマでは、起動時に複数のモニターが有効になっていると、ディスプレイの中央に配置されないことがあります。\n\nカーネルモード設定#モードを強制する を使用して、特定のモニターを無効にすることができます。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- Original Spec\n- Plymouth のフォーラムスレッド\n\n"
    }
  ]
}