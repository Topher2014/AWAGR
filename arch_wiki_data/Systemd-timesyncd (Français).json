{
  "title": "Systemd-timesyncd (Français)",
  "url": "https://wiki.archlinux.org/title/Systemd-timesyncd_(Fran%C3%A7ais)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- systemd-networkd (Français)\n- systemd (Français)\n- System time (Français)\n\nSelon la liste de diffusion systemd :\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "Démarrez et activez systemd-timesyncd.service, qui est disponible via systemd.\n\nAu démarrage, systemd-timesyncd lira le fichier de configuration de /etc/systemd/timesyncd.conf, qui ressemble à ceci :\n\n```\n/etc/systemd/timesyncd.conf\n```\n\n```\n[Time]\n#NTP=\n#FallbackNTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\n#...\n```\n\nPour ajouter des serveurs de temps ou modifier ceux qui sont fournis, décommentez la ligne correspondante et indiquez leur nom d'hôte ou leur adresse IP en les séparant par un espace. Par exemple, vous pouvez utiliser tous les serveurs fournis par le projet de pool NTP ou utiliser les serveurs par défaut d'Arch. (également fournis par le projet de pool NTP) :\n\n```\n/etc/systemd/timesyncd.conf\n```\n\n```\n[Time]\nNTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\nFallbackNTP=0.pool.ntp.org 1.pool.ntp.org 0.fr.pool.ntp.org\n```\n\nPour vérifier votre configuration:\n\n```\n$ timedatectl show-timesync --all\n```\n\n```\nLinkNTPServers=\nSystemNTPServers=\nFallbackNTPServers=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org\nServerName=0.arch.pool.ntp.org\nServerAddress=103.47.76.177\nRootDistanceMaxUSec=5s\nPollIntervalMinUSec=32s\nPollIntervalMaxUSec=34min 8s\nPollIntervalUSec=1min 4s\nNTPMessage={ Leap=0, Version=4, Mode=4, Stratum=2, Precision=-21, RootDelay=177.398ms, RootDispersion=142.196ms, Reference=C342F10A, OriginateTimestamp=Mon 2018-07-16 13:53:43 +08, ReceiveTimestamp=Mon 2018-07-16 13:53:43 +08, TransmitTimestamp=Mon 2018-07-16 13:53:43 +08, DestinationTimestamp=Mon 2018-07-16 13:53:43 +08, Ignored=no PacketCount=1, Jitter=0 }\nFrequency=22520548\n```\n\nOutre la configuration du daemon, les serveurs NTP peuvent également être fournis via une configuration [[Systemd-networkd (Français)#Section [NetDev]|systemd-networkd]] avec une option NTP= ou, de manière dynamique, via un serveur DHCP.\n\nLe serveur NTP à utiliser est déterminé d'après les règles suivantes :\n\n- Tout serveur NTP par interface obtenu à partir de la configuration de systemd-networkd.service(8) ou via DHCP est prioritaire.\n- Les serveurs NTP définis dans /etc/systemd/timesyncd.conf seront ajoutés à la liste par interface lors de l'exécution et le daemon contactera les serveurs à son tour jusqu'à ce qu'il en trouve un qui réponde.\n- Si aucune information sur le serveur NTP n'est obtenue après ces étapes, les noms d'hôtes ou adresses IP du serveur NTP définis dans FallbackNTP= seront utilisés.\n\n"
    },
    {
      "title": "Utilisation",
      "level": 2,
      "content": "Pour l' activer ou le démarrer lancez :\n\n```\n# timedatectl set-ntp true\n```\n\nLe processus de synchronisation peut être sensiblement lent. Ce comportement est normal et vous devriez patienter un moment avant de considérer qu'il y a un problème. Pour vérifier l'état du service, utilisez :\n\n```\n$ timedatectl status\n```\n\n```\nLocal time: Thu 2015-07-09 18:21:33 CEST\n           Universal time: Thu 2015-07-09 16:21:33 UTC\n                 RTC time: Thu 2015-07-09 16:21:33\n                Time zone: Europe/Amsterdam (CEST, +0200)\nSystem clock synchronized: yes\n              NTP service: active\n          RTC in local TZ: no\n```\n\nPour obtenir de plus amples informations sur le service, utilisez :\n\n```\n$ timedatectl timesync-status\n```\n\n```\nServer: 103.47.76.177 (0.arch.pool.ntp.org)\nPoll interval: 2min 8s (min: 32s; max 34min 8s)\n         Leap: normal\n      Version: 4\n      Stratum: 2\n    Reference: C342F10A\n    Precision: 1us (-21)\nRoot distance: 231.856ms (max: 5s)\n       Offset: -19.428ms\n        Delay: 36.717ms\n       Jitter: 7.343ms\n Packet count: 2\n    Frequency: +267.747ppm\n```\n\n"
    },
    {
      "title": "Voir aussi",
      "level": 2,
      "content": "- Forum : systemd-timesyncd ne synchronise pas l'heure\n- Forum : Utilisation de systemd-timesync au lieu de NTP\n- Le code source de timesyncd sur GitHub\n- systemd-timesyncd(8)\n- timesyncd.conf(5)\n\n"
    }
  ]
}