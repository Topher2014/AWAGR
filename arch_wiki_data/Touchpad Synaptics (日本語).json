{
  "title": "Touchpad Synaptics (日本語)",
  "url": "https://wiki.archlinux.org/title/Touchpad_Synaptics_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- Xorg\n\nこの記事では多くのノートパソコンに載っている Synaptics (そして ALPS) タッチパッドの Synaptics インプットドライバーをインストール・設定する方法を説明しています。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 設定 2.1 よく使われるオプション 2.2 Xfce4/Cinnamon 2.3 MATE 2.4 実行中に設定 2.4.1 コンソールツール 2.4.2 グラフィカルツール\n- 3 高度な設定 3.1 xinput を使ってタッチパッドの機能を調べる 3.2 Synclient 3.3 evtest 3.4 xev 3.5 回転スクロール 3.6 ナチュラルスクロール 3.7 ソフトウェアトグル 3.8 タイピング中はタッチパッドを無効にする 3.8.1 自動的な手のひら検出を使う 3.8.2 .xinitrc を使う 3.8.3 ログインマネージャを使う 3.9 外付けのマウスが検出された時はタッチパッドを無効にする 3.9.1 ベーシックなデスクトップ 3.9.2 GDM 3.9.3 GNOME 3.9.4 KDE 3.9.5 X セッションが複数ある環境\n- 4 トラブルシューティング 4.1 ハイバネート・サスペンドから復帰した後にタッチパッドが動作しない 4.2 中 (3番目の) マウスボタンのエミュレート 4.3 xorg.conf.d/70-synaptics.conf が MATE で適用されない 4.4 ALPS タッチパッド 4.5 タッチパッドが動作しない、Xorg.0.log は \"Query no Synaptics: 6003C8\" と表示している 4.6 タッチパッドが \"PS/2 Generic Mouse\" や \"Logitech PS/2 mouse\" として検出される 4.6.1 ALPS タッチパッド 4.6.2 Elantech タッチパッド 4.6.3 タッチスクリーンとタッチパッドを搭載したノートパソコン 4.7 Synaptics の特定の機能が使えない (マルチタッチ、スクロールなど) 4.7.1 Elantech 製のタッチパッドでマルチタッチが使えない 4.8 カーソルが飛び回る 4.9 タッチパッドデバイスが /dev/input/* に配置されない 4.10 Firefox と特別なタッチパッドイベント 4.10.1 Firefox 16.0 以前 4.10.2 Firefox 17.0 以降 4.11 Opera: 横スクロールの問題 4.12 LG ノートパソコンで Synaptics によるスクロールと複数のアクション 4.13 その他の外付けマウスの問題 4.14 タッチパッドの同期問題 4.15 ボタンのタップと実際のクリックの遅延 4.16 Xorg.log.0 が SynPS/2 Synaptics touchpad can not grab event device, errno=16 と表示する 4.17 Windows から再起動した後に Synaptics がマルチタッチの検出をしなくなる 4.18 ボタンのないタッチパッド (別名クリックパッド) 4.19 Arch からシャットダウンするとタッチパッドが認識されなくなる 4.20 トラックポイントとクリックパッド 4.21 クリックパッド/Forcepad: ダブルクリック、クリックアンドドラッグ 4.22 ASUS のタッチパッドが PS/2 FocalTech emulated mouse としてしか認識されない\n- 5 参照\n\n- 2.1 よく使われるオプション\n- 2.2 Xfce4/Cinnamon\n- 2.3 MATE\n- 2.4 実行中に設定 2.4.1 コンソールツール 2.4.2 グラフィカルツール\n\n- 2.4.1 コンソールツール\n- 2.4.2 グラフィカルツール\n\n- 3.1 xinput を使ってタッチパッドの機能を調べる\n- 3.2 Synclient\n- 3.3 evtest\n- 3.4 xev\n- 3.5 回転スクロール\n- 3.6 ナチュラルスクロール\n- 3.7 ソフトウェアトグル\n- 3.8 タイピング中はタッチパッドを無効にする 3.8.1 自動的な手のひら検出を使う 3.8.2 .xinitrc を使う 3.8.3 ログインマネージャを使う\n- 3.9 外付けのマウスが検出された時はタッチパッドを無効にする 3.9.1 ベーシックなデスクトップ 3.9.2 GDM 3.9.3 GNOME 3.9.4 KDE 3.9.5 X セッションが複数ある環境\n\n- 3.8.1 自動的な手のひら検出を使う\n- 3.8.2 .xinitrc を使う\n- 3.8.3 ログインマネージャを使う\n\n- 3.9.1 ベーシックなデスクトップ\n- 3.9.2 GDM\n- 3.9.3 GNOME\n- 3.9.4 KDE\n- 3.9.5 X セッションが複数ある環境\n\n- 4.1 ハイバネート・サスペンドから復帰した後にタッチパッドが動作しない\n- 4.2 中 (3番目の) マウスボタンのエミュレート\n- 4.3 xorg.conf.d/70-synaptics.conf が MATE で適用されない\n- 4.4 ALPS タッチパッド\n- 4.5 タッチパッドが動作しない、Xorg.0.log は \"Query no Synaptics: 6003C8\" と表示している\n- 4.6 タッチパッドが \"PS/2 Generic Mouse\" や \"Logitech PS/2 mouse\" として検出される 4.6.1 ALPS タッチパッド 4.6.2 Elantech タッチパッド 4.6.3 タッチスクリーンとタッチパッドを搭載したノートパソコン\n- 4.7 Synaptics の特定の機能が使えない (マルチタッチ、スクロールなど) 4.7.1 Elantech 製のタッチパッドでマルチタッチが使えない\n- 4.8 カーソルが飛び回る\n- 4.9 タッチパッドデバイスが /dev/input/* に配置されない\n- 4.10 Firefox と特別なタッチパッドイベント 4.10.1 Firefox 16.0 以前 4.10.2 Firefox 17.0 以降\n- 4.11 Opera: 横スクロールの問題\n- 4.12 LG ノートパソコンで Synaptics によるスクロールと複数のアクション\n- 4.13 その他の外付けマウスの問題\n- 4.14 タッチパッドの同期問題\n- 4.15 ボタンのタップと実際のクリックの遅延\n- 4.16 Xorg.log.0 が SynPS/2 Synaptics touchpad can not grab event device, errno=16 と表示する\n- 4.17 Windows から再起動した後に Synaptics がマルチタッチの検出をしなくなる\n- 4.18 ボタンのないタッチパッド (別名クリックパッド)\n- 4.19 Arch からシャットダウンするとタッチパッドが認識されなくなる\n- 4.20 トラックポイントとクリックパッド\n- 4.21 クリックパッド/Forcepad: ダブルクリック、クリックアンドドラッグ\n- 4.22 ASUS のタッチパッドが PS/2 FocalTech emulated mouse としてしか認識されない\n\n- 4.6.1 ALPS タッチパッド\n- 4.6.2 Elantech タッチパッド\n- 4.6.3 タッチスクリーンとタッチパッドを搭載したノートパソコン\n\n- 4.7.1 Elantech 製のタッチパッドでマルチタッチが使えない\n\n- 4.10.1 Firefox 16.0 以前\n- 4.10.2 Firefox 17.0 以降\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "Synaptics のドライバーは公式リポジトリにある xf86-input-synaptics パッケージでインストールできます。\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "タッチパッドの設定をする主な方法は Xorg サーバーの設定ファイルを使うことです。xf86-input-synaptics をインストールした後、デフォルトの設定ファイルが /usr/share/X11/xorg.conf.d/70-synaptics.conf に作られます。ユーザーはこのファイルを /etc/X11/xorg.conf.d/ にコピーしてから編集することで様々なドライバーオプションを使うことができます。利用できるオプションの完全なリストは synaptics(4) のマニュアルページを参照してください:\n\n```\n$ man synaptics\n```\n\n"
    },
    {
      "title": "よく使われるオプション",
      "level": 3,
      "content": "以下は多くのユーザーが設定するオプションの一覧です。オプションは全てメインの設定ファイルである /etc/X11/xorg.conf.d/70-synaptics.conf に追加することができます。以下のサンプル設定では vertical, horizontal, circular スクロールを有効にしています:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    Identifier \"touchpad\"\n    Driver \"synaptics\"\n    MatchIsTouchpad \"on\"\n        Option \"TapButton1\" \"1\"\n        Option \"TapButton2\" \"3\"\n        Option \"TapButton3\" \"2\"\n        Option \"VertEdgeScroll\" \"on\"\n        Option \"VertTwoFingerScroll\" \"on\"\n        Option \"HorizEdgeScroll\" \"on\"\n        Option \"HorizTwoFingerScroll\" \"on\"\n        Option \"CircularScrolling\" \"on\"\n        Option \"CircScrollTrigger\" \"2\"\n        Option \"EmulateTwoFingerMinZ\" \"40\"\n        Option \"EmulateTwoFingerMinW\" \"8\"\n        Option \"CoastingSpeed\" \"0\"\n        Option \"FingerLow\" \"30\"\n        Option \"FingerHigh\" \"50\"\n        Option \"MaxTapTime\" \"125\"\n        ...\nEndSection\n```\n\n通常、設定はマシンによって異なります。synclient を使ってオプションを調べるのが推奨されています。\n\n- タッチパッドに手が触れて TapButton2 オプションが実行されてしまう (おそらくクリップポードの貼り付けがされます) ことが頻繁にある場合、二本指のタップが使えなくなっても気にしないのならば、TapButton2 を 0 に設定してください。#タイピング中はタッチパッドを無効にするも参照。\n- 最近のバージョンでは \"Coasting\" (惰性) 機能がデフォルトで有効になっており、タッチパッドから手を離してもタップやクリックをしないとスクロールが止まらないという望ましくない挙動を示すことがあります。このため、少しだけスクロールしたいときは、（端を使ったりマルチタッチのオプションで）スクロールをしてからすぐにタッチパッドをタップしなくてはなりません。そうしないと永遠にスクロールし続けてしまいます。この機能を無効にしたい場合は、CoastingSpeed を 0 に設定してください。\n- タッチパッドが敏感すぎる場合、FingerLow と FingerHigh の値を変更してください。FingerLow は FingerHigh よりも低い値に設定する必要があるので注意してください。\n\n"
    },
    {
      "title": "Xfce4/Cinnamon",
      "level": 3,
      "content": "Xfce 4 でタッチパッドの設定を変更するには:\n\n1. システム設定を開いて下さい。\n1. マウスとタッチパッドをクリックしてください。\n1. タッチパッドタブの設定を変更してください。\n\nCinnamon でタッチパッドの設定を変更するには:\n\n1. Cinnamon システム設定を開いて下さい。\n1. マウスとタッチパッドをクリックしてください。\n1. タッチパッドタブの設定を変更してください。\n\n"
    },
    {
      "title": "MATE",
      "level": 3,
      "content": "MATE でもタッチパッドを設定することができます:\n\n1. dconf-editor を実行してください。\n1. org.mate.desktop.peripherals.touchpad フォルダ内のキーを編集してください。\n\n既存の設定を MATE のセッティングデーモンが上書きしないようにするには、以下を実行してください:\n\n1. dconf-editor を実行してください。\n1. org.mate.SettingsDaemon.plugins.mouse を編集してください。\n1. active のチェックを外して下さい。\n\n"
    },
    {
      "title": "実行中に設定",
      "level": 3,
      "content": "伝統的な設定方法の他に、Synaptics はオンザフライの設定もサポートしています。つまりユーザーがソフトウェアアプリケーションを使って特定のオプションを設定することができ、Xorg を再起動する必要なく即座にオプションが適用されます。これは設定ファイルに設定を記述する前に設定オプションをテストするのに便利です。\n\n"
    },
    {
      "title": "コンソールツール",
      "level": 4,
      "content": "- Synclient (推奨) — ライブ環境で Synaptics ドライバーの設定をするためのコマンドラインツール、synaptics ドライバーのメンテナによって開発されており synaptics ドライバーと一緒に提供されています\n\n- xinput — デバイスを設定するための小さな多目的の CLI ツール\n\n"
    },
    {
      "title": "グラフィカルツール",
      "level": 4,
      "content": "- GPointing Device Settings — synaptics のタッチパッドなど、システムに接続された複数のポインティングデバイスをその場でグラフィカルに設定することができます。このアプリケーションは synaptics ドライバーのグラフィカルなタッチパッド設定の推奨ツールとして GSynaptics を置き換えます。\n\n- kcm_touchpad — KDE Plasma 5 の新しい設定ツール。システム設定の入力デバイスにモジュールを提供します。古い synaptiks や kcm-touchpad モジュールを置き換えます。\n\n"
    },
    {
      "title": "xinput を使ってタッチパッドの機能を調べる",
      "level": 3,
      "content": "モデルによって、synaptic のタッチパッドには機能があったりなかったりします。xinput を使うことであなたのハードウェアでサポートされている機能を調べることが可能です。\n\n- 左・中・右のハードウェアボタン\n- 二本指の検知\n- 三本指の検知\n- 解像度の設定\n\nまず、タッチパッドの名前を調べて下さい:\n\n```\n$ xinput list\n```\n\nそれから xinput を使ってタッチパッドの機能を調べることができます:\n\n```\n$ xinput list-props \"SynPS/2 Synaptics TouchPad\" | grep Capabilities\n```\n\n```\nSynaptics Capabilities (309):  1, 0, 1, 0, 0, 1, 1\n```\n\n左から右へ、数字が示している意味は:\n\n- 1: デバイスには左の物理ボタンが存在します\n- 0: デバイスには中の物理ボタンが存在しません\n- 1: デバイスには右の物理ボタンが存在します\n- 0: デバイスは二本指の検知をサポートしていません\n- 0: デバイスは三本指の検知をサポートしていません\n- 1: デバイスは縦の解像度を設定することができます\n- 1: デバイスは横の解像度を設定することができます\n\nデバイスの全てのプロパティを表示するには xinput list-props \"SynPS/2 Synaptics TouchPad\" を使って下さい。\n\n"
    },
    {
      "title": "Synclient",
      "level": 3,
      "content": "Synclient を使うことで $ man synaptics で説明されている全てのオプションを設定することができます。現在のユーザー設定の完全なリストを表示するには:\n\n```\n$ synclient -l\n```\n\n表示された設定オプションは全て synclient を使って操作できます。例えば:\n\n- 手のひら検出を有効にする: $ synclient PalmDetect=1\n- ボタンのイベントを設定する (例: 二本指のタップを右ボタンのイベントに): $ synclient TapButton2=3\n- タッチパッドを無効にする: $ synclient TouchpadOff=1\n\nsynclient でオプションをテストした後は、/etc/X11/xorg.conf.d/70-synaptics.conf に追加することで設定を永続的にすることができます。\n\n"
    },
    {
      "title": "evtest",
      "level": 3,
      "content": "evtest ツールはタッチパッド上の圧力と位置をリアルタイムで表示でき、デフォルトの Synaptics 設定のさらなる改良が可能です。evtest のモニタリングを起動するには:\n\n```\n$ evtest /dev/input/eventX\n```\n\nX はタッチパッドの ID を指定してください。ID は cat /proc/bus/input/devices の出力を見ることでわかります。\n\nevtest はデバイスへの排他的なアクセスを必要とするため X サーバーインスタンスと一緒に実行することはできません。X サーバーを終了するか別の仮想端末から evtest を起動してください (例えば Ctrl+Alt+2 を押す)。\n\n"
    },
    {
      "title": "xev",
      "level": 3,
      "content": "xorg-xev ツールはリアルタイムでタップやクリック、圧力や位置などのパラメータを表示することができます。Synaptics のデフォルト設定を細かく調整したいときに便利です。xev は X から起動することができ、何も指定する必要がありません。\"-event\" パラメータを使うことで、表示するイベントのタイプを制限することが可能です。\n\n"
    },
    {
      "title": "回転スクロール",
      "level": 3,
      "content": "回転スクロールは iPod のような操作を Synaptics が提供する機能です。縦や横にスクロールする代わりに（もしくはそれらに加えて）、円を描いてスクロールすることができます。ユーザーによってはこの方が素早く正確に操作できるかもしれません。 回転スクロールを有効にするには、以下のオプションを /etc/X11/xorg.conf.d/70-synaptics.conf のタッチパッドのデバイスセクションに追加してください:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    ...\n    Option      \"CircularScrolling\"          \"on\"\n    Option      \"CircScrollTrigger\"          \"0\"\n    ...\nEndSection\n```\n\nCircScrollTrigger オプションは以下のどれかの値にしてください。どの端から回転スクロールを始めるかを指定します:\n\n```\n0    全ての端\n1    上端\n2    右上角\n3    右端\n4    右下角\n5    下端\n6    左下角\n7    左端\n8    左上角\n```\n\n縦・横スクロールとあわせて回転スクロールを使いたい場合は 0 以外の値を指定したほうが便利です。その場合、スクロールのタイプはどの端からスクロールを始めたかによって決まります。\n\n素早くスクロールするには、タッチパッドの中心で小さな円を描いて下さい。ゆっくり正確にスクロールしたいときは、大きな円を描いて下さい。\n\n"
    },
    {
      "title": "ナチュラルスクロール",
      "level": 3,
      "content": "synaptics ではナチュラルスクロールを有効にすることができます。以下のように VertScrollDelta と HorizScrollDelta に負の値を使うだけです:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    ...\n    Option      \"VertScrollDelta\"          \"-111\"\n    Option      \"HorizScrollDelta\"         \"-111\"\n    ...\nEndSection\n```\n\n"
    },
    {
      "title": "ソフトウェアトグル",
      "level": 3,
      "content": "タッチパッドが敏感すぎてタイピングに支障をきたす場合など、タッチパッドのオンオフを切り替えるソフトウェアトグルがあると便利だと思うかもしれません。外付けのマウスが検出された時はタッチパッドを無効にするも参照してください、これは好みの問題です。ソフトウェアトグルの利点はユーザーがコントロールできるということで、他の方法はデーモンがトラックパッドをオフにするかどうか決定します。\n\nキーバインディングソフトウェアをまだインストールしていない場合は xbindkeys をインストールすると良いでしょう。\n\n以下のスクリプトを /usr/bin/trackpad-toggle.sh などとして保存してください:\n\n```\n/usr/bin/trackpad-toggle.sh\n```\n\n```\n#!/bin/bash\n\nsynclient TouchpadOff=$(synclient -l | grep -c 'TouchpadOff.*=.*0')\n```\n\n次にスクリプトを使うキーバインディングを追加してください。以下のように xbindkeys を使って呼び出すのがベストでしょう (ファイル ~/.xbindkeysrc):\n\n```\n~/.xbindkeysrc\n```\n\n```\n\"/usr/bin/trackpad-toggle.sh\"\n    m:0x5 + c:65\n    Control+Shift + space\n```\n\n最後の2行のどちらかをコピーしてください、2行ともコピーしてはいけません。これで xbindkeys を再起動したら Ctrl+Shift+Space でトラックパッドを切り替えることができるはずです。\n\nもちろん Xfce4 や GNOME によって提供されている他のキーバインディングソフトウェアを使ってもかまいません。\n\n"
    },
    {
      "title": "自動的な手のひら検出を使う",
      "level": 4,
      "content": "まず最初に手のひらの検出があなたのトラックパッドで動作するか、そして設定が正しいかをテストしてください:\n\n```\n$ synclient PalmDetect=1\n```\n\nそれからタイピングして見て下さい。検出を調整するには以下のコマンドを使います:\n\n```\n$ synclient PalmMinWidth=\n```\n\nこれは手が触れたと認識する領域の広さで:\n\n```\n$ synclient PalmMinZ=\n```\n\nこれは検出が行われる最小圧力です。\n\n適切な設定を見つけられたら、以下のように /etc/X11/xorg.conf.d/70-synaptics.conf に設定を保存してください:\n\n```\n#synclient PalmDetect=1\nOption \"PalmDetect\" \"1\"\n#synclient PalmMinWidth=10\nOption \"PalmMinWidth\" \"10\"\n#synclient PalmMinZ=200\nOption \"PalmMinZ\" \"200\"\n```\n\n"
    },
    {
      "title": ".xinitrc を使う",
      "level": 4,
      "content": "タイピングを始めた時に自動的にタッチパッドを無効にするには次の行を ~/.xinitrc に追加してください (exec で始まる行の前に置いて下さい、そうしないとコマンドが実行されません):\n\n```\n$ syndaemon -i 0.5 -t -k &\n```\n\n詳細は man ページから見ることができます:\n\n```\n$ man syndaemon\n```\n\nログインマネージャを使っている場合は、DE が許可するコマンドを指定する必要があります。\n\n"
    },
    {
      "title": "ログインマネージャを使う",
      "level": 4,
      "content": "ログイン後に syndaemon をバックグラウンドプロセスとして起動するには -d オプションが必要です。\n\nGNOME: (GDM)\n\nsyndaemon を起動するには Gnome の自動起動するアプリケーションの設定プログラムを使う必要があります。Gnome にログインして System > Preferences > Startup Applications を見て下さい。自動起動するプログラムのタブで追加ボタンをクリックしてください。自動起動するプログラムに好きな名前を付けて、コメントも自由に入力してください (もしくは空のままにしてください)。コマンドのところに以下を加えて下さい:\n\n```\nsyndaemon -t -k -i 2 -d &\n```\n\n完了したら、自動起動するプログラムの追加ダイアログの追加ボタンをクリックしてください。それから作成した自動起動プログラムの横のチェックボックスにチェックが入っていることを確認してください。自動起動するアプリケーションの設定ウィンドウを閉じれば設定完了です。Gnome 3 では gnome-session-properties を実行してスタートアップアプリケーションを開いて下さい。\n\nKDE: (KDM)\n\nシステム設定 > 起動と終了 > 自動起動 を開き、プログラムの追加をクリックして以下を入力してください:\n\n```\n$ syndaemon -t -k -i 2 -d &\n```\n\nそしてターミナルで実行にチェックを入れて下さい。\n\n"
    },
    {
      "title": "外付けのマウスが検出された時はタッチパッドを無効にする",
      "level": 3,
      "content": "udev の助けを借りて、外付けのマウスが接続されたときにタッチパッドを自動的に無効にすることが可能です。以下のルールのどれか一つを使って下さい。\n\n"
    },
    {
      "title": "ベーシックなデスクトップ",
      "level": 4,
      "content": "デスクトップ環境のセッションがない環境のベーシックなルールは以下の通りです:\n\n```\n/etc/udev/rules.d/01-touchpad.rules\n```\n\n```\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]*\", ACTION==\"add\", ENV{DISPLAY}=\":0\", ENV{XAUTHORITY}=\"/home/username/.Xauthority\", RUN+=\"/usr/bin/synclient TouchpadOff=1\"\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]*\", ACTION==\"remove\", ENV{DISPLAY}=\":0\", ENV{XAUTHORITY}=\"/home/username/.Xauthority\", RUN+=\"/usr/bin/synclient TouchpadOff=0\"\n```\n\nマウスが接続されていないときでもタッチパッドが起動時に無効になってしまう場合、上記の KERNEL と ACTION パラメータの間に以下を追加してみてください:\n\n```\nATTRS{name}!=\"*TouchPad\", ATTRS{name}!=\"*Stick\",\n```\n\n"
    },
    {
      "title": "GDM",
      "level": 4,
      "content": "GDM は Xauthority ファイルをランダムな名前のディレクトリ内の /var/run/gdm に保存します。Xauthority ファイルの実際のパスは ps ax を使うことで確認できます。また、何らかの理由で一人のユーザーに複数の authority ファイルが作られることがあります。その場合 udev ルールを以下のようにしてください:\n\n```\n/etc/udev/rules.d/01-touchpad.rules\n```\n\n```\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]\", ACTION==\"add\", PROGRAM=\"/usr/bin/find /var/run/gdm -name username -print0 -quit\", ENV{DISPLAY}=\":0\", ENV{XAUTHORITY}=\"$result/database\", RUN+=\"/usr/bin/synclient TouchpadOff=1\"\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]\", ACTION==\"remove\", PROGRAM=\"/usr/bin/find /var/run/gdm -name username -print0 -quit\", ENV{DISPLAY}=\":0\", ENV{XAUTHORITY}=\"$result/database\", RUN+=\"/usr/bin/synclient TouchpadOff=0\"\n```\n\nただし、これらの udev ルールは syndaemon と衝突します。タッチパッドを無効にするのと同時に syndaemon を終了させるには、以下のようなルールを使います:\n\n```\n/etc/udev/rules.d/01-touchpad.rules\n```\n\n```\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]\", ACTION==\"add\", PROGRAM=\"/usr/bin/find /var/run/gdm -name username -print -quit\", ENV{DISPLAY}=\":0\", ENV{XAUTHORITY}=\"$result/database\", RUN+=\"/bin/sh -c '/usr/bin/synclient TouchpadOff=1 ; sleep 1; /bin/killall syndaemon; '\"\n```\n\nマウスを取り除いたら syndaemon が自動的に起動する場合、上の削除ルールと合わせることが可能です。手動で syndaemon を起動する必要がある場合、使用している syndaemon オプションに合わせてコマンドを変更してください。\n\nAUR パッケージ touchpad-state-gitAUR は上記の udev ルールを処理するために作られました。udev ルールとスクリプトが入っています:\n\n```\n# touchpad-state [--off] [--on]\n```\n\n"
    },
    {
      "title": "GNOME",
      "level": 4,
      "content": "GNOME を使っている場合、GNOME シェルの拡張 Touchpad Indicator をインストールして、設定から \"Switch Method\" を \"Synclient\" に変更して \"Automatically switch Touchpad On/Off\" を有効にしてください。\n\n"
    },
    {
      "title": "KDE",
      "level": 4,
      "content": "Plasma を使っている場合、plasma-desktop パッケージでタッチパッドを管理できます。\n\n"
    },
    {
      "title": "X セッションが複数ある環境",
      "level": 4,
      "content": "複数のユーザーが存在する環境では、現在のユーザーの X 環境を検出するために少し異なるアプローチを取る必要があります。以下のスクリプトを使って下さい:\n\n```\n/usr/bin/mouse-pnp-event-handler.sh\n```\n\n```\n#!/bin/sh\n## $1 = \"add\" / \"remove\"\n## $2 = %k from udev \n\n## Set TRACKPAD_NAME according to your configuration. \n## Check your trackpad name with: \n## find /sys/class/input/ -name mouse* -exec udevadm info -a {} \\; | grep 'ATTRS{name}'\nTRACKPAD_NAME=\"SynPS/2 Synaptics TouchPad\"\n\n\nUSERLIST=$(w -h | cut -d' ' -f1 | sort | uniq)\nMOUSELIST=$(find /sys/class/input/ -name mouse*)\n\nfor CUR_USER in ${USERLIST}; do\n         CUR_USER_XAUTH=\"$(sudo -Hiu ${CUR_USER} env | grep -e \"^HOME=\" | cut -d'=' -f2)/.Xauthority\"\n\n  \n        ## Can't find a way to get another users DISPLAY variable from an isolated root environment. Have to set it manually.\n        #CUR_USER_DISPL=\"$(sudo -Hiu ${CUR_USER} env | grep -e \"^DISPLAY=\" | cut -d'=' -f2)\"\n        CUR_USER_DISPL=\":0\"\n\n        export XAUTHORITY=\"${CUR_USER_XAUTH}\"\n        export DISPLAY=\"${CUR_USER_DISPL}\"\n\n        if [ -f \"${CUR_USER_XAUTH}\" ]; then\n                case \"$1\" in\n                        \"add\")\n                                /usr/bin/synclient TouchpadOff=1\n                                /usr/bin/logger \"USB mouse plugged. Disabling touchpad for $CUR_USER. ($XAUTHORITY - $DISPLAY)\"\n                        ;;\n                        \"remove\")\n                                ## Only execute synclient if there are no external USB mice connected to the system.\n                                EXT_MOUSE_FOUND=\"0\"\n                                for CUR_MOUSE in ${MOUSELIST}; do\n                                        if [ \"$(cat ${CUR_MOUSE}/device/name)\" != \"${TRACKPAD_NAME}\" ]; then\n                                                EXT_MOUSE_FOUND=\"1\"\n                                        fi\n                                done\n                                if [ \"${EXT_MOUSE_FOUND}\" == \"0\" ]; then\n                                        /usr/bin/synclient TouchpadOff=0\n                                        /usr/bin/logger \"No additional external mice found. Enabling touchpad for $CUR_USER.\"\n                                else\n                                        logger \"Additional external mice found. Won't enable touchpad yet for $CUR_USER.\"\n                                fi\n                        ;;\n                esac\n        fi\ndone\n```\n\nTRACKPAD_NAME 変数はあなたのシステムの設定にあわせて変更してください。find /sys/class/input/ -name mouse* -exec udevadm info -a {} \\; | grep 'ATTRS{name}' を実行することでマウスの名前の一覧を取得できます。トラックパッドに使うマウスを選択してください。\n\nそして、以下の udev ルールを作ることで、USB マウスが抜き差しされてときに udev がスクリプトを実行するようになります:\n\n```\n/etc/udev/rules.d/01-touchpad.rules\n```\n\n```\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]*\", ACTION==\"add\", RUN+=\"/usr/bin/mouse-pnp-event-handler.sh add %k\"\nSUBSYSTEM==\"input\", KERNEL==\"mouse[0-9]*\", ACTION==\"remove\", RUN+=\"/usr/bin/mouse-pnp-event-handler.sh remove %k\"\n```\n\n"
    },
    {
      "title": "ハイバネート・サスペンドから復帰した後にタッチパッドが動作しない",
      "level": 3,
      "content": "スリープやハイバネーションからコンピューターを復帰したときに時々タッチパッドが動作しないことがあります。この場合、再起動しなくても以下によって戻ることがほとんどです:\n\n- スリープモードやレジュームモードにもう一度入ってみる。\n- 適切なカーネルモジュールを一度取り除いてからもう一度ロードする。\n\n```\nmodprobe -r psmouse #psmouse happens to be the kernel module for my touchpad (Alps DualPoint)\nmodprobe psmouse\n```\n\nそれから X が起動している tty に戻してみて下さい。正しいモジュールを選べていれば、タッチパッドはまた動作するようになっているはずです。\n\n"
    },
    {
      "title": "中 (3番目の) マウスボタンのエミュレート",
      "level": 3,
      "content": "以下を /etc/X11/xorg.conf.d/10-evdev.conf (もしくはその他の Xorg の設定ファイル) に追加することで中クリックのエミュレーションができます:\n\n```\n/etc/X11/xorg.conf.d/10-evdev.conf\n```\n\n```\nSection \"InputClass\"\n        Identifier \"Emulate Middle Butten\"\n        MatchIsPointer \"on\"\n        Option \"Emulate3Buttons\" \"on\"\nEndSection\n```\n\nThx to augegr\n\n"
    },
    {
      "title": "xorg.conf.d/70-synaptics.conf が MATE で適用されない",
      "level": 3,
      "content": "MATE では、デフォルトでタッチパッドの様々な設定が上書きされます。上書きされる設定には MATE のシステムコントロールパネルからはグラフィカルに設定することができない機能も含まれます。このため /etc/X11/xorg.conf.d/70-synaptics.conf が実質的に適用されない可能性があります。この挙動を止めさせるには MATE セクションを参照してください。\n\n"
    },
    {
      "title": "ALPS タッチパッド",
      "level": 3,
      "content": "ALPS のタッチパッドで、上の設定が上手く行かないときは、代わりに以下の設定を試して下さい:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"ServerLayout\"\n    ...\n    InputDevice    \"USB Mouse\" \"CorePointer\"\n    InputDevice    \"Touchpad\"  \"SendCoreEvents\"\n  EndSection\n\n  Section \"InputDevice\"\n        Identifier  \"Touchpad\"\n    Driver  \"synaptics\"\n    Option  \"Device\"   \"/dev/input/mouse0\"\n    Option  \"Protocol\"   \"auto-dev\"\n    Option  \"LeftEdge\"   \"130\"\n    Option  \"RightEdge\"   \"840\"\n    Option  \"TopEdge\"   \"130\"\n    Option  \"BottomEdge\"   \"640\"\n    Option  \"FingerLow\"   \"7\"\n    Option  \"FingerHigh\"   \"8\"\n    Option  \"MaxTapTime\"   \"180\"\n    Option  \"MaxTapMove\"   \"110\"\n    Option  \"EmulateMidButtonTime\"   \"75\"\n    Option  \"VertScrollDelta\"   \"20\"\n    Option  \"HorizScrollDelta\"   \"20\"\n    Option  \"MinSpeed\"   \"0.25\"\n    Option  \"MaxSpeed\"   \"0.50\"\n    Option  \"AccelFactor\"   \"0.010\"\n    Option  \"EdgeMotionMinSpeed\"   \"200\"\n    Option  \"EdgeMotionMaxSpeed\"   \"200\"\n    Option  \"UpDownScrolling\"   \"1\"\n    Option  \"CircularScrolling\"   \"1\"\n    Option  \"CircScrollDelta\"   \"0.1\"\n    Option  \"CircScrollTrigger\"   \"2\"\n    Option  \"Emulate3Buttons\"   \"on\"\n  EndSection\n```\n\n"
    },
    {
      "title": "タッチパッドが動作しない、Xorg.0.log は \"Query no Synaptics: 6003C8\" と表示している",
      "level": 3,
      "content": "synaptics が設定されている方法のために、synaptics モジュールの2つのインスタンスがロードされています。この情報を確認するには xorg のログファイル (/var/log/Xorg.0.log) を開いて下さい。以下のような箇所があるはずです:\n\n```\n/var/log/Xorg.0.log\n```\n\n```\n[ 9304.803] (**) SynPS/2 Synaptics TouchPad: Applying InputClass \"evdev touchpad catchall\"\n [ 9304.803] (**) SynPS/2 Synaptics TouchPad: Applying InputClass \"touchpad catchall\"\n```\n\nモジュールの名前が異なる2つのインスタンスがロードされているのが確認できます。こうなっていると、タッチパッドが機能しなくなります。\n\n/etc/X11/xorg.conf.d/70-synaptics.conf ファイルに MatchDevicePath \"/dev/input/event*\" を追加することで二重のロードを防ぐことができます:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    Identifier \"touchpad catchall\"\n    Driver \"synaptics\"\n    MatchIsTouchpad \"on\"\n    MatchDevicePath \"/dev/input/event*\"\n        Option \"TapButton1\" \"1\"\n        Option \"TapButton2\" \"2\"\n        Option \"TapButton3\" \"3\"\nEndSection\n```\n\nX を再起動して xorg のログをもう一度見て下さい。エラーがなくなっていればタッチパッドが動作するようになっているはずです。\n\n関連するバグレポート: FS#20830\n\n関連するフォーラムトピック:\n\n- https://bbs.archlinux.org/viewtopic.php?id=104769\n- https://bbs.archlinux.org/viewtopic.php?pid=825690\n\n"
    },
    {
      "title": "ALPS タッチパッド",
      "level": 4,
      "content": "これはカーネルのバグによるものでカーネルバージョン 3.3 で修正されました。タッチパッドが間違って検出されていると Synaptic インプットドライバーで設定することができません。これを修正するには、AUR のパッケージ psmouse-alps-driverAUR[リンク切れ: アーカイブ: aur-mirror] をインストールしてください。\n\n影響があるノートパソコンは以下の機種です:\n\n- Acer Aspire 7750G\n- Dell Latitude E6230, E6520, E6430, E6530 (ALPS DualPoint TouchPad), Inspiron N5110 (ALPS GlidePoint), Inspiron 14R 5420/Turbo SE7420/SE7520 (ALPS GlidePoint)\n- Samsung NC110/NF210/QX310/QX410/QX510/SF310/SF410/SF510/RF410/RF510/RF710/RV515\n\n詳しい情報はこのスレッドを見て下さい。\n\n新しいアルプス電気のタッチパッドでも間違えられることがあります。以下を実行して使っているのが新しいアルプスのタッチパッドかどうか確認してください:\n\n```\n$ dmesg | grep \"Unknown ALPS\"  \n[  569.861053] psmouse serio1: alps: Unknown ALPS touchpad: E7=73 03 0a, EC=88 b6 06\n```\n\nUnknown ALPS touchpad という行が表示されたら、https://github.com/he1per/psmouse-dkms-alpsv7 にあるパッチがあてられた psmouse モジュールをインストールする必要があります。\n\n"
    },
    {
      "title": "Elantech タッチパッド",
      "level": 4,
      "content": "ASUS x53s など Elantech のタッチパッドが載っているノートパソコンで誤検出が起こることがあります。そういう場合は AUR から psmouse-elantechAUR[リンク切れ: アーカイブ: aur-mirror] パッケージをインストールしてください。\n\n"
    },
    {
      "title": "タッチスクリーンとタッチパッドを搭載したノートパソコン",
      "level": 4,
      "content": "Dell XPS 12 や Dell XPS 13 のような、タッチスクリーンとタッチパッドの両方が付いているノートパソコンでも問題が発生します。i2c_hid ドライバーをブラックリスト化することで修正できますが、タッチスクリーンが使えなくなるという副作用があります。\n\nこの問題は 既知の問題 です。このスレッド も参照してください。\n\nカーネル 3.15 以降では、モジュールをブラックリストに入れるとタッチパッドが完全に動かなくなってしまいます。ブラックリストを削除することで部分的に動作させることができます、FS#40921 を見て下さい。\n\n"
    },
    {
      "title": "Synaptics の特定の機能が使えない (マルチタッチ、スクロールなど)",
      "level": 3,
      "content": "場合によって Synaptics のタッチパッドが部分的にしか動作しないことがあります。二本指のスクロールや二本指の中クリックといった機能が有効になっているはずのに使えないなどです。これはおそらく上述のタッチパッドが動作しない問題と関連しています。修正方法は同じで、モジュールの二重ロードを止めて下さい。\n\nモジュールを二重にロードしないようにしても問題が解決されない場合は、MatchIsTouchpad トグル (現在 synaptics の設定ではデフォルトで含まれています) をコメントアウトして見て下さい。\n\n二本指・三本指のクリックが右クリックとして解釈され、設定しているのに中クリックが使えない場合、犯人はこのバグでしょう: https://bugs.freedesktop.org/show_bug.cgi?id=55365\n\n"
    },
    {
      "title": "Elantech 製のタッチパッドでマルチタッチが使えない",
      "level": 4,
      "content": "[2] を見てください。\n\n"
    },
    {
      "title": "カーソルが飛び回る",
      "level": 3,
      "content": "ユーザーによってはカーソルが画面をジャンプするという不可解な現象が生じているようです。この問題について今のところパッチは存在しませんが、開発者は問題に気づいており対策を行っています。\n\nまた i8042 コントローラ (このデバイスは多くのノートパソコンのキーボードとタッチパッドを管理しています) に関連した IRQ losses が発生している可能性もあります。以下2つの対応策が考えられます:\n\n- psmouse モジュールを rmmod して insmod\n- カーネルパラメータに i8042.nomux=1 を追加してマシンを再起動する\n\n"
    },
    {
      "title": "タッチパッドデバイスが /dev/input/* に配置されない",
      "level": 3,
      "content": "そのような時は、次のコマンドを使って入力デバイスの情報を表示できます:\n\n```\n$ cat /proc/bus/input/devices\n```\n\n\"SynPS/2 Synaptics TouchPad\" という名前を持っている入力デバイスを探して下さい。出力の \"Handlers\" セクションが指定する必要があるデバイスを示しています。\n\n出力の例:\n\n```\n$ cat /proc/bus/input/devices\n```\n\n```\nI: Bus=0011 Vendor=0002 Product=0007 Version=0000\n N: Name=\"SynPS/2 Synaptics TouchPad\"\n P: Phys=isa0060/serio4/input0\n S: Sysfs=/class/input/input1\n H: Handlers=mouse0 event1\n B: EV=b\n B: KEY=6420 0 7000f 0\n```\n\n上記の場合、Handlers は mouse0 と event1 なので、/dev/input/mouse0 を使います。\n\n"
    },
    {
      "title": "Firefox と特別なタッチパッドイベント",
      "level": 3,
      "content": "アクションの設定を編集することで Firefox によってタッチパッドのタップや特定の部位のスクロールで発生する特別なイベントを有効・無効にすることができます。Firefox のアドレスバーに about:config と入力してください。オプションを変更するには、変更したい行をダブルクリックします。\n\n"
    },
    {
      "title": "Firefox 16.0 以前",
      "level": 4,
      "content": "Firefox がブラウザの履歴をスクロールする（戻る/進む）のを止めてページをスクロールさせるには、以下の設定を編集してください:\n\n```\nmousewheel.horizscroll.withnokey.action = 1\nmousewheel.horizscroll.withnokey.sysnumlines = true\n```\n\nタッチパッドの右上端（もしくは中マウスボタン）をタップすることでクリップボードに保存した URL に Firefox がリダイレクトするのを止めさせるには、以下のオプションを \"false\" に設定してください:\n\n```\nmiddlemouse.contentLoadURL = false\n```\n\n"
    },
    {
      "title": "Firefox 17.0 以降",
      "level": 4,
      "content": "現在、横スクロールはデフォルトで履歴ではなくページをスクロールするようになっています。Mac のように二本指のスワイプで戻る/進むをするには、次のように編集してください:\n\n```\nmousewheel.default.action.override_x = 2\n```\n\n縦スクロールで戻る/進むが偶発的に発生してしまうことがあります。Firefox の横スワイプの感度を変更するには、次を編集してください:\n\n```\nmousewheel.default.delta_multiplier_x\n```\n\n最適な値はあなたの使っているタッチパッドによって変わります、初めは 10 から試していって見て下さい。負の値にするとスワイプの方向が逆になります。\n\n"
    },
    {
      "title": "Opera: 横スクロールの問題",
      "level": 3,
      "content": "同上です。修正するには、Tools > Preferences > Advanced > Shortcuts を開いて下さい。\"Opera Standard\" マウス設定を選んで \"Edit\" をクリックしてください。\"Application\" セクションで:\n\n- キー \"Button 6\" をコマンド \"Scroll left\" に割り当ててください\n- キー \"Button 7\" をコマンド \"Scroll right\" に割り当ててください\n\n"
    },
    {
      "title": "LG ノートパソコンで Synaptics によるスクロールと複数のアクション",
      "level": 3,
      "content": "LG のノートパソコンのいくつかのモデルで問題が発生するようです。発生する問題は: Mouse Button 1 を押した時に、Synaptics がそれを ScrollUP と標準のボタン1のクリックに解釈する。ボタン2でも同様。\n\nスクロールの問題は xorg.conf に以下を入力すれば解決できます:\n\n```\n/etc/X11/xorg.conf.d/xorg.conf\n```\n\n```\nOption \"UpDownScrolling\" \"0\"\n```\n\nどうやら、Synaptics の最新バージョンでこれをコンパイルすると失敗するようです。解決方法は Synaptics の GIT リポジトリを使って下さい [4]。\n\nAUR にはビルドを自動化するパッケージビルドファイルもあります: xf86-input-synaptics-lgAUR[リンク切れ: アーカイブ: aur-mirror]。\n\nパッケージをビルドするには、tarball をダウンロードした後、展開して、以下を実行してください:\n\n```\n$ cd synaptics-git\n$ makepkg\n```\n\n"
    },
    {
      "title": "その他の外付けマウスの問題",
      "level": 3,
      "content": "まず、外付けマウスについて記述しているセクションに次の行 (もしくはこれに似ている行) が含まれていることを確認してください:\n\n```\n/etc/X11/xorg.conf.d/xorg.conf\n```\n\n```\nOption     \"Device\" \"/dev/input/mice\"\n```\n\n\"Device\" 行が異なっている場合、上記のように変更して X を再起動して見て下さい。それで問題が解決しない時は、\"Server Layout\" セクションの touchpad を CorePointer にして:\n\n```\n/etc/X11/xorg.conf.d/xorg.conf\n```\n\n```\nInputDevice    \"Touchpad\" \"CorePointer\"\n```\n\n外部デバイスを \"SendCoreEvents\" にしてください:\n\n```\n/etc/X11/xorg.conf.d/xorg.conf\n```\n\n```\nInputDevice    \"USB Mouse\" \"SendCoreEvents\"\n```\n\n最後に以下を外部デバイスのセクションに追加してください:\n\n```\n/etc/X11/xorg.conf.d/xorg.conf\n```\n\n```\nOption      \"SendCoreEvents\"    \"true\"\n```\n\nそれでも問題が解決しないようならば、バグトラッカーにバグが報告されていないか確認したり、フォーラムを見て他に良い解決方法がないか見て下さい。\n\n"
    },
    {
      "title": "タッチパッドの同期問題",
      "level": 3,
      "content": "たまに数秒間カーソルがフリーズしたり何もしていないのに動き出したりすることがあります。この挙動は /var/log/messages.log に記録が残ります:\n\n```\n/var/log/messages.log\n```\n\n```\npsmouse.c: TouchPad at isa0060/serio1/input0 lost synchronization, throwing 3 bytes away\n```\n\nこの問題に万能の解決方法はありませんが、複数の解決策が考えられます。\n\n- CPU 周波数スケーリングを使っている場合、できれば \"ondemand\" governor を使うのを止めて \"performance\" governor を使って下さい。CPU の周波数が変化したときにタッチパッドが同期を喪失することがあります。\n- ACPI バッテリモニターを使うのを避けて下さい。\n- psmouse を \"proto=imps\" オプションを使ってロードしてください。これをするには、/etc/modprobe.d/modprobe.conf に次の行を追加します:\n\n```\n/etc/modprobe.d/modprobe.conf\n```\n\n```\noptions psmouse proto=imps\n```\n\n- 他のデスクトップ環境を試して下さい。ユーザーによっては XFCE や GNOME を使っている時だけこの問題が発生すると報告しています。\n\n"
    },
    {
      "title": "ボタンのタップと実際のクリックの遅延",
      "level": 3,
      "content": "タッチパッドのタップと実際のクリックの間に遅延が発生する場合 FastTaps を有効にしてください:\n\n有効にするには /etc/X11/xorg.conf.d/70-synaptics.conf に Option \"FastTaps\" \"1\" を追加する必要があります:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    Identifier \"Synaptics Touchpad\"\n    Driver \"synaptics\"\n    ...\n    Option \"FastTaps\" \"1\"\n    ...\nEndSection\n```\n\n"
    },
    {
      "title": "Xorg.log.0 が SynPS/2 Synaptics touchpad can not grab event device, errno=16 と表示する",
      "level": 3,
      "content": "Xorg 7.4 を使っていて、/var/log/Xorg.0.log にこのような警告が表示されるときは、ドライバーが Linux 2.6 のイベントプロトコルを使うときにイベントデバイスを独占的に占有しているのが原因です。それが失敗すると、X はエラーメッセージを返します。\n\nイベントデバイスが占有されると他のユーザースペース・カーネルスペースのプログラムはタッチパッドのイベントを見ることができません。X の設定ファイルに入力デバイスとして /dev/input/mice が含まれている場合はこれは好ましいことですが、ユーザースペースからデバイスを監視したい時は困ることになります。\n\n占有をコントロールするには、/etc/X11/xorg.conf.d/70-synaptics.conf のタッチパッドセクションに \"GrabEventDevice\" オプションを追加・修正してください:\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\n...\nOption \"GrabEventDevice\" \"boolean\"\n...\n```\n\nX を再起動することで変更が適用されますが、sysclient で変更することも可能です。synclient プログラムでパラメータを変更した際は、Synaptics ドライバーを一度無効にして再度有効にするまで変更は適用されません。そのためにはテキストコンソールに切り替えてから X に再度戻して下さい。\n\n"
    },
    {
      "title": "Windows から再起動した後に Synaptics がマルチタッチの検出をしなくなる",
      "level": 3,
      "content": "多くのドライバーにはファームウェアが含まれており、コンピュータが起動した時にフラッシュメモリにロードされます。このファームウェアはシャットダウン時に必ずしも取り除かれるわけではなく、また Linux のドライバーと互換性があるとは限りません。フラッシュメモリを消去する唯一の方法は再起動を使うのではなく完全にシャットダウンすることです。一般的に、オペレーティングシステムを切り替えるときに再起動を使わないのはベストプラクティスだと考えられています。\n\n"
    },
    {
      "title": "ボタンのないタッチパッド (別名クリックパッド)",
      "level": 3,
      "content": "ラップトップによっては、マウスボタンが外部にあるのではなくトラッキングプレートの一部になっている特別なタッチパッドを搭載しています。例えば 2015 Dell XPS 13, HP シリーズ 4500 ProBooks, ThinkPad X220, X1 ThinkPad シリーズなどがこの種のタッチパッドを使っています。デフォルトではボタンの領域全体が左ボタンとして認識されるので、2番目のマウスボタンやクリック+ドラッグが使えなくなってしまいます。以前はこうしたデバイスのサポートはサードパーティのパッチで対応していましたが、バージョン 1.6.0 から synaptics ドライバーはネイティブのマルチタッチサポートを持っています (mtdev ライブラリを使用)。ドライバーがマルチタッチを登録しても、それぞれ指の動きは記録しないため (バージョン 1.7.1 現在) クリックパッドの物理ボタンを使ってドラッグアンドドロップや他のジェスチャーをすると操作が混乱することがあるので注意してください。xf86-input-mtrackAUR ドライバーを使うことでより良いマルチタッチサポートを得ることができます。\n\n他のボタンを有効にするには /etc/X11/xorg.conf.d/70-synaptics.conf のタッチパッドセクションを修正してください (もしくは、より高い数字を前に付けた synaptics のカスタム設定ファイルを使うのも良いでしょう):\n\n```\n/etc/X11/xorg.conf.d/70-synaptics.conf\n```\n\n```\nSection \"InputClass\"\n    Identifier \"touchpad\"\n    Driver \"synaptics\"\n    MatchIsTouchpad \"on\"\n        # Enable clickpad/multitouch support\n        Option \"ClickPad\" \"true\"\n        # Middle-button emulation is not supported\n        Option \"EmulateMidButtonTime\" \"0\"\n        # Define right soft button at the bottom\n        Option \"SoftButtonAreas\"  \"50% 0 82% 0 0 0 0 0\"\nEndSection\n```\n\nこの3つのオプションはキーであり、1つ目はマルチタッチサポートを有効にし、2つ目は中ボタンのエミュレーション (クリックパッドではサポートされていません) を無効にし、3つ目はボタンの領域を定義します。\n\nSoftButtonAreas オプションのフォーマットは (man 4 synaptics を参照):\n\n```\nRightButtonAreaLeft RightButtonAreaRight RightButtonAreaTop RightButtonAreaBottom  MiddleButtonAreaLeft MiddleButtonAreaRight MiddleButtonAreaTop MiddleButtonAreaBottom\n```\n\n上記の例はドキュメントや synaptics のパッケージで共通して使われているもので、タッチパッドの下端18%の右半分を右ボタンにします。中ボタンは定義されていません。中ボタンを定義したい場合はマニュアルに一つ重要な箇所があるので覚えておいて下さい。端を0に設定するとその方向に無限に延長されます。\n\n以下の例ではボタン領域の右端40%を右ボタンが占めています。そしてタッチパッドの真ん中の小さな領域20%を中ボタンに設定しています。\n\n```\n...\nOption     \"SoftButtonAreas\"  \"60% 0 82% 0 40% 59% 82% 0\"\n...\n```\n\nsynclient を使って新しいソフトボタンの領域を確認できます:\n\n```\n$ synclient -l | grep -i ButtonArea\n```\n\n```\nRightButtonAreaLeft     = 3914\n        RightButtonAreaRight    = 0\n        RightButtonAreaTop      = 3918\n        RightButtonAreaBottom   = 0\n        MiddleButtonAreaLeft    = 3100\n        MiddleButtonAreaRight   = 3873\n        MiddleButtonAreaTop     = 3918\n        MiddleButtonAreaBottom  = 0\n```\n\nボタンが動作しない場合は、ソフトボタンの領域が変わっていません。パッケージによる synaptics の設定ファイルがカスタム設定を上書きしていないか確認してください (AUR のパッケージには高い数字が付けられた設定を使っているものがあります)。\n\nこれらの設定を synclient を使ってオンザフライで変更することはできませんが、xinput は使えます:\n\n```\nxinput set-prop \"SynPS/2 Synaptics TouchPad\" \"Synaptics Soft Button Areas\" 4000 0 4063 0 3000 4000 4063 0\n```\n\nこのコマンドでパーセンテージは使えないため、/var/log/Xorg.0.log を見てタッチパッドの X・Y 軸の範囲を確かめて下さい。\n\n"
    },
    {
      "title": "Arch からシャットダウンするとタッチパッドが認識されなくなる",
      "level": 3,
      "content": "Arch Linux から通常のシャットダウンをした後に、特定のタッチパッド (特に elantech のタッチパッド) がデバイスとして認識されなくなることがあります。この問題を解決する方法は複数あります:\n\n- Windows パーティションやインストールディスクを起動して、シャットダウンする。\n- シャットダウンした後にコンピュータを起動する前に1分ほど待つ。\n- https://bugzilla.kernel.org/show_bug.cgi?id=81331#c186 に書かれているように、Elantech タッチパッドのフィックスを行うパッチがカーネルにマージされています。Gigabyte P34, P35v2, X3 がデフォルトでサポートされており、他の機種については (XMG などの Gigabyte ノートパソコンのリブランド製品) i8042.kbdreset=1 をカーネルパラメータで設定することができます。\n\n"
    },
    {
      "title": "トラックポイントとクリックパッド",
      "level": 3,
      "content": "新しい Thinkpad にはトラックポイントの物理ボタンが存在せず、代わりにクリックパッドの上部をボタンとして使います (Left, Middle, Right)。人間工学から考えるとどうなのかということは置いておいて、これは現在の Xorg で問題なく動作します。しかしながら、中ボタンによるマウスホイールのエミュレーションはまだサポートされていません。トラックポイントを使用するときは AUR から xf86-input-evdev-trackpointAUR をインストールしてパッチのあたった正しい設定がなされたバージョンを入れて下さい。\n\n"
    },
    {
      "title": "クリックパッド/Forcepad: ダブルクリック、クリックアンドドラッグ",
      "level": 3,
      "content": "HP Envy 15 x360 などの新しいノートパソコンでは物理ボタンを離したときに ButtonRelease イベントが送信されず、クリックパッドから指を離した時に送信されることがあります [5]。この問題は drivers/media/input/synaptics.c のカーネルバグが原因です [6]。一時的な対応策は [7] を見て下さい。\n\n"
    },
    {
      "title": "ASUS のタッチパッドが PS/2 FocalTech emulated mouse としてしか認識されない",
      "level": 3,
      "content": "1. 使用している Linux カーネルのヘッダーをインストール\n1. https://github.com/hanipouspilot/focaltech-dkms から focaltech-dkms をインストール\n1. コンピュータを再起動\n1. \"Mouse and Trackpad\" の設定で設定を編集\n\n上記の方法で解決しない場合、https://github.com/vlasenko/hid-asus-dkms の dkms を使ってみてください。詳しくは https://bugzilla.kernel.org/show_bug.cgi?id=120181 を参照。\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- Synaptics touchpad driver\n- Synaptics manual on x.org\n\n"
    }
  ]
}