{
  "title": "SDDM (日本語)",
  "url": "https://wiki.archlinux.org/title/SDDM_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "関連記事\n\n- ディスプレイマネージャ\n- KDE\n\nThe Simple Desktop Display Manager (SDDM) はディスプレイマネージャです。KDE Plasma と LXQt デスクトップ環境の推奨ディスプレイマネージャです。\n\nWikipedia:ja:Simple Desktop Display Manager より:\n\nKDE の開発チームは、SDDM プロジェクトを Plasma Desktop プロジェクトに組み込むという提案を受け入れました。SDDM は Plasma の正式な一部となり、SDDM のアップデートは Plasma Desktop のアップデートと共にリリースされる可能性があります。\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 設定 2.1 自動ログイン 2.2 パスワードレスログイン 2.3 ログイン時に KDE Wallet のロックを解除 2.4 テーマ設定 2.4.1 現在のテーマ 2.4.2 テーマの編集 2.4.3 テーマをカスタマイズ 2.4.4 テーマのテスト (プレビュー) 2.4.5 マウスカーソル 2.4.6 ユーザアイコン (アバター) 2.5 Numlock 2.6 ディスプレイの回転 2.7 DPI の設定 2.8 HiDPI の有効化 2.9 仮想キーボードを有効化する 2.10 指紋リーダーを使う 2.11 Rootless 2.12 Wayland 2.12.1 KDE Plasma / KWin 2.12.1.1 仮想キーボード 2.12.1.2 Plasma のディスプレイ設定に合わせる\n- 3 トラブルシューティング 3.1 greeter が表示されず、カーソルのみの黒画面 3.2 ログイン後にフリーズする 3.3 SDDM が tty7 ではなく tty1 で起動する 3.4 1つ以上のユーザが greeter に表示されない 3.5 ユーザのアバターが greeter に表示されない 3.6 SDDM が US キーボードのレイアウトしかロードしない 3.7 画面解像度が低すぎる 3.8 ホームディレクトリが autofs の場合にロード時間が長い 3.9 X authority (別名 MIT-MAGIC-COOKIE) ファイル 3.10 マルチモニタの環境で greeter が重複する 3.11 予期しないディスプレイにログイン画面が表示される 3.12 NVIDIA グラフィックカードでログアウト後に黒画面 3.13 パスワードの最初の試行に失敗すると、その後の試行で数回キーを押すと文字列が勝手に消されてしまう 3.14 ハイブリッドグラフィックスで Wayland を使用すると画面の同期がずれる\n\n- 2.1 自動ログイン\n- 2.2 パスワードレスログイン\n- 2.3 ログイン時に KDE Wallet のロックを解除\n- 2.4 テーマ設定 2.4.1 現在のテーマ 2.4.2 テーマの編集 2.4.3 テーマをカスタマイズ 2.4.4 テーマのテスト (プレビュー) 2.4.5 マウスカーソル 2.4.6 ユーザアイコン (アバター)\n- 2.5 Numlock\n- 2.6 ディスプレイの回転\n- 2.7 DPI の設定\n- 2.8 HiDPI の有効化\n- 2.9 仮想キーボードを有効化する\n- 2.10 指紋リーダーを使う\n- 2.11 Rootless\n- 2.12 Wayland 2.12.1 KDE Plasma / KWin 2.12.1.1 仮想キーボード 2.12.1.2 Plasma のディスプレイ設定に合わせる\n\n- 2.4.1 現在のテーマ\n- 2.4.2 テーマの編集\n- 2.4.3 テーマをカスタマイズ\n- 2.4.4 テーマのテスト (プレビュー)\n- 2.4.5 マウスカーソル\n- 2.4.6 ユーザアイコン (アバター)\n\n- 2.12.1 KDE Plasma / KWin 2.12.1.1 仮想キーボード 2.12.1.2 Plasma のディスプレイ設定に合わせる\n\n- 2.12.1.1 仮想キーボード\n- 2.12.1.2 Plasma のディスプレイ設定に合わせる\n\n- 3.1 greeter が表示されず、カーソルのみの黒画面\n- 3.2 ログイン後にフリーズする\n- 3.3 SDDM が tty7 ではなく tty1 で起動する\n- 3.4 1つ以上のユーザが greeter に表示されない\n- 3.5 ユーザのアバターが greeter に表示されない\n- 3.6 SDDM が US キーボードのレイアウトしかロードしない\n- 3.7 画面解像度が低すぎる\n- 3.8 ホームディレクトリが autofs の場合にロード時間が長い\n- 3.9 X authority (別名 MIT-MAGIC-COOKIE) ファイル\n- 3.10 マルチモニタの環境で greeter が重複する\n- 3.11 予期しないディスプレイにログイン画面が表示される\n- 3.12 NVIDIA グラフィックカードでログアウト後に黒画面\n- 3.13 パスワードの最初の試行に失敗すると、その後の試行で数回キーを押すと文字列が勝手に消されてしまう\n- 3.14 ハイブリッドグラフィックスで Wayland を使用すると画面の同期がずれる\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "sddm パッケージをインストールしてください。任意で KConfig Module のための sddm-kcm もインストールしてください。\n\nディスプレイマネージャ#ディスプレイマネージャをロードするに従って、ブート時に SDDM を起動させてください。\n\n"
    },
    {
      "title": "設定",
      "level": 2,
      "content": "SDDM のデフォルト設定ファイルは /usr/lib/sddm/sddm.conf.d/default.conf に存在します。設定を変更するときは /etc/sddm.conf.d/ に設定ファイルを作成してください。利用可能なオプションは sddm.conf(5) を見て下さい。\n\n(plasma グループに含まれている) sddm-kcm パッケージをインストールすることで Plasma のシステム設定から GUI で SDDM を設定できます。Qt ベースの設定エディタ sddm-conf-gitAUR も存在します。\n\nArch Linux は systemd を使用していて、さらに SDDM はデフォルトで systemd-logind をセッション管理に使用するので、特に設定せずに機能するはずです。\n\n"
    },
    {
      "title": "自動ログイン",
      "level": 3,
      "content": "SDDM は設定ファイルによって自動ログインをサポートしています、例:\n\n```\n/etc/sddm.conf.d/autologin.conf\n```\n\n```\n[Autologin]\nUser=john\nSession=plasma\n```\n\n上の設定だと、システムが起動した時に john ユーザーで KDE Plasma セッションが起動します。利用できるセッションのタイプについては、X 用は /usr/share/xsessions/ で、Wayland 用は /usr/share/wayland-sessions/ でわかります。\n\nKDE Plasma に自動ログインすると同時にセッションをロックするオプションは利用できません。[1]\n\n回避策として、Plasma のスクリーンセーバをアクティブ化するスクリプトを自動起動に追加することができます:\n\n```\n#!/bin/sh\n/usr/bin/dbus-send --session --type=method_call --dest=org.freedesktop.ScreenSaver /ScreenSaver org.freedesktop.ScreenSaver.Lock &\n```\n\n"
    },
    {
      "title": "パスワードレスログイン",
      "level": 3,
      "content": "パスワード無しで一部のアカウントにログインできるように SDDM を設定することができます。ログインするアカウントを選ぶ必要があるという点で自動ログインとは異なり、また、(SSH 経由でログインしてきたリモートユーザなどを除く) インタラクティブユーザのみにログインを許可するという点で、アカウントのパスワードを空白に設定するのとも異なります。\n\nSDDM は PAM 経由で動作するので、PAM で SDDM に関連する設定を行う必要があります:\n\n```\n/etc/pam.d/sddm\n```\n\n```\n#%PAM-1.0\nauth        sufficient  pam_succeed_if.so user ingroup nopasswdlogin\nauth        include     system-login\n...\n```\n\nパスワード無しで KDE Plasma のロック画面を解除できるようにするために、/etc/pam.d/kde の先頭にも先と同じ行を追加してください:\n\n```\n/etc/pam.d/kde\n```\n\n```\n#%PAM-1.0\nauth        sufficient  pam_succeed_if.so user ingroup nopasswdlogin\nauth        include     system-login\n...\n```\n\n次に、パスワードを入力せずにインタラクティブにログインできるようにするために、あなたのユーザーを nopasswdlogin グループに追加する必要があります:\n\n```\n# groupadd -r nopasswdlogin\n# gpasswd -a username nopasswdlogin\n```\n\n"
    },
    {
      "title": "ログイン時に KDE Wallet のロックを解除",
      "level": 3,
      "content": "KDE Wallet#ログイン時に KDE ウォレットを自動的にアンロック を見てください。\n\n"
    },
    {
      "title": "テーマ設定",
      "level": 3,
      "content": "[Theme] セクションでテーマの設定を変更できます。Plasma の KDE システム設定を使っている場合、テーマのプレビューを表示できます。\n\nデフォルトの Plasma テーマを使うには breeze に設定してください。\n\narchlinux-themes-sddmAUR など、AUR から入手できるテーマもあります。\n\n"
    },
    {
      "title": "現在のテーマ",
      "level": 4,
      "content": "現在のテーマは Current で設定します。例: Current=archlinux-simplyblack。\n\n"
    },
    {
      "title": "テーマの編集",
      "level": 4,
      "content": "SDDM のデフォルトのテーマディレクトリは /usr/share/sddm/themes/ です。作成したカスタムテーマはこのディレクトリのサブディレクトリに追加することができます。サブディレクトリの名前はテーマの名前と同じである必要があります。インストールされているファイルを参考に自分自身のテーマを作成してみてください。\n\n"
    },
    {
      "title": "テーマをカスタマイズ",
      "level": 4,
      "content": "設定ファイル theme.conf の設定をオーバーライドするには、カスタムの theme.conf.user ファイルを同じディレクトリに作成してください。例えば、テーマの背景を変更するには:\n\n```\n/usr/share/sddm/themes/name/theme.conf.user\n```\n\n```\n[General]\nbackground=/path/to/background.png\n```\n\n"
    },
    {
      "title": "テーマのテスト (プレビュー)",
      "level": 4,
      "content": "必要であれば SDDM のテーマをプレビューすることができます。これは、テーマを編集した際などにテーマがどのような見た目になるか分からない場合や、ログアウトせずにテーマを確認したい場合などに便利です。以下のようにコマンドを実行してください:\n\n```\n$ sddm-greeter-qt6 --test-mode --theme /usr/share/sddm/themes/breeze\n```\n\n接続されているモニタすべてに新しいウィンドウが開き、テーマのプレビューが表示されます。\n\n"
    },
    {
      "title": "マウスカーソル",
      "level": 4,
      "content": "マウスカーソルのテーマを設定したい場合は、CursorTheme を使用したいカーソルテーマに設定してください。\n\nPlasma で使用できるマウスカーソルのテーマの名前は、breeze_cursors、Breeze_Snow、そして breeze-dark です。\n\n"
    },
    {
      "title": "ユーザアイコン (アバター)",
      "level": 4,
      "content": "Table content:\nこの記事またはセクションは情報が古くなっています。 理由: 設定をせずとも SDDM は /var/lib/AccountsService/icons/ 内のアイコンを検出します。そして、Plasma はもはや $HOME/ 内にファイル (以下で述べているアイコンファイルや、そのファイルへのシンボリックリンク) を作成しません。 (Discuss)\n\nSDDM は、各ユーザの ~/.face.icon か、あるいは SDDM 設定ファイル内の FacesDir で指定された全ユーザに共通の場所から PNG イメージのユーザアイコン (別名: \"アバター\") を読み込みます。設定は /etc/sddm.conf に直接、あるいは /etc/sddm.conf.d/avatar.conf のように /etc/sddm.conf.d/ 下のファイルとして保存することができます (後者が推奨されます)。\n\nFacesDir のオプションを使用するには、設定ファイルの FacesDir キーで指定された場所に各ユーザに対して ユーザ名.face.icon という名前で PNG イメージファイルを配置してください。デフォルトの FacesDir は /usr/share/sddm/faces/ です。ニーズに応じてデフォルトの FacesDir を変更することができます。例えば以下のように:\n\n```\n/etc/sddm.conf.d/avatar.conf\n```\n\n```\n[Theme]\nFacesDir=/var/lib/AccountsService/icons/\n```\n\nもう一つの方法は、ホームディレクトリのルートに .face.icon という名前の PNG ファイルを置くことです。この場合、SDDM の設定ファイルを変更する必要はありません。ただし、sddm ユーザがユーザアイコンの PNG イメージファイルを読むことができるようにしておく必要があります。\n\n適切なパーミッションを設定するには、以下を実行してください:\n\n```\n$ setfacl -m u:sddm:x ~/\n$ setfacl -m u:sddm:r ~/.face.icon\n```\n\n以下を実行することで、パーミッションを確認することができます:\n\n```\n$ getfacl ~/\n$ getfacl ~/.face.icon\n```\n\nSDDM README: No User Icon を参照してください。\n\n"
    },
    {
      "title": "Numlock",
      "level": 3,
      "content": "Numlock を強制的に有効にしたい場合、[General] セクションに Numlock=on と設定してください。\n\nSDDM が Wayland で動作している場合、numlock の設定は現在反映されません。Numlock を有効化するには KWin の設定を変更する必要があるかもしれません。この issue を参照してください。\n\n"
    },
    {
      "title": "ディスプレイの回転",
      "level": 3,
      "content": "Xrandr#設定 を見てください。\n\n"
    },
    {
      "title": "DPI の設定",
      "level": 3,
      "content": "ディスプレイマネージャのレベルでディスプレイの PPI 設定を適切に設定できると便利です。[2] ServerArguments の末尾にパラメータ -dpi your_dpi を追加する必要があります。例:\n\n```\n/etc/sddm.conf.d/dpi.conf\n```\n\n```\n[X11]\nServerArguments=-nolisten tcp -dpi 94\n```\n\n"
    },
    {
      "title": "HiDPI の有効化",
      "level": 3,
      "content": "以下のファイルを作成してください:\n\n```\n/etc/sddm.conf.d/hidpi.conf\n```\n\n```\n[Wayland]\nEnableHiDPI=true\n\n[X11]\nEnableHiDPI=true\n```\n\nWayland を使用する場合、HiDPI スケーリングは、使用する greeter に依存します。[3] 例えば、Breeze などの Qt ベースの greeter を使用する場合、以下の設定を追加してください:\n\n```\n[General]\nGreeterEnvironment=QT_SCREEN_SCALE_FACTORS=2,QT_FONT_DPI=192\n```\n\n"
    },
    {
      "title": "仮想キーボードを有効化する",
      "level": 3,
      "content": "qt6-virtualkeyboard (あるいは他の仮想キーボード) をインストールしてください。\n\n以下のファイルを作成してください:\n\n```\n/etc/sddm.conf.d/virtualkbd.conf\n```\n\n```\n[General]\nInputMethod=name_of_virtual_keyboard\n```\n\nこれで、SDDM は仮想キーボードを開くボタンをログインスクリーンの左下の角に表示するようになります。\n\n"
    },
    {
      "title": "指紋リーダーを使う",
      "level": 3,
      "content": "しかし、これにはログインの設定は含まれておらず、既存のセッションのロック解除のみです。\n\nKWallet はログイン時にパスワードベースの認証を必要とするので (以下参照)、SDDM での指紋認証のセットアップはしないほうが良いかもしれません。\n\nSDDM では fprint を利用した指紋認証が可能です。fprint をインストールして指紋署名を登録したのち、/etc/pam.d/sddm の先頭に以下の行を加えてください:\n\n```\n/etc/pam.d/sddm\n```\n\n```\nauth \t\t\tsufficient  \tpam_fprintd.so\n```\n\nパスワードか指紋認証のいずれか片方を使うには、代わりに以下の行を /etc/pam.d/sddm の先頭に加えてください:\n\n```\n/etc/pam.d/sddm\n```\n\n```\nauth \t\t\t[success=1 new_authtok_reqd=1 default=ignore]  \tpam_unix.so try_first_pass likeauth nullok\nauth \t\t\tsufficient  \tpam_fprintd.so\n```\n\nKWallet は指紋リーダーを使ってロックを解除できないことに注意してください (KDE Wallet#ログイン時に KDE ウォレットを自動的にアンロック をご覧ください)。しかし、1行目の記述によりパスワードログインが自動的に KWallet を解除することが保証されます。\n\nパスワード欄を空にして Enter キーを押すと、指紋認証が開始されます。\n\n"
    },
    {
      "title": "Rootless",
      "level": 3,
      "content": "従来、X11 ディスプレイサーバーはデフォルトで root 権限で実行されてきました。この rootful モードでは、X11 はシステムリソースに無制限にアクセスできます (ハードウェアへの直接的なアクセスと管理が一般的であった環境では rootful モードが動作に不可欠だったのです)。しかし、最近のコンピューティング環境ではセキュリティが重要視されるようになり、rootless モードへ移行する作業が行われてきました。また、これは Wayland がデフォルトで rootless モードで動作する理由でもあります。\n\n非特権 X11 (及び Wayland) セッションは sddm 0.20.0 からサポートされています。[4]\n\nRootless モードを有効化するには、/etc/sddm.conf.d/ に新しいファイルを適当な名前で作成し、以下を追加してください (必要に応じて x11-user は wayland に置き換えてください):\n\n```\n/etc/sddm.conf.d/rootless-x11.conf\n```\n\n```\n[General]\nDisplayServer=x11-user\n```\n\nRootless モードで動作しているかどうかを確認するには、コンポジタのプロセス (kwin_wayland) など) がどのユーザーによって所有されているかを調べてください。\n\n- SDDM では、Wayland のサポートは実験的とされています。\n- デフォルトでは、DisplayServer=wayland は、たとえインストールされていなくとも、weston コンポジタの使用を試みます。他の Wayland コンポジタを使用するには、#KDE Plasma / KWin で説明されているように CompositorCommand オプションにプログラムと関連引数を指定してください。詳細は sddm.conf(5) を参照してください。\n\n"
    },
    {
      "title": "KDE Plasma / KWin",
      "level": 4,
      "content": "以下の記述を設定ファイルに追加すれば、KWin が Wayland コンポジタとして使用されるようになり、wlr_layer_shell Wayland プロトコル拡張も有効化されます。Qt6 を使用する SDDM テーマを使うには layer-shell-qt が、Qt5 を使用するものには layer-shell-qt5 が必要です。\n\n```\n/etc/sddm.conf.d/10-wayland.conf\n```\n\n```\n[General]\nDisplayServer=wayland\nGreeterEnvironment=QT_WAYLAND_SHELL_INTEGRATION=layer-shell\n\n[Wayland]\nCompositorCommand=kwin_wayland --drm --no-lockscreen --no-global-shortcuts --locale1\n```\n\n仮想キーボードのサポートを有効化するには (例えば、qt6-virtualkeyboard や maliit-keyboard を使う場合)、以下のように --inputmethod フラグに適切なキーボードを指定して、kwin_wayland コマンドに追加してください。InputMethod オプションは General セクションで指定しないでください。仮想キーボードが表示されなくなってしまいます。\n\n```\n/etc/sddm.conf.d/10-wayland.conf\n```\n\n```\n[Wayland]\nCompositorCommand=kwin_wayland --drm --no-lockscreen --no-global-shortcuts --locale1 --inputmethod maliit-keyboard\n```\n\nPlasma Wayland セッションのディスプレイの設定 (例:モニターレイアウト、解像度など) に対する如何なる変更も SDDM に対しては適用されません。設定を適用させるには、Plasma の KDE システム設定 を開き、起動と終了 > ログイン画面 (SDDM) へ行き、\"Plasma 設定を適用...\" をクリックしてください。この操作を行うためには許可が必要です。\n\n同じことは、以下のようにして手動で行うこともできます:\n\nSDDM でディスプレイを適切に管理するには (スケーリング、モニタの解像度、リフレッシュレートなど)、ホームディレクトリから適切な設定ファイルを SDDM の設定ディレクトリにコピー (かつ必要であれば変更) することができます:\n\n```\n# cp ~/.config/kwinoutputconfig.json /var/lib/sddm/.config/\n# chown sddm:sddm /var/lib/sddm/.config/kwinoutputconfig.json\n```\n\nSDDM で適切な入力処理 (タップでクリックやタッチスクリーンのマッピングなど) を可能にするには、適切な設定ファイルをホームディレクトリから SDDM の設定ディレクトリにコピーしてください:\n\n```\n# cp ~/.config/kcminputrc /var/lib/sddm/.config/\n# chown sddm:sddm /var/lib/sddm/.config/kcminputrc\n```\n\n"
    },
    {
      "title": "greeter が表示されず、カーソルのみの黒画面",
      "level": 3,
      "content": "利用可能なディスクの空き領域が存在しない場合、greeter はクラッシュします。df -h でディスクの空き領域を確認してください。\n\nディスクの空き領域の問題でないとしたら、バグのせいかもしれません。他の TTY に切り替えて、loginctl unlock-session session_id を実行するか、SDDM を再起動してみてください。\n\n"
    },
    {
      "title": "ログイン後にフリーズする",
      "level": 3,
      "content": "~/.Xauthority を削除し、再起動せずに再ログインしてみてください。ログインせずに再起動すると、このファイルが再び作成されてしまい、問題が解決されません。\n\n"
    },
    {
      "title": "SDDM が tty7 ではなく tty1 で起動する",
      "level": 3,
      "content": "SDDM は systemd の慣習に従って tty1 に最初のグラフィカルセッションを起動します。\n\n設定ファイルには MinimumVT オプションがまだ存在しますが、SDDM 0.20 からこのオプションは無視されるようになったことに注意してください: sddm.conf(5) § MinimumVT=。\n\n"
    },
    {
      "title": "1つ以上のユーザが greeter に表示されない",
      "level": 3,
      "content": "デフォルトでは、SDDM は 1000 から 60513 の範囲内の UID を持つユーザのみを表示するように設定されています。表示したいユーザの UID がこの範囲の外である場合、この範囲を変更しなければなりません。\n\n例えば、501 の UID を持つユーザの場合、MinimumUid を設定し、システムユーザによって使用されるシェルを持つユーザは隠してください:\n\n```\n/etc/sddm.conf.d/uid.conf\n```\n\n```\n[Users]\nHideShells=/usr/bin/nologin,/sbin/nologin,/bin/false,/usr/bin/git-shell\nMinimumUid=500\n```\n\n高い UID を持つユーザの場合は MaximumUid を適切な値に変更してください。\n\n"
    },
    {
      "title": "ユーザのアバターが greeter に表示されない",
      "level": 3,
      "content": "ユーザの数が DisableAvatarsThreshold を超過した場合や、アバターが EnableAvatars パラメータによって有効化されていない場合、ユーザのアバターは表示されません。これを回避するには、以下の記述を sddm の設定に追加してください:\n\n```\n/etc/sddm.conf.d/avatars.conf\n```\n\n```\n[Theme]\nEnableAvatars=true # enable avatars\nDisableAvatarsThreshold=7 # set the threshold for the number of users. Avatars are not shown if this threshold is exceeded.\n```\n\n"
    },
    {
      "title": "SDDM が US キーボードのレイアウトしかロードしない",
      "level": 3,
      "content": "SDDM は /etc/X11/xorg.conf.d/00-keyboard.conf で指定されたキーボードレイアウトをロードします。localectl set-x11-keymap コマンドを使うことでこの設定ファイルを生成することが可能です。詳しくは Xorg でのキーボード設定 を見て下さい。\n\nSDDM でのみ効果を持ち、後続のセッションには適用されないキーボードレイアウトを設定するもう一つの方法は、SDDM のスタートアップスクリプト (/usr/share/sddm/scripts/Xsetup にあり) で setxkbmap コマンドを実行することです。例は Xorg でのキーボード設定#setxkbmap を使う を参照してください。\n\nまた、SDDM は間違ってレイアウトを US キーボードとして表示することもありますが、パスワードを打ち始めると即座に正しいレイアウトに変わります [6]。これは SDDM のバグではなく、X のバグのようです。[7]\n\n"
    },
    {
      "title": "画面解像度が低すぎる",
      "level": 3,
      "content": "EDID の情報が壊れているディスプレイで HiDPI を使用した場合に発生する可能性のある問題です [8]。HiDPI を有効化している場合、HiDPI を無効にしてみてください。\n\n無効にしても問題が解決しない場合、Xorg の設定ファイルでスクリーンのサイズを設定してみることができます:\n\n```\n/etc/X11/xorg.conf.d/90-monitor.conf\n```\n\n```\nSection \"Monitor\"\n        Identifier      \"<default monitor>\"\n        DisplaySize     345 194 # in millimeters\nEndSection\n```\n\n"
    },
    {
      "title": "ホームディレクトリが autofs の場合にロード時間が長い",
      "level": 3,
      "content": "SDDM はデフォルトでユーザーのアバターとして ~/.face.icon ファイルを使います。ホームディレクトリが autofs の場合 (例えば dm-crypt を使っている場合)、autofs がディレクトリをマウントできないと報告するまで SDDM は60秒間待機します。\n\n以下の設定ファイルを作成することでアバターを無効化することができます:\n\n```\n/etc/sddm.conf.d/avatar.conf\n```\n\n```\n[Theme]\nEnableAvatars=false\n```\n\n"
    },
    {
      "title": "X authority (別名 MIT-MAGIC-COOKIE) ファイル",
      "level": 3,
      "content": "[9] で詳細が言及されているように、SDDM は 認証ファイルのためにランダムな新しい UUID を使います。そのため、そのファイルを見つけるためにスクリプトを使うことができます:\n\n```\n# find /var/run/sddm/ -type f\n```\n\nログイン中のユーザーがいない時に x11vnc を開始する必要がある場合、このスクリプトが必要である場合があります。例えば:\n\n```\n# x11vnc -display :0 -auth \"$( find /var/run/sddm/ -type f )\"\n```\n\n"
    },
    {
      "title": "マルチモニタの環境で greeter が重複する",
      "level": 3,
      "content": "複数スクリーンの環境で X モニターのレイアウトが正しく設定されずに greeter が重複することがあります。この問題を解決するためには、以下のスクリプトを追加して、sddm greeter のレイアウトを左から右に並べてください:\n\n```\n/usr/share/sddm/scripts/Xsetup\n```\n\n```\nfor next in $(xrandr --listmonitors | grep -E \" *[0-9]+:.*\" | cut -d\" \" -f6); do\n  [ -z \"$current\" ] && current=$next && continue\n  xrandr --output $current --auto --output $next --auto --right-of $current\n  current=$next\ndone\n```\n\n"
    },
    {
      "title": "予期しないディスプレイにログイン画面が表示される",
      "level": 3,
      "content": "複数のディスプレイが接続されている場合に、SDDM のログインセッションがプライマリディスプレイではないディスプレイに表示されることがあります。サブディスプレイが回転されているがプライマリディスプレイはそうなっていない場合、この問題は腹立たしいでしょう。この問題に対するシンプルな修正法は、xrandr を使って、ログインセッションが Xsetup スクリプトを使用する前にディスプレイを設定することです。例えば、以下では、xrandr は、2つのディスプレイが接続されており、2つ目のディスプレイ (DP-2) はプライマリディスプレイ (DP-4) の左にあると報告しています。\n\n```\n# xrandr | grep -w connected\nDP-2 connected 2160x3840+0+0 left (normal left inverted right x axis y axis) 597mm x 336mm\nDP-4 connected primary 3840x2160+2160+0 (normal left inverted right x axis y axis) 697mm x 392mm\n```\n\n以下の Xsetup は、上記のセットアップをログインウィンドウのために再作成します:\n\n```\n/usr/share/sddm/scripts/Xsetup\n```\n\n```\n#!/bin/sh\n# Xsetup - run as root before the login dialog appears\n\nxrandr --output DP-4 --auto --primary\nxrandr --output DP-2 --left-of DP-4 --rotate left --noprimary\n```\n\n"
    },
    {
      "title": "NVIDIA グラフィックカードでログアウト後に黒画面",
      "level": 3,
      "content": "ユーザからログアウトした後に、完全な黒画面や、カーソル/ディスプレイデバイスのロゴだけの黒画面が発生する場合があります。これは、sddm.service が NVIDIA ドライバよりも早く起動してしまうため、発生します。KMS の早期ロードを検討してください。\n\n"
    },
    {
      "title": "パスワードの最初の試行に失敗すると、その後の試行で数回キーを押すと文字列が勝手に消されてしまう",
      "level": 3,
      "content": "デフォルト以外の別のテーマを使用してください。\n\n"
    },
    {
      "title": "ハイブリッドグラフィックスで Wayland を使用すると画面の同期がずれる",
      "level": 3,
      "content": "SDDM で kwin_wayland コンポジタを使用すると、ブート時に画面の同期がずれる場合があります。mesa-amber ドライバを使用していて、X11 に戻すと正しく動作する場合、mesa-amber ドライバを mesa に置き換えると Wayland が正しく動作する可能性があります。この問題に関する詳細は KDE Bug 483804 で見られます。\n\n"
    }
  ]
}