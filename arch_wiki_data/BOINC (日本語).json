{
  "title": "BOINC (日本語)",
  "url": "https://wiki.archlinux.org/title/BOINC_(%E6%97%A5%E6%9C%AC%E8%AA%9E)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "BOINC ウェブサイト より:\n\nWikipedia より:\n\n"
    },
    {
      "title": "目次",
      "level": 2,
      "content": "- 1 インストール\n- 2 BOINC を使う 2.1 GUI 2.1.1 GPU を使用するプロジェクト 2.2 CLI\n- 3 ログファイル\n- 4 参加するプロジェクトを選ぶ際のヒント 4.1 Arch64 で実行\n- 5 トラブルシューティング 5.1 GPU missing 5.2 ノートパソコンが発熱してバッテリーの寿命が縮む\n- 6 参照\n\n- 2.1 GUI 2.1.1 GPU を使用するプロジェクト\n- 2.2 CLI\n\n- 2.1.1 GPU を使用するプロジェクト\n\n- 4.1 Arch64 で実行\n\n- 5.1 GPU missing\n- 5.2 ノートパソコンが発熱してバッテリーの寿命が縮む\n\n"
    },
    {
      "title": "インストール",
      "level": 2,
      "content": "boinc または boinc-nox パッケージをインストールしてください。後者は Xorg に依存していないため、ヘッドレスサーバー向けです。\n\nどちらのパッケージでも boinc-client.service という名前のユニットファイルがインストールされます。\n\nマネージャを接続するにはユーザーを boinc グループに追加する必要があります:\n\n```\n# usermod -a -G boinc $(whoami)\n```\n\n以下のセクションで必要なファイルを生成するために boinc-client.service を起動してください。\n\n"
    },
    {
      "title": "GUI",
      "level": 3,
      "content": "デフォルトでは、デーモンに接続するためのパスワードは /var/lib/boinc/gui_rpc_auth.cfg に作成されます。GUI でデーモンに接続するには、ホームディレクトリから /var/lib/boinc/gui_rpc_auth.cfg へのリンクを作成して、boinc グループのメンバーが読み取れるように権限を変更します:\n\n```\n$ cd ~/\n$ ln -s /var/lib/boinc/gui_rpc_auth.cfg gui_rpc_auth.cfg\n# chmod 640 gui_rpc_auth.cfg\n```\n\nパスワードを変えたい場合、あるいはパスワードを使わない場合 /var/lib/boinc/gui_rpc_auth.cfg を編集して BOINC デーモンを再起動してください。\n\nホームディレクトリにファイルを作成したくない場合、BOINC Manager はカレントディレクトリの gui_rpc_auth.cfg ファイルも読み込みます。boinc グループからファイルを読み込めるようにして /var/lib/boinc をワーキングディレクトリとしてマネージャを起動すれば、クライアントはデーモンに自動的に接続されます。デスクトップ環境のメニューエディタを使うことで設定できます。\n\nGUI を起動するときは boincmgr コマンドを使用:\n\n```\n$ boincmgr\n```\n\n起動するとプロジェクトへの参加に進みます。プロジェクトによってはアカウントの作成が必須となっており、GUI でアカウントを作成できたり、もしくはウェブサイトでアカウントを作成する必要があったりします。リソースが余っているのであれば複数のプロジェクトに参加することもできます。Tools / Attach to project メニューオプションからプロジェクトを選んでください。\n\nBOINC がプロジェクトへの接続を要求しない場合、デーモンに接続されていることを確認してください。メニューの Advanced / Select computer からマシンの名前を選択してパスワードを入力してください。\n\n"
    },
    {
      "title": "GPU を使用するプロジェクト",
      "level": 4,
      "content": "GPU を使用したい場合、プロプライエタリの NVIDIA あるいは AMD ドライバーが必要な場合があります。ATI/AMD カードの場合は Catalyst ドライバーが必要です。 Ryzen 5 2400G のような新しめの AMD システムでは、オープンソースの AMDGPU の動作に OpenCL との互換性を持たせるため、opencl-amdAUR をインストールすればよいです。 NVIDIA の場合、opencl-nvidia パッケージが必要です。x86_64 でエラーが発生しないように Xorg#ドライバーのインストールに書かれている OpenGL (Multilib) のパッケージをインストールしてください。\n\nさらに、boinc ユーザーを video グループに追加してください:\n\n```\n# gpasswd -a boinc video\n```\n\nコンピュータを使っているときに GPU 計算を停止したい場合、マウスやキーボードでクライアントと通信できるように boinc ユーザーから X セッションにアクセスできるようにする必要があります。xorg-xhost パッケージをインストールして以下のコマンドを実行することで boinc ユーザーに X セッションへのアクセス権を与えることが可能です:\n\n```\n$ xhost si:localuser:boinc\n```\n\nXorg の起動時に自動起動させるのもよいでしょう。\n\n"
    },
    {
      "title": "CLI",
      "level": 3,
      "content": "ヘッドレス環境で BOINC を使うには boinc-nox をインストールします。2つのコマンドラインツールが存在します: boinccmd と boinc。boinccmd を使用することが推奨されています:\n\n1. BOINC サービスを起動してください。\n1. サービスの RPC API と通信するためのパスワードを boinccmd に指定してください。\n\nBOINC サービスは boinc-client.service ユニットファイルで起動できます。BOINC を最初に起動した時、パスワードが生成され /var/lib/boinc/gui_rpc_auth.cfg に保存されます。boinccmd にパスワードを指定するには:\n\n- コマンドラインフラグを使ってパスワードを直接指定: boinccmd --passwd abc123 --get_host_info。\n- カレントディレクトリに gui_rpc_auth.cfg ファイルが存在することを確認。\n\nプロジェクトに登録して BOINC から参加してください。\n\nコマンドラインからプロジェクトに登録する場合、BOINC Wiki Project List からプロジェクトを選んで boinccmd --passwd abc123 --create_account ${project_url} ${my_email} ${project_password} ${project_username} というようなコマンドを実行してください。登録方法によらず、プロジェクトのキーを取得する必要があります。boinccmd --passwd abc123 --project_attach ${project_url} ${project_key} のようなコマンドを実行してください。\n\nデフォルトでは BOINC は最大でも CPU の 60% しか使わないように設定されています。設定ファイルの CPU 関連のオプションを編集することでもっと CPU を活用することができます:\n\n```\n/var/lib/boinc/global_prefs.xml\n```\n\n```\n<global_preferences>\n    <cpu_usage_limit>100.0</cpu_usage_limit>\n    ...\n</global_preferences>\n```\n\n"
    },
    {
      "title": "ログファイル",
      "level": 2,
      "content": "BOINC はログファイルを /var/lib/boinc/ に作成します:\n\n```\n/var/lib/boinc/stderrdae.txt\n/var/lib/boinc/stdoutdae.txt\n```\n\n"
    },
    {
      "title": "参加するプロジェクトを選ぶ際のヒント",
      "level": 2,
      "content": "プロジェクトによって必要なハードウェアの要件は様々、作業ユニットを完了させるのにかかる時間もばらばらです。締め切り前にユニットを完了させられなかった場合、誰かに仕事が割り振られます。あなたのマシンの性能にあったプロジェクトを選ぶと良いでしょう。\n\nまた、プロジェクトが計算データや結果を公開するのかどうかという点も（あなたが気にするのであれば）確認すべき点です。\n\n"
    },
    {
      "title": "Arch64 で実行",
      "level": 3,
      "content": "一部のプロジェクトでは32ビットアプリケーションしか提供されておらず、ワークユニットを実行したりグラフィックを表示するのに32ビットライブラリを必要とすることがあります。ライブラリは multilib リポジトリからインストールしてください。\n\n"
    },
    {
      "title": "GPU missing",
      "level": 3,
      "content": "以下のようなエラーが表示される場合:\n\n```\nGPU Missing\n```\n\nWork Unit が起動していません。boinc-client.service デーモンを再起動してください。\n\nX セッションが完全に初期化される前に BOINC デーモンが起動してしまうとこの問題が発生します。\n\n"
    },
    {
      "title": "ノートパソコンが発熱してバッテリーの寿命が縮む",
      "level": 3,
      "content": "ondemand ガバナーを使ってノートパソコンで BOINC を動作させると、CPU が最大周波数で動き続けます。ノートパソコンが過熱状態になってバッテリーが短命になる可能性があります。BOINC で CPU の周波数を上げすぎないように設定することを推奨します:\n\n```\n# echo 1 >/sys/devices/system/cpu/cpufreq/ondemand/ignore_nice_load\n```\n\n起動時に設定したい場合、以下のファイルを作成:\n\n```\n/etc/tmpfiles.d/ondemand-ignore-nice.conf\n```\n\n```\nw /sys/devices/system/cpu/cpufreq/ondemand/ignore_nice_load - - - - 1\n```\n\n"
    },
    {
      "title": "参照",
      "level": 2,
      "content": "- BOINC ホームページ\n- BOINC プロジェクトリスト\n- Wikipedia エントリ\n\n"
    }
  ]
}