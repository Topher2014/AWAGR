{
  "title": "Arch Linux Archive (Português)",
  "url": "https://wiki.archlinux.org/title/Arch_Linux_Archive_(Portugu%C3%AAs)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Artigos relacionados\n\n- Fazendo downgrade de pacotes\n\nO Arch Linux Archive (também conhecido como ALA), antigamente conhecido como Arch Linux Rollback Machine (ou ARM), armazena snapshots de repositórios oficiais, imagens iso e tarballs de bootstrap ao longo do tempo.\n\nVocê pode usá-lo para:\n\n- Fazer downgrade para uma versão anterior de um pacote (última versão está quebrada, desejo usar a anterior)\n- Restaurar todos seus pacotes para um momento específico (meu sistema está quebrado, desejo voltar para 2 meses atrás)\n- Localizar uma versão anterior de uma imagem ISO\n\nOs pacotes são mantidos apenas por poucos anos e, posteriormente, eles são movidos para Arch Linux Historical Archive no archive.org.\n\n"
    },
    {
      "title": "Localização",
      "level": 2,
      "content": "O Arch Linux Archive está disponível em https://archive.archlinux.org/.\n\nO código fonte também está disponível para configurar seu próprio espelho.\n\n"
    },
    {
      "title": "Diretórios",
      "level": 2,
      "content": "O Archive é dividido em 3 diretórios principais detalhados abaixo.\n\n```\n├── iso\n├── packages\n└── repos\n```\n\n"
    },
    {
      "title": "/repos",
      "level": 3,
      "content": "O diretório repos contém snapshots diários de espelho oficial organizado por data como o exemplo a seguir.\n\n```\nrepos\n├── 2013\n│   ├── 08\n│   │   └── 31\n│   │       ├── community\n│   │       ├── community-staging\n│   │       ├── community-testing\n│   │       ├── core\n│   │       ├── extra\n│   │       ├── gnome-unstable\n│   │       ├── kde-unstable\n│   │       ├── lastsync\n│   │       ├── multilib\n│   │       ├── multilib-staging\n│   │       ├── multilib-testing\n│   │       ├── pool\n│   │       ├── staging\n│   │       └── testing\n│   ├── 09\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │   ├── 21\n│   │   └── 22\n│   ├── 10\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 11\n│   └── 12\n├── 2014\n│   ├── 01\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 02\n│   ├── 03\n│   ├── ...\n│   └── 09\n│       ├── 01\n│       ├── ...\n│       └── 28\n├── last\n├── month\n└── week\n```\n\nNota: Os últimos 3 diretórios especiais (last, week and month) vinculam respectivamente ao último repositório sincronizado, para a última segunda-feira e para a primeira do mês atual.\n\n"
    },
    {
      "title": "/packages",
      "level": 3,
      "content": "O diretório packages contém todas as versões de cada pacote com suas assinaturas. Um diretório por pacote e diretórios de pacotes são agrupadas pela sua primeira letra.\n\n```\n├── packages\n│   ├── a\n│   │   ├── awesome\n│   │   │   ├── awesome-3.5.0-1-i686.pkg.tar.xz\n│   │   │   ├── awesome-3.5.0-1-i686.pkg.tar.xz.sig\n│   │   │   ├── awesome-3.5.0-1-x86_64.pkg.tar.xz\n│   │   │   ├── awesome-3.5.0-1-x86_64.pkg.tar.xz.sig\n│   │   │   ├── awesome-3.5.1-1-i686.pkg.tar.xz\n│   │   │   ├── awesome-3.5.1-1-i686.pkg.tar.xz.sig\n│   │   │   ├── ...\n│   │   │ \n│   │   ├── ...\n│   │   ├── awstats\n│   │   └── axel\n│   │   \n│   ├── b\n│   ├── ...\n│   └── z\n```\n\nVocê pode usar o subdiretório mágico .all para acessar todos os pacotes pelo nome deles. Ele atua como um diretório plano contendo todas as versões de cada pacote.\n\n```\n├── packages\n│   ├── .all\n│   │   ├── awesome-3.5.1-1-i686.pkg.tar.xz\n│   │   ├── ...\n│   │   ├── zsh-5.0.2-3-i686.pkg.tar.xz\n│   │   ├── zsh-5.0.2-4-i686.pkg.tar.xz\n│   │   └── ...\n```\n\nVocê pode baixar a lista de pacotes completos (existem mais de cem mil pacotes) como um índice compactado: index.0.xz.\n\n```\n$ curl https://archive.archlinux.org/packages/.all/index.0.xz | unxz\n```\n\n```\n0ad-a14-1-i686\n0ad-a14-1-x86_64\n0ad-a14-2-i686\n...\nzziplib-0.13.62-1-x86_64\nzziplib-0.13.62-2-i686\nzziplib-0.13.62-2-x86_64\n```\n\n"
    },
    {
      "title": "/iso",
      "level": 3,
      "content": "O diretório iso contém imagens ISO oficiais e tarballs bootstrap ordenados por data de lançamento.\n\n```\n├── 2014.09.03\n├── 2014.10.01\n├── 2014.11.01\n├── 2014.12.01\n├── 2015.07.01\n├── 2015.08.01\n├── 2015.09.01\n└── 2017.04.01\n    ├── arch\n    ├── archlinux-2017.04.01-x86_64.iso\n    ├── archlinux-2017.04.01-x86_64.iso.sig\n    ├── archlinux-2017.04.01-x86_64.iso.torrent\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz.sig\n    ├── md5sums.txt\n    └── sha1sums.txt\n```\n\n"
    },
    {
      "title": "Como fazer downgrade de um pacote",
      "level": 3,
      "content": "Encontre o pacote que deseja em /packages e deixe o pacman buscá-lo para instalação. Por exemplo\n\n```\n# pacman -U https://archive.archlinux.org/packages/ ... nomepacote.pkg.tar.xz\n```\n\nDeixar o pacman buscá-lo irá baixar automaticamente o arquivo .sig separado do pacote e verificá-lo de acordo com as configurações /etc/pacman.conf.\n\nAlternativamente, baixe e instale o pacote manualmente usando pacman -U.\n\nVeja também Fazendo downgrade de pacotes#Automação para as ferramentas que simplificam o processo.\n\n"
    },
    {
      "title": "Como restaurar todos os pacotes para uma data específica",
      "level": 3,
      "content": "Para restaurar todos os pacotes em sua versão em uma data específica, digamos, 30 de março de 2014, você deve direcionar o pacman para essa data, editando seu /etc/pacman.conf e use o seguinte diretiva do servidor:\n\n```\n[core]\nSigLevel = PackageRequired\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n\n[extra]\nSigLevel = PackageRequired\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n\n[community]\nSigLevel = PackageRequired\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nou substituindo seu /etc/pacman.d/mirrorlist com o seguinte conteúdo:\n\n```\n##                                                                              \n## Arch Linux repository mirrorlist                                             \n## Generated on 2042-01-01                                                      \n##\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nEntão, atualize sua base de dados e force o downgrade:\n\n```\n# pacman -Syyuu\n```\n\nSe você receber erros reclamando de pacotes corrompidos/inválidos devido à assinatura PGP, tente primeiro atualizar separadamente archlinux-keyring e ca-certificates. Como alternativa, você pode decidir temporariamente desabilitar verificação de assinatura completamente.\n\n"
    },
    {
      "title": "Historical Archive",
      "level": 2,
      "content": "A manutenção do Arch Linux Archive consome uma quantidade significativa de recursos, portanto, os pacotes antigos são removidos de tempos em tempos.\n\nAntes de removê-los, os pacotes antigos são enviados para uma coleção dedicada \"Arch Linux Historical Archive\" em archive.org.\n\nO Historical Archive não fornece uma maneira de acessar um \"snapshot\" de pacotes do Arch em um determinado momento. No entanto, há um redirecionamento em archive.archlinux.org para que os downloads de pacotes antigos sejam redirecionados para o Historical Archive em archive.org. Não deve haver impacto visível do lado do usuário, exceto pelo fato de que o archive.org é geralmente muito lento para baixar.\n\n"
    },
    {
      "title": "Localizando pacotes no Historical Archive",
      "level": 3,
      "content": "A coleção Arch Linux Historical Archive tem um índice de todos os pacotes: https://archive.org/details/archlinuxarchive\n\nTambém é possível acessar diretamente um pacote por seu identificado. O padrão geral para os identificadores é:\n\n```\narchlinux_pkg_<nome do pacote saneado>\n```\n\nPara obter o nome de pacote saneado, basta substituir qualquer caractere @, + ou . no nome de pacote por um sublinhado _.\n\nPor exemplo, o identificado para lucene++ é archlinux_pkg_lucene__.\n\nVocê pode, então, acessar a página de detalhes de um pacote por meio de seu identificador, por exemplo: https://archive.org/details/archlinux_pkg_lucene__\n\nTambém é possível executar pesquisas com o archive.org cliente Python:\n\n```\n$ ia search subject:\"archlinux package\" subject:'mysql'\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql\"}\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql-svn\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-db-mysql\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-mysql\"}\n{\"identifier\": \"archlinux_pkg_libgda-mysql\"}\n```\n\n"
    },
    {
      "title": "Baixando pacotes do Historical Archive",
      "level": 3,
      "content": "Todas as versões de pacotes disponíveis (e sua assinatura) podem ser acessadas através da página de download de um pacote: https://archive.org/download/archlinux_pkg_lucene__\n\nPara baixar, verificar e instalar um pacote usando pacman:\n\n```\n# pacman -U https://archive.org/download/archlinux_pkg_cjdns/cjdns-16.1-3-x86_64.pkg.tar.xz\n```\n\nA verificação de pacote é controlada pela opção RemoteFileSigLevel do pacman. Note que, se você usar o pacman, terá que descobrir as dependências sozinho.\n\nTambém é possível usar o archive.org cliente Python:\n\n```\n# Baixa uma versão específica de um pacote\n$ ia download archlinux_pkg_cjdns cjdns-16.1-3-x86_64.pkg.tar.xz{,.sig}\n\n# Baixa todas as versões x86_64 de um pacote, com assinaturas\n$ ia download archlinux_pkg_cjdns --glob=\"*x86_64.pkg.tar.xz*\"\n```\n\n"
    },
    {
      "title": "História",
      "level": 2,
      "content": "- O ARM (Archlinux Rollback Machine) original foi fechado em 2013-08-18.[1]\n- O novo está hospedado em seblu.net desde 2013-08-31.\n- Nova URL e fechamento a hierarquia antiga do ARM em 2015-10-13. Um novo software, agetpkg-gitAUR, foi introduzido.\n- Movido para archive.archlinux.org em 2015-12-19.[2]\n\n"
    }
  ]
}