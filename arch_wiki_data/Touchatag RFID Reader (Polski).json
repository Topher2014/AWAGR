{
  "title": "Touchatag RFID Reader (Polski)",
  "url": "https://wiki.archlinux.org/title/Touchatag_RFID_Reader_(Polski)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Touchatag to czytnik tagów RFID od Touchatag. Jest to tani zestaw składający się z czytnika tagów USB ACR122U i tagów MiFare Ultralight RFID (ID USB 072f:2200, użyj lsusb -v, aby sprawdzić wersję oprogramowania układowego - 2.14 na dzień 2020-05-10 - pod deskryptorem bcdDevice).\n\n"
    },
    {
      "title": "Instalacja",
      "level": 2,
      "content": "Zatrzymanie ładowania sprzecznych sterowników (nfc, pn533 i pn533_usb).\n\nPatrz uwaga dotycząca blokowania sterowników: wciąż mogą być ładowane ręcznie, więc powinieneś utworzyć następujący plik:\n\n```\n/etc/modprobe.d/blacklist.conf\n```\n\n```\ninstall nfc /bin/false\ninstall pn533 /bin/false\ninstall pn533_usb /bin/false\n```\n\nPrzeładuj reguły udev, wyładuj sprzeczne moduły jeżeli zostały już załadowane:\n\n```\n# rmmod pn533_usb pn533 nfc\n```\n\nalbo zwyczajnie uruchom system ponownie.\n\nIstnieją dwie opcje podłączenia czytnika tagów do libnfc. Różnica między nimi jest szczegółowo opisana na stronie stackoverflow.\n\n"
    },
    {
      "title": "USB",
      "level": 3,
      "content": "Jest to nowoczesny i zalecany sposób korzystania z tego urządzenia.\n\nAby używać acr122_usb, nie trzeba uruchamiać demona pcsc (README libnfc obecnie mówi, że należy go uruchomić, ale jest to sposób dla PC/SC).\n\nZainstaluj libnfc.\n\n"
    },
    {
      "title": "PC/SC",
      "level": 3,
      "content": "Jest to starszy i przestarzały sposób korzystania z tego urządzenia.\n\nZainstaluj ccid oraz pcsc-tools.\n\n"
    },
    {
      "title": "USB",
      "level": 3,
      "content": "Sprawdź, czy urządzenie zostało wykryte:\n\n```\n# nfc-list\n```\n\n```\nnfc-list uses libnfc 1.7.1\nNFC device: ACS / ACR122U PICC Interface opened\n```\n\nOdczyt kart NFC również działa:\n\n```\n# nfc-poll\n```\n\n```\nnfc-poll uses libnfc 1.7.1\nNFC reader: ACS / ACR122U PICC Interface opened\nNFC device will poll during 30000 ms (20 pollings of 300 ms for 5 modulations)\nISO/IEC 14443A (106 kbps) target:\n    ATQA (SENS_RES): 00  04\n       UID (NFCID1): 42  14  3e  2e\n      SAK (SEL_RES): 08\nWaiting for card removing...nfc_initiator_target_is_present: Target Released\ndone.\n```\n\n"
    },
    {
      "title": "PC/SC",
      "level": 3,
      "content": "Aby przetestować urządzenie, uruchom je:\n\n```\n# pcscd -f\n```\n\nWłącz pcscd.service, następnie umieść tag na czytniku, wynik powinien wyglądać następująco:\n\n```\n# pcsc_scan\n```\n\n```\nPC/SC device scanner\nV 1.4.17 (c) 2001-2009, Ludovic Rousseau <ludovic.rousseau@free.fr>\nCompiled with PC/SC lite version: 1.6.6\nScanning present readers...\n0: ACS ACR122U 00 00\n\nMon Mar 21 18:16:07 2011\n Reader 0: ACS ACR122U 00 00\n  Card state: Card inserted, Shared Mode,\n  ATR: 3B BE 95 00 00 41 03 00 00 00 00 00 00 00 00 00 02 90 00\n\nATR: 3B BE 95 00 00 41 03 00 00 00 00 00 00 00 00 00 02 90 00\n+ TS = 3B --> Direct Convention\n+ T0 = BE, Y(1): 1011, K: 14 (historical bytes)\n  TA(1) = 95 --> Fi=512, Di=16, 32 cycles/ETU\n    125000 bits/s at 4 MHz, fMax for Fi = 5 MHz => 156250 bits/s\n  TB(1) = 00 --> VPP is not electrically connected\n  TD(1) = 00 --> Y(i+1) = 0000, Protocol T = 0\n-----\n+ Historical bytes: 41 03 00 00 00 00 00 00 00 00 00 02 90 00\n  Category indicator byte: 41 (proprietary format)\n\nPossibly identified card (using /usr/share/pcsc/smartcard_list.txt):\n3B BE 95 00 00 41 03 00 00 00 00 00 00 00 00 00 02 90 00\n        touchatag SAM card\n```\n\n"
    },
    {
      "title": "tagEventor",
      "level": 3,
      "content": "tagEventor działa w tle i wykonuje skrypty, gdy tag wchodzi lub wychodzi z czytnika tagów.\n\nPobierz wersję binarną lub skompiluj własną.\n\nUruchom tagEventor, aby przetestować instalację:\n\n```\n# tagEventor -v 1\n```\n\nSkrypty znajdują się w /etc/gtagEventor. Przeczytaj dokumentację tagEventor, aby dowiedzieć się, jak z nich korzystać.\n\n"
    },
    {
      "title": "Firmware […] is bogus! Upgrade the reader firmware",
      "level": 3,
      "content": "Jeśli napotkasz taki problem:\n\n```\nccid_usb.c:859:ccid_check_firmware() Firmware (1.00) is bogus! Upgrade the reader firmware or get a new reader.\nifdhandler.c:104:IFDHCreateChannelByName() failed\nreaderfactory.c:1050:RFInitializeReader() Open Port 200000 Failed (usb:072f/2200:libusb:006)\nreaderfactory.c:233:RFAddReader() ACS ACR122U PICC Interface init failed.\n```\n\nREADME libnfc sugeruje wykonanie następujących czynności:\n\nUsuwanie fałszywego wykrywania oprogramowania układowego libccid: edytuj libccid_Info.plist plik konfiguracyjny (zwykle /etc/libccid_Info.plist) i zlokalizuj <key>ifdDriverOptions</key>, zmień <string>0x0000</string> na 0x0004, aby zezwolić na fałszywe urządzenia i zrestartuj pcscd.service.\n\n"
    }
  ]
}