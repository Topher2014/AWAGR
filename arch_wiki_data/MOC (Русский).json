{
  "title": "MOC (Русский)",
  "url": "https://wiki.archlinux.org/title/MOC_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Music On Console (Музыка в консоли) — лёгкий музыкальный плеер, который состоит из двух частей: сервера и плеера/интерфейса. Такая реализация похожа на реализацию MPD, но в отличие от него, MOC поставляется сразу с интерфейсом и сервер не поддерживает удалённый доступ.\n\n"
    },
    {
      "title": "Установка",
      "level": 2,
      "content": "Установите пакет moc-pulseAUR или moc-pulse-svnAUR (содержащий последнюю разрабатываемую версию). Использование драйвера PulseAudio описано в разделе #Использование PulseAudio.\n\n"
    },
    {
      "title": "Фронтенды",
      "level": 2,
      "content": "- mocicon — GTK-апплет панели для управления MOC\n\n- eXo — Qt-фронтэнд для MOC, поддерживающий скробблинг\n\n"
    },
    {
      "title": "Настройка",
      "level": 2,
      "content": "Примеры настроек есть в каталоге /usr/share/doc/moc/. При первом запуске mocp будет создан каталог ~/.moc/. Для настройки скопируйте примеры в этот каталог и отредактируйте по вкусу.\n\nЕсли вы хотите использовать MOC с OSS v4.1, обратитесь к разделу OSS#MOC.\n\nНастройка горячих клавиш описана в /usr/share/doc/moc/keymap.example.\n\n"
    },
    {
      "title": "Использование PulseAudio",
      "level": 3,
      "content": "Впишите PULSEAUDIO: в начале переменной SoundDriver:\n\n```\nSoundDriver = PULSEAUDIO:JACK:ALSA:OSS\n```\n\nТаким образом у PulseAudio будет наивысший приоритет. Перечисление других звуковых драйверов после него — это запасные варианты на случай, если предыдущие окажутся недоступны.\n\n"
    },
    {
      "title": "Навигация",
      "level": 3,
      "content": "Чтобы переключать каталоги стрелками, раскомментируйте в ~/.moc/config:\n\n```\nKeymap = keymap\n```\n\nОтредактируйте следующее в ~/.moc/keymap:\n\n```\ngo    = ENTER RIGHT\ngo_up = U LEFT\n#seek_forward  = RIGHT\n#seek_backward = LEFT\n```\n\nЧтобы ускорить навигацию и отключение от сервера, пропишите следующее в ~/.moc/config:\n\n```\nReadTags = no\nShowTime = no\nTagsCacheSize = 0\n```\n\n"
    },
    {
      "title": "Служба systemd",
      "level": 3,
      "content": "Включите эту службу для соответствующего пользователя:\n\n```\n/etc/systemd/system/moc@.service\n```\n\n```\n[Unit]\nDescription=MOC server\nConditionPathExists=/usr/bin/mocp\nAfter=network.target sound.target\n\n[Service]\nRemainAfterExit=yes\nUser=%I\nExecStart=/usr/bin/mocp -S\nExecStop=/usr/bin/mocp -x\nWorkingDirectory=/home/%I/\n\n[Install]\nWantedBy=multi-user.target\n```\n\n"
    },
    {
      "title": "Темы",
      "level": 3,
      "content": "Есть несколько тем для интерфейса плеера. Для просмотра списка доступных тем и её выбора нажмите T. Чтобы сделать выбор темы постоянным, пропишите её в файл настроек ~/.moc/config.\n\n```\nTheme = laras_theme\n```\n\nСтандартные темы находятся в каталоге /usr/share/moc/themes/. Пакет mocp-themes-gitAUR предоставляет дополнительные темы.\n\nТак как темы являются обычными текстовыми файлами, нетрудно создать свою собственную тему. Пользовательские темы считываются из каталога ~/.moc/themes/.\n\nПример файла темы:\n\n```\nbackground                     = white black\nframe                          = white black\nwindow_title                   = white black\ndirectory                      = white black\nselected_directory             = white black reverse\nplaylist                       = white black\nselected_playlist              = white black reverse\nfile                           = white black\nselected_file                  = white black reverse\nselected_info                  = white black reverse\nmarked_file                    = white black bold\nmarked_selected_file           = white black reverse\ninfo                           = white black\nmarked_info                    = white black bold\nmarked_selected_info           = white black reverse\nstatus                         = white black\ntitle                          = white black bold\nstate                          = white black\ncurrent_time                   = white black bold\ntime_left                      = white black bold\ntotal_time                     = white black bold\ntime_total_frames              = white black\nsound_parameters               = white black bold\nlegend                         = white black\ndisabled                       = white black\nenabled                        = white black bold\nempty_mixer_bar                = white black\nfilled_mixer_bar               = white black reverse\nempty_time_bar                 = white black\nfilled_time_bar                = white black reverse\nentry                          = white black\nentry_title                    = white black\nerror                          = white black bold\nmessage                        = white black\nplist_time                     = white black\n```\n\n"
    },
    {
      "title": "Использование",
      "level": 2,
      "content": "Выполните команду mocp — она запустит сервер и интерфейс. Некоторые полезные горячие клавиши (чувствительны к регистру, используйте h для просмотра более полного списка):\n\nTable content:\nНачать воспроизведение | Enter\nПауза | Space или p\nСледующий трек | n\nПредыдущий трек | b\nТихая перемотка на 5 секунд вперёд | ]\nТихая перемотка на 5 секунд назад | [\nПереключиться с плейлиста кобзору файлов (и обратно) | Tab\nДобавить один трек в плейлист | a\nДобавить каталог (рекурсивно) в плейлист | Shift+a\nУдалить трек из плейлиста | d\nОчистить плейлист | Shift+c\nУвеличить громкость на 1% | >\nУменьшить громкость на 1% | <\nУвеличить громкость на 5% | . (точка)\nУменьшить громкость на 5% | , (запятая)\nИзменить громкость на 10% | Alt+1\nИзменить громкость на 90% | Alt+9\nЗакрыть проигрыватель(без завершения работы сервера) | q\nВыход | Shift+q\n\nДля завершения работы сервера выполните команды mocp -x.\n\n"
    },
    {
      "title": "Скробблинг",
      "level": 2,
      "content": "mocp-scrobblerAUR — скробблер Last.fm/Libre.fm для MOC с поддержкой уведомлений о текущем воспроизведении, демонизации и кеширования. Он зависит только от Python 3.\n\nСкопируйте пример файла в каталог с пользовательскими конфигурационными файлами:\n\n```\nmkdir ~/.mocpscrob/\ncp /usr/share/doc/mocp-scrobbler/config.example  ~/.mocpscrob/config\n```\n\nОтредактируйте ~/.mocpscrob/config, добавив в него свои имя пользователя и пароль. При первом запуске переменная с паролем будет заменена на переменную password_md5, содержащую в себе MD5-хеш. Если необходимо изменить пароль, просто (опять) добавьте переменную с новым паролем, и значение переменной password_md5 будет обновлено.\n\nЧтобы начать скробблинг, перед запуском mocp запустите mocp-scrobbler в качестве демона. Также можно использовать псевдоним:\n\n```\nalias mocp='/usr/bin/mocp-scrobbler.py -d; mocp'\n```\n\nВ январе 2016 года last.fm обновил требования к паролям: все новые пароли должны содержать один из следующих символов !\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~ или пробел. Известно, что это вызывает ошибку аутентификации в конфигурациях mocpscrob, в которых указаны пароли, не соответствующие этим новым спецификациям. Смена пароля и соответствующее обновление пароля в ~/.mocpscrob/config решает эту проблему.\n\n"
    },
    {
      "title": "MOC не запускается",
      "level": 3,
      "content": "Если MOC не запускается, скорее всего, проблема в конфигурационных файлах ~/.moc/. Можно попробовать отредактировать файлы настройки или просто удалить весь каталог.\n\n"
    },
    {
      "title": "Странные символы",
      "level": 3,
      "content": "Если вместо нормальных линий (вертикальные линии для разделения пространства и т.д.) вы видите странного вида символы, возможно, у вас установлен шрифт, несовместимый с MOC. Либо смените шрифт, либо установите в .moc/config ASCII для рисования линий:\n\n```\nASCIILines = no\n```\n\n"
    },
    {
      "title": "FATAL_ERROR: Layout1 is malformed",
      "level": 3,
      "content": "Если MOC завершается с такой ошибкой, попробуйте добавить одну из этих строк в .moc/config:\n\n```\nLayout1 = directory(0,0,50%,100%): playlist(50%,0,100%,100%)\n```\n\nлибо\n\n```\nLayout1 = directory(0,0,50%,100%): playlist(50%,0,FILL,100%)\n```\n\nСмотрите отчёт об ошибке и Debian bugs.\n\n"
    },
    {
      "title": "Bluetooth не работает, если он не был подключен перед запуском MOC",
      "level": 3,
      "content": "При использовании PipeWire MOC по умолчанию использует JACK, что, по-видимому, и является причиной этой проблемы. Простое переключение с jack на ALSA путём изменения следующего значения в настройках решает эту проблему.\n\nЗначение по умолчанию: JACK:OSS:ALSA\n\nНовое значение: ALSA:OSS:JACK\n\nMOC выбирает первый работающий аудиодрайвер, таким образом, ALSA будет выбран первым. Это должно решить проблемы с bluetooth.\n\n"
    },
    {
      "title": "Смотрите также",
      "level": 2,
      "content": "- Официальная документация\n\n"
    }
  ]
}